---
title: "R中华夫图的一种新画风"
date: 2024-03-18T15:37:28Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
R中华夫图的一种新画风 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来介绍如何通过<strong>「ggbrick包绘制华夫腿」</strong>，目前git版已经增加新的功能，使用非常的简洁并且兼容ggplot2，更多详细内容请参考作者官方文档。</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>官方文档</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>https://github.com/doehm/ggbrick</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>加载R包</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br>install.packages(<span>'devtools'</span>)<br>devtools::install_github(<span>'thomasp85/ggfx'</span>)<br>devtools::install_github(<span>"doehm/ggbrick"</span>)<br><span>library</span>(ggfx)<br><span>library</span>(ggbrick)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>案例1</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>mpg |&gt;<br>  count(class, drv) |&gt;<br>  ggplot() +<br>  geom_waffle0(aes(class, n, fill = drv))+<br>  coord_waffle() +<br>  scale_fill_brewer(type = <span>"qual"</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-imgfileid="100026604" data-ratio="0.5990740740740741" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCiaXYJKmTG2pLFmeFJe2ImY0HhjD0s7mxSVHjIQv5eXqFDfEGiatqvexQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCiaXYJKmTG2pLFmeFJe2ImY0HhjD0s7mxSVHjIQv5eXqFDfEGiatqvexQ/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>案例2</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>mpg |&gt;<br>  count(class, drv) |&gt;<br>  ggplot() +<br>  geom_waffle(aes(class, n, fill = drv), gap = <span>0.02</span>)+<br>  coord_waffle() +<br>  scale_fill_brewer(type = <span>"qual"</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-imgfileid="100026603" data-ratio="0.5990740740740741" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCLBahOozOrUx9Iy1iaFzfJzYI6TicgeMu6tkRy9QsiaLNDeiayHLWyoB7ibg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCLBahOozOrUx9Iy1iaFzfJzYI6TicgeMu6tkRy9QsiaLNDeiayHLWyoB7ibg/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>案例3</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>mpg |&gt;<br>  count(class, drv) |&gt;<br>  ggplot() +<br>  geom_waffle0(aes(class, n, fill = drv)) +<br>  scale_fill_brewer(type = <span>"qual"</span>) +<br>  coord_flip() +<br>  theme(aspect.ratio = <span>2</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-imgfileid="100026605" data-ratio="0.5990740740740741" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvC7NTyFj2ibGvAF4QbPY3GZ7bQaGOxX0hARXLxgUg2uQJXcE42jGDpXgg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvC7NTyFj2ibGvAF4QbPY3GZ7bQaGOxX0hARXLxgUg2uQJXcE42jGDpXgg/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>高端版</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>mpg %&gt;% count(class,drv) %&gt;% <br>  ggplot()+<br>  with_shadow(<br>    geom_waffle0(aes(class,n,fill=drv),gap=<span>0.016</span>),x_offset=<span>4</span>,<br>                     y_offset=<span>4</span>)+<br>  scale_fill_brewer(type=<span>"qual"</span>)+<br>  coord_waffle()+<br>  theme_test()<br></code></pre><figure data-tool="mdnice编辑器"><img data-imgfileid="100026606" data-ratio="0.5990740740740741" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCpyaibiaBnenib0ib7icDyLKhLVRCM924ic9H4s0SvUZ3ibVho7WCgHFYia17kw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCpyaibiaBnenib0ib7icDyLKhLVRCM924ic9H4s0SvUZ3ibVho7WCgHFYia17kw/640?wx_fmt=png&amp;from=appmsg"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节介绍到此结束，有需要学习数据可视化的朋友欢迎加入小编的VIP会员群，购买小编VIP会员文档的读者，<strong>「将自动获得2024年及以后更新的绘图文档代码，无需额外付费」</strong>。目前会员文档(2023+2024)<strong>「已经更新上传了150+案例文档」</strong>，每个案例都附有相应的数据和代码，并配有对应的注释文档，方便大家学习和参考。<strong>「有需要者欢迎店铺咨询购买」</strong></p><span>❞</span></blockquote><p data-tool="mdnice编辑器"><strong>「2024更新的绘图内容同时包含数据+代码+markdown注释文档+文档清单」</strong><img data-imgfileid="100026607" data-ratio="0.6175925925925926" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCWhWWdIUKDHwKribAv21nVOSfGBpB68kOUICIibw5Neta3d2LVGl82kqQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCWhWWdIUKDHwKribAv21nVOSfGBpB68kOUICIibw5Neta3d2LVGl82kqQ/640?wx_fmt=png&amp;from=appmsg"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>2024年更新案例</span><span></span></h3><p data-tool="mdnice编辑器"><img data-imgfileid="100026610" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCce8WWRjsaMsePnpJCkHvvibWkbRiciczNqzdwyChHb83tdiaEN0h5U2HUQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCce8WWRjsaMsePnpJCkHvvibWkbRiciczNqzdwyChHb83tdiaEN0h5U2HUQ/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100026611" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCXUuUBqeiaSuWStYPdY8n7W7icI2TGkfqVzmbiclDFzRqbKrm9j1tLBwng/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCXUuUBqeiaSuWStYPdY8n7W7icI2TGkfqVzmbiclDFzRqbKrm9j1tLBwng/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100026608" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCZdpGJWDicICibaXANgMUm79EJ5YoLPOEHhQrFVBtFYGhE7guFx5oXBicg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCZdpGJWDicICibaXANgMUm79EJ5YoLPOEHhQrFVBtFYGhE7guFx5oXBicg/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100026609" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvC3icpBtH5xcNs43h3N0zs3PDbCRncSFA92u6L4y3MTMXsfBuQSTgloAg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvC3icpBtH5xcNs43h3N0zs3PDbCRncSFA92u6L4y3MTMXsfBuQSTgloAg/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100026612" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvC46za6KjSw2cx1cfazqENrQDDKwmossWVf3Wgt9nI0KyeH8VHWjGyMg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvC46za6KjSw2cx1cfazqENrQDDKwmossWVf3Wgt9nI0KyeH8VHWjGyMg/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100026617" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCaZzKZdYyKLicXPaPvtyNocL5LEicEKPVwI5WicckQNicnJIFrm5PpfmWVg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCaZzKZdYyKLicXPaPvtyNocL5LEicEKPVwI5WicckQNicnJIFrm5PpfmWVg/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100026618" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCKJMaecTqsrj9zs7DS5ImaaCNfranQUrm5XcsevtOPjcPvT1tbicEibWw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCKJMaecTqsrj9zs7DS5ImaaCNfranQUrm5XcsevtOPjcPvT1tbicEibWw/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100026616" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCMOOVsicuAOsbhd3l4w0Ly1f0LQLDOBiaA2CWBzoEjMC7FE3ADCDtf3TQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZO4jnJmRmQ1XDU3WEdfdvCMOOVsicuAOsbhd3l4w0Ly1f0LQLDOBiaA2CWBzoEjMC7FE3ADCDtf3TQ/640?wx_fmt=png&amp;from=appmsg"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝店铺(长按二维码跳转)</span><span></span></h3><p><img data-galleryid="" data-imgfileid="100019415" data-ratio="1.0210420841683367" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAbvhPDLGT8NaialEsht92PTYNJWpmVLfoYGic1uha5FyBrDCibibZCLjiazgvpT1XcdwibfVywD2el0VAgg/640?wx_fmt=jpeg" data-type="jpeg" data-w="998" src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAbvhPDLGT8NaialEsht92PTYNJWpmVLfoYGic1uha5FyBrDCibibZCLjiazgvpT1XcdwibfVywD2el0VAgg/640?wx_fmt=jpeg"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><p data-tool="mdnice编辑器"><br></p></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/975niEcEiAsBVacvfrPaxg",target="_blank" rel="noopener noreferrer">原文链接</a>
