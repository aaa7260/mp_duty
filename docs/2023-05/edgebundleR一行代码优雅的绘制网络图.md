---
title: "edgebundleR一行代码优雅的绘制网络图"
date: 2023-05-21T23:14:32Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
edgebundleR一行代码优雅的绘制网络图 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来介绍一个R包<strong>「edgebundleR」</strong>,其主要作用是用来绘制交互式网络图，非常的简单甚至不用查看帮助文档，一行代码即可绘制网络图。下面通过三个R包案例分别来介绍网络图的绘制。<strong>「数据+代码已经上传2023VIP群，加群的观众老爷请自行下载」</strong></p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>加载R包</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br><span># 安装所需的包 "edgebundleR"</span><br><span>library</span>(edgebundleR)<br><span>library</span>(igraph)<br><span>library</span>(ggraph)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>导入数据</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>d &lt;- read_tsv(<span>"data.xls"</span>)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>igraph绘制网络图</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span># 获取重复的集合</span><br>sets &lt;- unique(d$Set[duplicated(d$Set)])<br><span># 创建一个长度为sets长度的列表</span><br>rel &lt;- vector(<span>"list"</span>, length(sets))<br><br><span># 针对每个重复的集合，创建组合数据框</span><br><span>for</span> (i <span>in</span> <span>1</span>:length(sets)) {<br>  rel[[i]] &lt;- as.data.frame(t(combn(subset(d, d$Set == sets[i])$ID, <span>2</span>)))<br>}<br><span>library</span>(data.table)<br>rel &lt;- rbindlist(rel)<br><br><span># 从数据框创建图形对象</span><br>g &lt;- graph.data.frame(rel, directed = <span>F</span>, vertices = d)<br>clr &lt;- as.factor(V(g)$Loc)<br>levels(clr) &lt;- c(<span>"#DE9ED6FF"</span>, <span>"#709AE1FF"</span>, <span>"darkorange"</span>)<br>V(g)$color &lt;- as.character(clr)<br><br><span># 绘制图形，使用圆形布局，顶点大小为度的5倍，不显示顶点标签</span><br>plot(g, layout = layout.circle, vertex.size = degree(g) * <span>5</span>, vertex.label = <span>NA</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.978343949044586" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKbN0ZDjCRRHmOehN8eTLUguKSYKqeoFWjJq7s6j2m1cPyVU4dzefCFg/640?wx_fmt=png" data-type="png" data-w="785" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKbN0ZDjCRRHmOehN8eTLUguKSYKqeoFWjJq7s6j2m1cPyVU4dzefCFg/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>circlize绘制网络图</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span># 导入 circlize 包</span><br><span>library</span>(circlize)<br><br><span># 初始化 circlize 绘图环境，使用数据中的ID作为因子，设置x轴范围为0到10</span><br>circos.initialize(factors = as.factor(d$ID), xlim = c(<span>0</span>, <span>10</span>))<br><br><span># 创建轨道绘图区域，使用数据中的ID作为因子，设置y轴范围为0到0.5，背景颜色根据图中节点的颜色设定，不显示边界线，轨道高度为0.05</span><br>circos.trackPlotRegion(factors = as.factor(d$ID), ylim = c(<span>0</span>, <span>0.5</span>), bg.col = V(g)$color,<br>                       bg.border = <span>NA</span>, track.height = <span>0.05</span>)<br><br><span># 遍历每一行关系数据</span><br><span>for</span>(i <span>in</span> <span>1</span>:nrow(rel)) {<br>  <span># 在圆环上绘制连接线，起始点为rel[i,1]的ID，y轴为0，终点为rel[i,2]的ID，y轴为0，线的高度为0.4</span><br>  circos.link(rel[i,<span>1</span>], <span>0</span>, rel[i,<span>2</span>], <span>0</span>, h = <span>0.4</span>)<br>}<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.978343949044586" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKL8xy1pKTrMjhhib1JEZGtbthYXhMQCiaT5XAJ8Gze1NfOZwonGD9mzibQ/640?wx_fmt=png" data-type="png" data-w="785" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKL8xy1pKTrMjhhib1JEZGtbthYXhMQCiaT5XAJ8Gze1NfOZwonGD9mzibQ/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>edgebundle绘制网络图</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>edgebundle(g, tension = <span>0.1</span>, cutoff = <span>0.5</span>, fontsize = <span>18</span>, padding = <span>40</span>)<br>edgebundle(g)<br></code></pre><blockquote data-tool="mdnice编辑器"><span>❝</span><p>tension: 边的张力参数，控制边的曲线度。较低的值会产生较直的边，而较高的值会产生更弯曲的边。这里设置为 0.1。<br>cutoff: 边捆绑的阈值参数，控制捆绑边的密度。较低的值会产生更多的捆绑边，而较高的值会产生较少的捆绑边。这里设置为 0.5。<br>fontsize: 边标签的字体大小。这里设置为 18。<br>padding: 边捆绑图的内边距，控制图形的边缘空白区域的大小。这里设置为 40。</p><span>❞</span></blockquote><figure data-tool="mdnice编辑器"><img data-ratio="0.6783681214421252" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKMlJ6W6BDiastiad06CBuv3ofx5etbs1ZJpB3vZg9fGHD3bAtgSyUMzAg/640?wx_fmt=png" data-type="png" data-w="1054" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKMlJ6W6BDiastiad06CBuv3ofx5etbs1ZJpB3vZg9fGHD3bAtgSyUMzAg/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>有需要学习个性化数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>购买<strong>「2023年度会员」</strong> <code>初始价格99元</code>，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码；按照往年数据小编年产出约在150+以上,文末有购买方式。</p><span>❞</span></blockquote><p data-tool="mdnice编辑器">购买后微信发小编订单截图即邀请进新的会员交流群，小编的文档为按年售卖，只包含当年度的<strong>「除系列课程外」</strong>的文档，有需要往年文档的朋友也可下单购买，需要了解更多信息的朋友欢迎交流咨询。</p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝店铺</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-ratio="1.6136783733826248" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKbnvQ5pic1NoBXtB3jZPW1Q9xOh3WJEIfYhpfH00r7UAdZfFmT2Qz28w/640?wx_fmt=png" data-type="png" data-w="541" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKbnvQ5pic1NoBXtB3jZPW1Q9xOh3WJEIfYhpfH00r7UAdZfFmT2Qz28w/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>小编微信</span><span></span></h3><p><img data-galleryid="" data-ratio="1" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg" data-type="jpeg" data-w="430" src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-weui-theme="light" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><h3 data-tool="mdnice编辑器"><span></span><span><span></span>2023会员群精彩内容</span><span></span></h3><p data-tool="mdnice编辑器"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhK0rk6mF4FVA1YQWF2xricMmz9kNLapQSjHvzE6PA7UTJUxicB1to8CwbA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhK0rk6mF4FVA1YQWF2xricMmz9kNLapQSjHvzE6PA7UTJUxicB1to8CwbA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKksqs8yX3nQ77t1SQRUuhuQhlpJv9DpavG1iaUpLF9ibXNTibjia6hyEWBA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKksqs8yX3nQ77t1SQRUuhuQhlpJv9DpavG1iaUpLF9ibXNTibjia6hyEWBA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKFHSCdRhYubM0B4ka2icwSQTIj2ZvWCzOwwiaicnVVPV10RUKgbLibubIpQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKFHSCdRhYubM0B4ka2icwSQTIj2ZvWCzOwwiaicnVVPV10RUKgbLibubIpQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKibnVWWbnIYuiatb9ktg2Pka166c8ENoiaqcnRycthMl5RTShibNXvDDSCg/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKibnVWWbnIYuiatb9ktg2Pka166c8ENoiaqcnRycthMl5RTShibNXvDDSCg/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKxnWlGuNE2ltM49naF6qfvib3j8k5nK3oiaZ8N7STVRcF3hc3sUahiaTTQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKxnWlGuNE2ltM49naF6qfvib3j8k5nK3oiaZ8N7STVRcF3hc3sUahiaTTQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKXQqOYW3Df6blbOpGNMLrWSxEy3MOhtEno0icqDgxialcppQy7XhXBIuA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaa9rV6v78JvoyHiaWpzbzhKXQqOYW3Df6blbOpGNMLrWSxEy3MOhtEno0icqDgxialcppQy7XhXBIuA/640?wx_fmt=png"></p></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/K07y62EzRwIdgvdiXkkqew",target="_blank" rel="noopener noreferrer">原文链接</a>
