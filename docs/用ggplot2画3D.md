---
title: "用ggplot2画3D"
date: 2023-01-01T10:56:15Z
draft: ["false"]
tags: [
  "fetched",
  "YuLabSMU"
]
categories: ["Acdemic"]
---
用ggplot2画3D by YuLabSMU
------
<div><section data-tools="新媒体管家" data-label="powered by xmt.cn"></section><section><p>在《<a href="http://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247485721&amp;idx=1&amp;sn=8a3ec024c2cdd455d815ef3ebd15bec2&amp;scene=21#wechat_redirect">扪心自问，meme几何？</a>》一文中，我画了一只兔子：</p><p><img data-backh="567" data-backw="558" data-before-oversubscription-url="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lj1IRINMdCVMIDianVyqQUOHnOGh09ibE230k6A0ZpA0Sppmn0LeuIpje37OoQ8HiaGvCPUeLYgtKqw/0?wx_fmt=png" data-copyright="0" data-ratio="1.0166270783847982" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lj1IRINMdCVMIDianVyqQUOHnOGh09ibE230k6A0ZpA0Sppmn0LeuIpje37OoQ8HiaGvCPUeLYgtKqw/640?wx_fmt=png" data-type="png" data-w="842" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lj1IRINMdCVMIDianVyqQUOHnOGh09ibE230k6A0ZpA0Sppmn0LeuIpje37OoQ8HiaGvCPUeLYgtKqw/640?wx_fmt=png"></p><p>今天给大家演示一下画一只3D版本的兔子，我们知道<code>ggplot2</code>不支持3D，只能画2D的图，但3D其实只是视觉上的，显示在你屏幕上的，同样只是2D。所以我们要做的，就是把3D的坐标转换成2D，然后画出2D的图片来，而这2D看上去有3D的效果。</p><p>我们首先定义一个转换函数：</p><pre><code>trans_3d_2d &lt;- <span><span>function</span><span>(data, theta=<span>135</span>, phi=<span>60</span>)</span> </span>{<br>    pmat &lt;- plot3D::perspbox(z=diag(<span>2</span>), plot=F, theta=theta, phi=phi)<br><br>    data &lt;- <span>as</span>.data.frame(data)<br>   XY &lt;- plot3D::trans3D(<br>       x = data$x,<br>       y = data$y,<br>       z = data$z,<br>       pmat = pmat) %&gt;%<br>     data.frame()<br><br>   data$x &lt;- XY$x<br>   data$y &lt;- XY$y<br><br>    <span>return</span>(data[, c(<span>'x'</span>, <span>'y'</span>)])<br>}<br></code></pre><p>然后我们使用一个3D兔子的坐标来测试一下，当然一般画3D的程序都支持你用鼠标交互，比如旋转角度什么的，但我们用<code>ggplot2</code>就不可以，我们能做到的，就是在调用上面的转换函数时，指定不同的角度而已。</p><pre><code><span>require</span>(onion)<br>data(bunny)<br>d &lt;- trans_3d_2d(bunny)<br><br><span>require</span>(ggplot2)<br>ggplot(d, aes(x, y, color=x)) + geom_point(alpha=<span>.2</span>)  + <br>    coord_flip() + <br>    theme(legend.position=<span>"none"</span>) + <br>    scale_y_reverse()<br></code></pre><figure><br><img data-backh="348" data-backw="558" data-before-oversubscription-url="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4k4UrBeSqKKc86zVdXCCZcgMEYZGCOQS8ib0nmEUycRkibfLV981FZbqu0eGknt6fS8xu13Gqe9YIdw/640?wx_fmt=png" data-ratio="0.625" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4k4UrBeSqKKc86zVdXCCZcgMEYZGCOQS8ib0nmEUycRkibfLV981FZbqu0eGknt6fS8xu13Gqe9YIdw/640?wx_fmt=png" data-type="png" data-w="1280" title="" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4k4UrBeSqKKc86zVdXCCZcgMEYZGCOQS8ib0nmEUycRkibfLV981FZbqu0eGknt6fS8xu13Gqe9YIdw/640?wx_fmt=png"><br>除了把3D变2D，还能把3D拍（拍黄瓜那个拍）成2D来画，比如在《<a href="http://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247485521&amp;idx=1&amp;sn=626503f55d9994af5b89cb8c69ea3a72&amp;scene=21#wechat_redirect">一千个伤心的理由</a>》中，我展示了把一个三元的不等式，用二维的曲线画出来：</figure><img data-backh="558" data-backw="558" data-before-oversubscription-url="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4k6SSxKpibCbqhwkGiceGiboDiaq5mekribibZBDbUHOsWM1l1ffUdCcoicq6ptZ9wa9dwWQlp6rIIibuCs0w/?wx_fmt=png" data-ratio="1" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4k6SSxKpibCbqhwkGiceGiboDiaq5mekribibZBDbUHOsWM1l1ffUdCcoicq6ptZ9wa9dwWQlp6rIIibuCs0w/640?wx_fmt=png" data-type="png" data-w="2099" title="" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4k6SSxKpibCbqhwkGiceGiboDiaq5mekribibZBDbUHOsWM1l1ffUdCcoicq6ptZ9wa9dwWQlp6rIIibuCs0w/640?wx_fmt=png"></section><section><blockquote><p>PS:在七夕来临之际，这里有一套《<a href="https://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247484778&amp;idx=1&amp;sn=6c654f2c807ee802bb06491998d36830&amp;scene=21#wechat_redirect">如何告别单身</a>》的秘籍，请查收。</p></blockquote></section><section><section><hr><p><strong>往期精彩</strong></p><ul><li><p><a href="http://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247485537&amp;idx=1&amp;sn=98f4072d4ba130cd3129a005292cef13&amp;scene=21#wechat_redirect">美化base plot</a></p></li><li><p><a href="http://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247485521&amp;idx=1&amp;sn=626503f55d9994af5b89cb8c69ea3a72&amp;scene=21#wechat_redirect">一千个伤心的理由</a></p></li><li><p><a href="http://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247484185&amp;idx=1&amp;sn=513c35f617ba7942c883ded5886a389b&amp;scene=21#wechat_redirect">交互式操作进化树</a></p></li><li><p><a href="https://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247486088&amp;idx=1&amp;sn=a958a1373b697cec1df2ba7f2fcd4f97&amp;scene=21#wechat_redirect">2018世界杯专属图层</a></p></li><li><p><a href="https://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247486133&amp;idx=1&amp;sn=506c42856f734f5754043f737fcfd105&amp;scene=21#wechat_redirect">ggsave支持base plot</a></p></li><li><p><a href="https://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247486236&amp;idx=1&amp;sn=d841077216669ac1b5ad7c49648e3367&amp;scene=21#wechat_redirect">ggplot label placement</a></p></li><li><p><a href="https://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247485271&amp;idx=1&amp;sn=cdeb01124341ed8a0a6f6f2620ddada9&amp;scene=21#wechat_redirect">转发5个群，Y叔送你一顶帽子</a></p></li><li><p><a href="https://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247485584&amp;idx=2&amp;sn=575b802667f94fd2665a43cdd8178f82&amp;scene=21#wechat_redirect">Y学术-谷歌学术镜像检索并一键下载文献</a></p></li></ul></section></section></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/W0-QoNY25XXQm6SYe3EpIA",target="_blank" rel="noopener noreferrer">原文链接</a>
