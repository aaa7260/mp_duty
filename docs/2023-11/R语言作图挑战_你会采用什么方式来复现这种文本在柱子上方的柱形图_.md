---
title: "R语言作图挑战：你会采用什么方式来复现这种文本在柱子上方的柱形图?"
date: 2023-11-02T11:45:27Z
draft: ["false"]
tags: [
  "fetched",
  "小明的数据分析笔记本"
]
categories: ["Acdemic"]
---
R语言作图挑战：你会采用什么方式来复现这种文本在柱子上方的柱形图? by 小明的数据分析笔记本
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" data-mpa-powered-by="yiban.io"><p data-tool="mdnice编辑器">看见R语言数据可视化大佬的twitter</p><figure data-tool="mdnice编辑器"><img data-ratio="1.0557809330628802" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/t1wZDoUyFk6GEujSvo7D06f0EXtOkefBqHhN5teTiaicGyR9GaQNfPwP4niaVTPLUx6qI4kDTNS4bxE7jaEgeicoFA/640?wx_fmt=png" data-type="png" data-w="986" src="https://mmbiz.qpic.cn/sz_mmbiz_png/t1wZDoUyFk6GEujSvo7D06f0EXtOkefBqHhN5teTiaicGyR9GaQNfPwP4niaVTPLUx6qI4kDTNS4bxE7jaEgeicoFA/640?wx_fmt=png"><figcaption>image.png</figcaption></figure><figure data-tool="mdnice编辑器"><img data-ratio="0.7175925925925926" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/t1wZDoUyFk6GEujSvo7D06f0EXtOkefBSeeDMDDBlHnJEWISaXUyOl3dJqoXocYsP8WPNcPNh9X28rhfrTasYQ/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/sz_mmbiz_png/t1wZDoUyFk6GEujSvo7D06f0EXtOkefBSeeDMDDBlHnJEWISaXUyOl3dJqoXocYsP8WPNcPNh9X28rhfrTasYQ/640?wx_fmt=png"><figcaption>image.png</figcaption></figure><blockquote data-tool="mdnice编辑器"><p><strong>挑战：你会采用什么方式来复现这种文本在柱子上方的柱形图</strong></p></blockquote><p data-tool="mdnice编辑器">今天的推文我给出自己的方案，欢迎大家留言讨论给出自己的方案</p><blockquote data-tool="mdnice编辑器"><p>我的思路是在输入数据上做准备，我把数据整理成如下格式</p></blockquote><p data-tool="mdnice编辑器">这里是5个柱子，我准备10个柱子的数据，其中5个柱子的值设置为0</p><p data-tool="mdnice编辑器">我整理的数据格式如下</p><figure data-tool="mdnice编辑器"><img data-ratio="0.5647226173541963" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/t1wZDoUyFk6GEujSvo7D06f0EXtOkefBQL2hncz8iaWmTdQgmtkyuZZOWF3TKjYLg0WgpdvKl8CghMNYLvoribibA/640?wx_fmt=png" data-type="png" data-w="703" src="https://mmbiz.qpic.cn/sz_mmbiz_png/t1wZDoUyFk6GEujSvo7D06f0EXtOkefBQL2hncz8iaWmTdQgmtkyuZZOWF3TKjYLg0WgpdvKl8CghMNYLvoribibA/640?wx_fmt=png"><figcaption>image.png</figcaption></figure><h2 data-tool="mdnice编辑器"><span></span><span>作图代码</span><span> </span></h2><pre data-tool="mdnice编辑器"><span></span><code>library(readxl)<br>library(ggplot2)<br>library(ggh4x)<br><br>dat&lt;-read_excel(<span>"data/20231027/20231027.xlsx"</span>)<br>dat<br><br>ggplot(data = dat,aes(x=x,y=y))+<br>  geom_col(aes(fill=group),show.legend = FALSE)+<br>  geom_text(aes(x=0,y=y,label=label),<br>            hjust=0,vjust=1,size=10)+<br>  geom_text(aes(x=x,y=y,label=scales::percent(label1,accuracy = 0.1)),<br>            hjust=c(rep(1,9),0),<br>            size=5,<br>            color=c(rep(<span>"white"</span>,9),<span>"black"</span>),<br>            fontface=<span>"bold"</span>)+<br>  theme_bw(base_size = 20)+<br>  theme(panel.grid = element_blank(),<br>        panel.border = element_blank(),<br>        axis.text.y = element_blank(),<br>        axis.ticks.y = element_blank(),<br>        axis.line.x = element_line())+<br>  labs(x=<span>"Proportion"</span>,y=NULL)+<br>  guides(x=guide_axis_truncated(trunc_lower = 0,<br>                                trunc_upper = 40))+<br>  scale_x_continuous(labels = <span>function</span>(x){paste0(x,<span>"%"</span>)})+<br>  scale_fill_manual(values = c(<span>"A"</span>=<span>"#1d7859"</span>,<span>"B"</span>=<span>"#7f7f7f"</span>,<span>"D"</span>=<span>"white"</span>))<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="1.0046296296296295" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/t1wZDoUyFk6GEujSvo7D06f0EXtOkefBOBLAZxib1I09cwra3wDEjMmcsPflTzFJiarp4xzXOiboq0LXGgwuztUWQ/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/sz_mmbiz_png/t1wZDoUyFk6GEujSvo7D06f0EXtOkefBOBLAZxib1I09cwra3wDEjMmcsPflTzFJiarp4xzXOiboq0LXGgwuztUWQ/640?wx_fmt=png"><figcaption>image.png</figcaption></figure><blockquote data-tool="mdnice编辑器"><p>欢迎大家积极留言给出自己的画图思路</p></blockquote><p data-tool="mdnice编辑器">今天推文的示例数据和代码可以给推文打赏1元获取</p><p data-tool="mdnice编辑器">欢迎大家关注我的公众号</p><p data-tool="mdnice编辑器"><strong>小明的数据分析笔记本</strong></p><section><mp-common-profile data-pluginname="mpprofile" data-id="MzI3NzQ3MTcxMg==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/t1wZDoUyFk5t1sOnM0iabvBhnfIj5YpyqrMib0E1MGCd9ibcYxaOPZd0GWhQBDvK2BPEwsicQxd6y5MHLfphnwHnow/0?wx_fmt=png" data-nickname="小明的数据分析笔记本" data-alias="" data-signature="分享R语言和python在生物信息领域做数据分析和数据可视化的简单小例子；偶尔会分享一些组学数据处理相关的内容" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><p data-tool="mdnice编辑器"><br></p><blockquote data-tool="mdnice编辑器"><p>小明的数据分析笔记本 公众号 主要分享：1、R语言和python做数据分析和数据可视化的简单小例子；2、园艺植物相关转录组学、基因组学、群体遗传学文献阅读笔记；3、生物信息学入门学习资料及自己的学习笔记！</p></blockquote><figure data-tool="mdnice编辑器"><img data-ratio="0.425" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/t1wZDoUyFk6GEujSvo7D06f0EXtOkefBjeOkVIwZibgc7SCL1KUBBuzjB8V5iapXWKy0x8j9PwUfb2Q48waGic5bQ/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/sz_mmbiz_png/t1wZDoUyFk6GEujSvo7D06f0EXtOkefBjeOkVIwZibgc7SCL1KUBBuzjB8V5iapXWKy0x8j9PwUfb2Q48waGic5bQ/640?wx_fmt=png"><figcaption>image.png</figcaption></figure></section><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/02oQKH1Cc4LKmW8I2WYRIw",target="_blank" rel="noopener noreferrer">原文链接</a>
