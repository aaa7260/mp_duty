---
title: "假如你不喜欢最新版的Seurat包的单细胞理念"
date: 2023-11-13T11:48:20Z
draft: ["false"]
tags: [
  "fetched",
  "生信技能树"
]
categories: ["Acdemic"]
---
假如你不喜欢最新版的Seurat包的单细胞理念 by 生信技能树
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><blockquote data-tool="mdnice编辑器"><p>毫无疑问，Seurat流程是目前单细胞转录组数据分析的主流，但是我们在过去的五年都熟悉了它的V4版本的代码架构，在R语言的cran官网可以看到其历史更新情况：</p></blockquote><ul data-tool="mdnice编辑器"><li><section>https://cran.r-project.org/src/contrib/Archive/Seurat/</section></li></ul><p data-tool="mdnice编辑器">最近三年都是V4的版本：</p><pre data-tool="mdnice编辑器"><span></span><code>[   ] Seurat_4.0.0.tar.gz 2021-01-30 01:00 1.4M  <br>[   ] Seurat_4.0.1.tar.gz 2021-03-18 07:30 1.4M  <br>[   ] Seurat_4.0.2.tar.gz 2021-05-21 00:00 1.4M  <br>[   ] Seurat_4.0.3.tar.gz 2021-06-10 23:20 1.4M  <br>[   ] Seurat_4.0.4.tar.gz 2021-08-20 21:10 1.4M  <br>[   ] Seurat_4.0.5.tar.gz 2021-10-17 22:30 1.4M  <br>[   ] Seurat_4.0.6.tar.gz 2021-12-16 18:00 1.4M  <br>[   ] Seurat_4.1.0.tar.gz 2022-01-14 19:32 1.4M  <br>[   ] Seurat_4.1.1.tar.gz 2022-05-02 07:40 1.4M  <br>[   ] Seurat_4.2.0.tar.gz 2022-09-22 00:50 1.4M  <br>[   ] Seurat_4.2.1.tar.gz 2022-11-08 01:00 1.4M    <br>[   ] Seurat_4.3.0.tar.gz 2022-11-19 00:30 1.4M  <br>[   ] Seurat_4.4.0.tar.gz 2023-09-28 10:50 1.5M  <br></code></pre><p data-tool="mdnice编辑器">我们依赖于这个V4的版本的Seurat流程做出来了大量的公共数据集的单细胞转录组降维聚类分群流程，100多个公共单细胞数据集全部的处理，链接：https://pan.baidu.com/s/1MzfqW07P9ZqEA_URQ6rLbA?pwd=3heo</p><p data-tool="mdnice编辑器">但是最近其官方版本成为了V5，链接是：https://cran.r-project.org/web/packages/Seurat/index.html</p><pre data-tool="mdnice编辑器"><span></span><code>Version: 5.0.0<br>Depends: R (≥ 4.0.0), methods, SeuratObject (≥ 5.0.0)<br>Imports: cluster, cowplot, fastDummies, fitdistrplus, future,  <br>Published: 2023-11-04<br><br>Package <span>source</span>: Seurat_5.0.0.tar.gz<br>Windows binaries: r-devel: Seurat_5.0.0.zip, r-release: Seurat_5.0.0.zip, r-oldrel: Seurat_5.0.0.zip<br></code></pre><p data-tool="mdnice编辑器">同时还升级了 SeuratObject 也是V5了，这样的话如果新人开始学单细胞转录组技术分析流程，使用默认的安装代码，就默认安装了V5版本的SeuratObject 和Seurat，非常可怕！！！</p><p><img data-galleryid="" data-ratio="0.8860759493670886" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wz1GaLURwXlhsapqylxasqY023pMa8rZLDMBXauy44JMpCl0RpRedO7RPYVpGD1dKokG6xHNmwqzA/640?wx_fmt=png" data-type="png" data-w="869" src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wz1GaLURwXlhsapqylxasqY023pMa8rZLDMBXauy44JMpCl0RpRedO7RPYVpGD1dKokG6xHNmwqzA/640?wx_fmt=png"></p><ul data-tool="mdnice编辑器"><li><section>Seurat的默认的安装代码是从CRAN安装：</section></li></ul><pre data-tool="mdnice编辑器"><span></span><code><span># 1 directly download from CRAN</span><br><span># mirror for cran： </span><br>options(repos=<span>"https://mirrors.tuna.tsinghua.edu.cn/CRAN/"</span>) <br><br>install.packages(<span>"Seurat"</span>, repos=<span>"https://mirrors.ustc.edu.cn/CRAN/"</span>)<br>install.packages(<span>"Seurat"</span>)<br><span>library</span>(Seurat)<br></code></pre><p data-tool="mdnice编辑器">这个SeuratObject 是Seurat的底层，所以必须一起弄：</p><ul data-tool="mdnice编辑器"><li><section>https://cran.r-project.org/web/packages/SeuratObject/index.html</section></li><li><section>https://cran.r-project.org/src/contrib/Archive/SeuratObject/</section></li></ul><p data-tool="mdnice编辑器">而且可以看到都是V4版本，都是它的旧版本</p><pre data-tool="mdnice编辑器"><span></span><code>[   ] SeuratObject_4.0.0.tar.gz 2021-01-15 09:50 146K  <br>[   ] SeuratObject_4.0.1.tar.gz 2021-05-08 06:50 145K  <br>[   ] SeuratObject_4.0.2.tar.gz 2021-06-09 11:20 145K  <br>[   ] SeuratObject_4.0.3.tar.gz 2021-11-10 23:20 148K  <br>[   ] SeuratObject_4.0.4.tar.gz 2021-11-23 21:00 149K  <br>[   ] SeuratObject_4.1.0.tar.gz 2022-05-01 16:40 184K  <br>[   ] SeuratObject_4.1.1.tar.gz 2022-08-29 21:50 190K  <br>[   ] SeuratObject_4.1.2.tar.gz 2022-09-20 18:30 190K  <br>[   ] SeuratObject_4.1.3.tar.gz 2022-11-07 19:50 185K  <br>[   ] SeuratObject_4.1.4.tar.gz 2023-09-27 00:30 186K  <br></code></pre><h3 data-tool="mdnice编辑器"><span></span>首先卸载你默认安装的V5版本的SeuratObject 和Seurat<span></span></h3><p data-tool="mdnice编辑器">记住：卸载之前一定要重启你的r语言或者rstudio，或者保证你的当前环境下没有加载SeuratObject 和Seurat。</p><p data-tool="mdnice编辑器">然后就可以简单的使用代码去卸载你默认安装的V5版本的SeuratObject 和Seurat：</p><pre data-tool="mdnice编辑器"><span></span><code>remove.packages(“SeuratObject”)<br>remove.packages(“Seurat”)<br></code></pre><p data-tool="mdnice编辑器">如果你有rstudio软件，也可以在界面自己操作鼠标去卸载两个包。</p><h3 data-tool="mdnice编辑器"><span></span>然后安装旧版本的SeuratObject 和Seurat<span></span></h3><ul data-tool="mdnice编辑器"><li><section>安装旧版本的SeuratObject 和Seurat需要首先拿到网页链接地址，然后从网页安装</section></li></ul><pre data-tool="mdnice编辑器"><span></span><code><span># 4 download from URL</span><br><br>packageurl &lt;- <span>"https://cran.r-project.org/src/contrib/Archive/SeuratObject/SeuratObject_4.1.4.tar.gz"</span> <br>install.packages(packageurl, repos=<span>NULL</span>, type=<span>"source"</span>)<br><br>packageurl &lt;- <span>"https://cran.r-project.org/src/contrib/Archive/Seurat/Seurat_4.4.0.tar.gz"</span> <br>install.packages(packageurl, repos=<span>NULL</span>, type=<span>"source"</span>)<br><br></code></pre><p data-tool="mdnice编辑器">上面的代码一定要记住顺序哦，而且， 如果他们安装的过程中有依赖包的缺失，就需要自己主动先安装那些缺失的包哈！</p><h3 data-tool="mdnice编辑器"><span></span>目前没有看到一定要用最新版Seurat的理由<span></span></h3><p data-tool="mdnice编辑器">本来呢以为这个  pseudobulking (<code>AggregateExpression()</code>)  是最新版才有的，详见：https://satijalab.org/seurat/articles/de_vignette</p><p data-tool="mdnice编辑器">实际上，我之前也分享了：<a href="https://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247517945&amp;idx=1&amp;sn=babf5948237875e5b8e8cf005d480b03&amp;scene=21#wechat_redirect" data-linktype="2">单细胞层面的表达量差异分析到底如何做</a>，提到了pseudobulks方法，而且给出来了多种代码实现方式，详见：<a href="https://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247526339&amp;idx=2&amp;sn=2038c2b6f9a57a0debd5483a61af3352&amp;scene=21#wechat_redirect" data-linktype="2">单细胞差异分析之pseudobulk的3种实现方法</a></p><p data-tool="mdnice编辑器">如果你确实感兴趣，也欢迎读一下官方文档：https://satijalab.org/seurat/articles/essential_commands</p><p data-tool="mdnice编辑器">我们就不代劳了，要不然到时候大家又批评我们是github文档翻译器。。。。</p><ul data-tool="mdnice编辑器"><li><section>Standard Seurat workflow</section></li><li><section>Seurat Object Data Access</section></li><ul><li><section>Cell, feature, and layer names</section></li><li><section>Identity class labels</section></li><li><section>Cell metadata</section></li><li><section>Expression data (stored as layers in Seurat v5)</section></li><li><section>Dimensional reductions</section></li><li><section>FetchData</section></li></ul><li><section>Subsetting and merging</section></li><ul><li><section>Subset Seurat objects</section></li><li><section>Split layers</section></li><li><section>Split objects</section></li><li><section>Merge objects (without integration)</section></li><li><section>Merge objects (with integration)</section></li></ul><li><section>Pseudobulk analysis</section></li><li><section>Visualization in Seurat</section></li><li><section>Multi-Assay Features</section></li><li><section>Additional resources</section></li></ul></section><h4 data-tool="mdnice编辑器">文末友情宣传</h4><p data-tool="mdnice编辑器">强烈建议你推荐给身边的<strong>博士后以及年轻生物学PI</strong>，多一点数据认知，让他们的科研上一个台阶：</p><ul data-tool="mdnice编辑器"><li><section><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247526014&amp;idx=1&amp;sn=44afb387fc49b89276386e5182db7bc9&amp;chksm=9b4b26c5ac3cafd35616b2fe9df7fea664e59d75e9970feb322a477beb222ac023f7daebb3dc&amp;scene=21#wechat_redirect" textvalue="生物信息学马拉松授课（买一得‍五）" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1">生物信息学马拉松授课（买一得五）</a> ，你的生物信息学入门课</section></li><li><section><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247524148&amp;idx=1&amp;sn=7806da6feb41a36493c519c1cfc1d3ac&amp;chksm=9b4bdf8fac3c569960369602f1ef26639cb366b250f233b2297d1f059471c0458335bfc0b829&amp;scene=21#wechat_redirect" textvalue="时隔5年，我们的生信技能树VIP学徒继续招生啦" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1">时隔5年，我们的生信技能树VIP学徒继续招生啦</a><br></section></li><li><section><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247522831&amp;idx=2&amp;sn=1744efdf428465425a145ff3a982198b&amp;chksm=9b4bdab4ac3c53a28fbecbbff4f254f470b54a7a20468bb753b295b930315e1ec45bcbabc10b&amp;scene=21#wechat_redirect" textvalue="144线程640Gb内存服务器共享一年‍仍然是仅需800" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1">144线程640Gb内存服务器共享一年仍然是仅需800</a></section></li><li><section><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247519765&amp;idx=1&amp;sn=ce5a8c8182f854c88043059f8c2cb9ff&amp;chksm=9b4bceaeac3c47b88c19941d43dbb1401f3a92206481a0afc41159927868199643f795d62a7e&amp;scene=21#wechat_redirect" textvalue="千呼万唤始出来的独享生物信息学云服务器" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1">千呼万唤始出来的独享生物信息学云服务器</a></section></li><li><section><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247519765&amp;idx=1&amp;sn=ce5a8c8182f854c88043059f8c2cb9ff&amp;chksm=9b4bceaeac3c47b88c19941d43dbb1401f3a92206481a0afc41159927868199643f795d62a7e&amp;scene=21#wechat_redirect" textvalue="千呼万唤始出来的独享生物信息学云服务器" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1"></a><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247524275&amp;idx=1&amp;sn=fa592ee29f636f34387491d0fceadd8e&amp;chksm=9b4bdf08ac3c561e0881974b3817beb0a0e514dc1a8df4c34c2b6653da6fa78e09acb03c70c2&amp;scene=21#wechat_redirect" textvalue="生信技能树知识整理实习生又又又开放申请啦" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1">生信技能树知识整理实习生又又又开放申请啦</a><span><strong>（不招了，谢谢）</strong></span></section></li><li><p><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247524432&amp;idx=1&amp;sn=5b33b0c6807a9e6939c332c58fabff89&amp;chksm=9b4b20ebac3ca9fdb3d8bfaf2bef5552f64eb70e7fae557cc7197fb1a23b3e8bc31b585bf829&amp;scene=21#wechat_redirect" textvalue="生信共享办公室出租" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1">生信共享办公室出租</a></p></li></ul><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/F03vWYgtS9JmQq4D4TyQWw",target="_blank" rel="noopener noreferrer">原文链接</a>
