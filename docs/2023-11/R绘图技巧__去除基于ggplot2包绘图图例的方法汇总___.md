---
title: "R绘图技巧——去除基于ggplot2包绘图图例的方法汇总！！！"
date: 2023-11-17T01:11:50Z
draft: ["false"]
tags: [
  "fetched",
  "科研后花园"
]
categories: ["Acdemic"]
---
R绘图技巧——去除基于ggplot2包绘图图例的方法汇总！！！ by 科研后花园
------
<div><section><p><img data-ratio="0.165625" data-src="https://mmbiz.qpic.cn/mmbiz_gif/W4pAicbaFuzXwGrEHHaiatjHJ3p0gYPMuyQibMKZJcfyXBticHcre13PFnxmO5xstr5Pz0cmqIO2DpHCFyUOnuTR8g/640?wx_fmt=gif" data-type="gif" data-w="640" src="https://mmbiz.qpic.cn/mmbiz_gif/W4pAicbaFuzXwGrEHHaiatjHJ3p0gYPMuyQibMKZJcfyXBticHcre13PFnxmO5xstr5Pz0cmqIO2DpHCFyUOnuTR8g/640?wx_fmt=gif"><span></span></p></section><section><mp-common-profile data-id="MzkzODM4NzQ1NQ==" data-pluginname="mpprofile" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0nc718ED9sAicaiaEia0mmkzpsjzyEWWDDIRbGeHIvsucukFjsTthP2qOvNBnc6qriaLnZ62mUoEAknxw/0?wx_fmt=png" data-nickname="科研后花园" data-alias="wzsBio" data-signature="主要发布内容包括：基于R、Python的数据可视化、科研网站介绍、科研小技巧、文献解读等，希望能帮助大家。" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><section><section><section><section><section> </section></section><section><img data-ratio="0.37037037037037035" data-type="png" data-src="https://mmbiz.qpic.cn/mmbiz_png/oMlX8Lll9Jiasa0U38meaG0sTZ1InnhOrI1J9WqGv6rKsdheFPrR2X7ibxia8LesyqGLvB7h2FH6KQzSBTZjvYJEQ/640" data-w="81" src="https://mmbiz.qpic.cn/mmbiz_png/oMlX8Lll9Jiasa0U38meaG0sTZ1InnhOrI1J9WqGv6rKsdheFPrR2X7ibxia8LesyqGLvB7h2FH6KQzSBTZjvYJEQ/640"></section></section><section><section><section>首先，我们基于ggplot2包及palmerpenguins包中的数据绘制一个简单带有图例的箱线图：<br></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><pre data-tool="mdnice编辑器"><span></span><code>rm(list=ls())<span>#clear Global Environment</span><br><br><span>#加载包</span><br>library(ggplot2) <span># Create Elegant Data Visualisations Using the Grammar of Graphics</span><br>library(palmerpenguins) <span># Palmer Archipelago (Antarctica) Penguin Data</span><br>library(tidyverse) <span># Easily Install and Load the 'Tidyverse'</span><br><br><span>#使用palmerpenguin包中的数据</span><br>df &lt;- penguins<br><span>#使用tidyverse包对数据进行处理</span><br>df &lt;- df %&gt;% <br>  drop_na()<br></code></pre></section><p><img data-galleryid="" data-ratio="0.5554106910039114" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrZUibEBndsbd7lLjHb9V38HdBvhw1807mYPUk4IYdHSCOia96ulaw1HSQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="767" src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrZUibEBndsbd7lLjHb9V38HdBvhw1807mYPUk4IYdHSCOia96ulaw1HSQ/640?wx_fmt=png&amp;from=appmsg"></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><pre data-tool="mdnice编辑器"><span></span><code><span>##绘制一个简单的箱线图</span><br>ggplot(df, aes(species, flipper_length_mm))+<br>  geom_boxplot(aes(fill = species))</code></pre></section><p><img data-galleryid="" data-ratio="0.7278731836195509" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrRITIFAf9DQUPFdPn7k8naWIEUKh7dHBDRcrgMO01Pd7ZXaAJj2wvrQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="757" src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrRITIFAf9DQUPFdPn7k8naWIEUKh7dHBDRcrgMO01Pd7ZXaAJj2wvrQ/640?wx_fmt=png&amp;from=appmsg"></p><p><br></p><p><span><strong>1、手动删除：</strong></span></p><section>将图片导出为PDF等矢量格式图形后，将其导入<span><strong>AI、PS</strong></span>等软件进行手动删除，这个可能也是最直接最有效的方法。<br></section><section><br></section><section><span><strong>2、在绘图函数中使用show.legend参数进行去除：</strong></span></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><pre data-tool="mdnice编辑器"><span></span><code>ggplot(df, aes(species, flipper_length_mm))+<br>  geom_boxplot(aes(fill = species), show.legend = F)<br></code></pre></section><p><img data-galleryid="" data-ratio="0.9466437177280551" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKr8GrU9SeaI5ux7jMiaVLCzfrynibm5DqD6YDoXT1jHiajlYabOKHRccib4Q/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="581" src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKr8GrU9SeaI5ux7jMiaVLCzfrynibm5DqD6YDoXT1jHiajlYabOKHRccib4Q/640?wx_fmt=png&amp;from=appmsg"></p><section><br></section><section>当然，可以通过设置更复杂的图例测试其效果：<br></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><pre data-tool="mdnice编辑器"><span></span><code>p1 &lt;- ggplot(df, aes(species, flipper_length_mm))+<br>  geom_boxplot(aes(fill = species), show.legend = F)+<br>  geom_jitter(aes(size=flipper_length_mm,shape=species),color=<span>"black"</span>,alpha=0.4)<br>p2 &lt;- ggplot(df, aes(species, flipper_length_mm))+<br>  geom_boxplot(aes(fill = species))+<br>  geom_jitter(aes(size=flipper_length_mm,shape=species),color=<span>"black"</span>,alpha=0.4, show.legend = F)<br>cowplot::plot_grid(p1,p2,ncol = 1)<br></code></pre></section><p><img data-galleryid="" data-ratio="1.3173076923076923" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKr8E8wcqEmn59VFuibcvdibuackVzjPFKib7GvC56d4zxpIhmZV60uWbpCA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="520" src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKr8E8wcqEmn59VFuibcvdibuackVzjPFKib7GvC56d4zxpIhmZV60uWbpCA/640?wx_fmt=png&amp;from=appmsg"></p><section>通过以上测试效果可以看到，这种方法可以去除<strong>特定图例</strong>！<br></section><section><br></section><section><span><strong>3、在主题设置中加入legend.position = "none"参数：</strong></span></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><pre data-tool="mdnice编辑器"><span></span><code>p3 &lt;- ggplot(df, aes(species, flipper_length_mm))+<br>  geom_boxplot(aes(fill = species))+<br>  geom_jitter(aes(size=flipper_length_mm,fill=species),color=<span>"black"</span>,shape=21,alpha=0.6)<br>p4 &lt;- p3+<br>  theme(legend.position = <span>"none"</span>)<br>cowplot::plot_grid(p3,p4,ncol = 2)<br></code></pre></section><p><img data-galleryid="" data-ratio="0.4346846846846847" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrlib56icn7Pt5fMU4b0flH5iaTX4UduYgRw6CLChw5SkIiartYscw7zJCRw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="888" src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrlib56icn7Pt5fMU4b0flH5iaTX4UduYgRw6CLChw5SkIiartYscw7zJCRw/640?wx_fmt=png&amp;from=appmsg"></p><section>但是，通过这种方式实现的去除图例方式是<strong>移除图中所有图例</strong>！</section><section><br></section><section><span><strong>4、通过guides()函数设置相应需要去除图例的参数为"none"即可：</strong></span><br></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><pre data-tool="mdnice编辑器"><span></span><code>p5 &lt;- p3+<br>  guides(fill=<span>"none"</span>)<br>p6 &lt;- p3+<br>  guides(size=<span>"none"</span>)<br>cowplot::plot_grid(p5,p6,ncol = 1)<br></code></pre></section><p><img data-galleryid="" data-ratio="1.311740890688259" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrXriaGsdSN83WhGwWADsIWQueNaibicBrSykmPiaaPzWOt4P8emS0oldx5w/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="494" src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrXriaGsdSN83WhGwWADsIWQueNaibicBrSykmPiaaPzWOt4P8emS0oldx5w/640?wx_fmt=png&amp;from=appmsg"></p><section>此方法亦可去除其中部分图例！！！</section><section><br></section><section><span><strong>5、通过scale_fill_discrete等函数去除相应图例：</strong></span></section><section>去除填充色图例（分类变量）：<br></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><pre data-tool="mdnice编辑器"><span></span><code>p3+scale_fill_discrete(guide=<span>"none"</span>)<br></code></pre></section><p><img data-galleryid="" data-ratio="0.7465857359635811" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKr6HGNBFaNMg3w2mSDKE7iamy8OPchUamytB8pb7QrvWcs5XibGGGpmT9A/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="659" src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKr6HGNBFaNMg3w2mSDKE7iamy8OPchUamytB8pb7QrvWcs5XibGGGpmT9A/640?wx_fmt=png&amp;from=appmsg"></p><section>去除size给予的图例（连续变量）：</section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><pre data-tool="mdnice编辑器"><span></span><code>p3+scale_size_continuous(guide=<span>"none"</span>)<br></code></pre></section><p><img data-galleryid="" data-ratio="0.7469512195121951" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrPVDtoGLI4cm3kamIkFsHQ5ribm2npKB2bSjibAtYpicZkJME9knkwSExA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="656" src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrPVDtoGLI4cm3kamIkFsHQ5ribm2npKB2bSjibAtYpicZkJME9knkwSExA/640?wx_fmt=png&amp;from=appmsg"></p><p><br></p><p><span><strong>6、通过ggeasy包中的easy_remove_legend()函数去除所有或者相应图例：</strong></span></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><pre data-tool="mdnice编辑器"><span></span><code><span># install.packages("ggeasy")</span><br>library(ggeasy)<br>p7 &lt;- p3+easy_remove_legend()<br>p8 &lt;- p3+easy_remove_legend(fill)<br>p9 &lt;- p3+easy_remove_legend(size)<br>p10 &lt;- p3+easy_remove_legend(size,fill)<br>cowplot::plot_grid(p7,p8,p9,p10,ncol = 2)<br></code></pre></section><p><img data-galleryid="" data-ratio="0.8165266106442577" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrBj5LvNWyR30D0sgIebIVlYL3276IZh5icBIVWw52Flp5Ns2J3pyy1tA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="714" src="https://mmbiz.qpic.cn/mmbiz_png/RB50ficWibY0mbgcxKJLS9Ae42ibHswfXKrBj5LvNWyR30D0sgIebIVlYL3276IZh5icBIVWw52Flp5Ns2J3pyy1tA/640?wx_fmt=png&amp;from=appmsg"></p><p><br></p><p><span><em>参考：https://datavizpyr.com/multiple-ways-to-remove-legend-in-ggplot2/</em></span><br></p></section></section><section><section><img data-ratio="0.37037037037037035" data-src="https://mmbiz.qpic.cn/mmbiz_png/oMlX8Lll9Jiasa0U38meaG0sTZ1InnhOrI1J9WqGv6rKsdheFPrR2X7ibxia8LesyqGLvB7h2FH6KQzSBTZjvYJEQ/640" data-type="png" data-w="81" src="https://mmbiz.qpic.cn/mmbiz_png/oMlX8Lll9Jiasa0U38meaG0sTZ1InnhOrI1J9WqGv6rKsdheFPrR2X7ibxia8LesyqGLvB7h2FH6KQzSBTZjvYJEQ/640"></section><section><section> </section></section></section></section></section><section><section>更多推荐</section><a href="https://mp.weixin.qq.com/s?__biz=MzkzODM4NzQ1NQ==&amp;mid=2247489290&amp;idx=1&amp;sn=b301b075f73b6ee1cfba5cfce00ffc3b&amp;chksm=c281a59af5f62c8c40f181838f03c048a2df3b3b76bdb171552f7f6f98ab65b0a658d71ae22b&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2"><section><span><section><br></section></span><section>R绘图模板—弦图（Chord）的绘制！！！</section></section></a><a href="https://mp.weixin.qq.com/s?__biz=MzkzODM4NzQ1NQ==&amp;mid=2247489290&amp;idx=2&amp;sn=cdb5ba6bcca67db62aee86f8fd32fe80&amp;chksm=c281a59af5f62c8ce9300587e13dcad2306b8927753dc94f4bb0f4a269ce99371b7ab6ad2f69&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2"><section><span><section><br></section></span><section>扩增子测序数据分析还不会？小编整理的全套R语言代码助您轻松解决问题！</section></section></a><a href="https://mp.weixin.qq.com/s?__biz=MzkzODM4NzQ1NQ==&amp;mid=2247489290&amp;idx=3&amp;sn=aa22565a4eaf294073f570ea6c246ee8&amp;chksm=c281a59af5f62c8c65ed147990f3d35f9c9dc60d2fae4587216e282f0c05c8769facd372da8e&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2"><section><span><section><br></section></span><section>R绘图模板源代码获取！</section></section></a><a href="https://mp.weixin.qq.com/s?__biz=MzkzODM4NzQ1NQ==&amp;mid=2247489159&amp;idx=1&amp;sn=e96a4dab71b6b864cb213ddb679d40cf&amp;chksm=c281a417f5f62d01ca4b7e0d8d6e65a4267ef7a0270ca8c215604d20a28c78154cf667b79636&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2"><section><span><section><br></section></span><section>R绘图模板—小提琴图/添加数据点/半小提琴图/雨云图！！！</section></section></a><a href="https://mp.weixin.qq.com/s?__biz=MzkzODM4NzQ1NQ==&amp;mid=2247489022&amp;idx=1&amp;sn=096602c76732830cef769009f0586f58&amp;chksm=c281a76ef5f62e78bfb23bca7d8a73e3d9d31b8596bd2c4407055a2b1165d888503ab075ed1d&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2"><section><span><section><br></section></span><section>R可视化——一文带你打通ggplot2个性化绘制柱状图（条形图）！！！</section></section></a><a href="https://mp.weixin.qq.com/s?__biz=MzkzODM4NzQ1NQ==&amp;mid=2247488813&amp;idx=1&amp;sn=256ecd7068b5ef752b88fef75a667fd5&amp;chksm=c281a7bdf5f62eabeafc5ca2967a3f58e326fcbb578c5aebd350356e5dc53c488302f4b600dd&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2"><section><span><section><br></section></span><section>R可视化——基于MicrobiomeStat包进行微生物组数据分析（更新版）！！！</section></section></a><a href="https://mp.weixin.qq.com/s?__biz=MzkzODM4NzQ1NQ==&amp;mid=2247488752&amp;idx=1&amp;sn=683db01452a363d8d4a9ac244b3bad9d&amp;chksm=c281a660f5f62f76a51b264564b1a5ff2deae94c5598332b31290992b49c812d2326982a1821&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2"><section><span><section><br></section></span><section>R绘图模板——两幅图如何通过设置双x轴双y轴将其显示在一张图中（长文警告）！！！</section></section></a><a href="https://mp.weixin.qq.com/s?__biz=MzkzODM4NzQ1NQ==&amp;mid=2247488671&amp;idx=1&amp;sn=ebb01f4f1a2002adfae3a0397fffa18d&amp;chksm=c281a60ff5f62f1958e56982f90f14d1ba4d195b6071a1c2e5386d7daa3cd0f583395860b84a&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2"><section><span><section><br></section></span><section>R绘图模板——多组火山图的绘制！！！</section></section></a><section><span><section><a href="https://mp.weixin.qq.com/s?__biz=MzkzODM4NzQ1NQ==&amp;mid=2247488628&amp;idx=1&amp;sn=dc5abeb986ce2b84ab2aac4bda99172b&amp;chksm=c281a6e4f5f62ff2d9268c317cc4cb2c19bf74ad7b9b2bdef9c869a173d07b7b7861a4b2a1db&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2"><br></a></section></span><section><a href="https://mp.weixin.qq.com/s?__biz=MzkzODM4NzQ1NQ==&amp;mid=2247488628&amp;idx=1&amp;sn=dc5abeb986ce2b84ab2aac4bda99172b&amp;chksm=c281a6e4f5f62ff2d9268c317cc4cb2c19bf74ad7b9b2bdef9c869a173d07b7b7861a4b2a1db&amp;scene=21#wechat_redirect" target="_blank" data-linktype="2">R绘图模板——同一分组散点图根据条件添加不同类型拟合曲线并设置拟合曲线！！！</a><span></span></section></section></section><p><mp-style-type data-value="10000"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/S3cy-e8--uwsNev2jbPwVg",target="_blank" rel="noopener noreferrer">原文链接</a>
