---
title: "文章发表：ggbreak让你更好地利用画图空间"
date: 2023-11-23T03:45:06Z
draft: ["false"]
tags: [
  "fetched",
  "YuLabSMU"
]
categories: ["Acdemic"]
---
文章发表：ggbreak让你更好地利用画图空间 by YuLabSMU
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" data-mpa-powered-by="yiban.io"><p data-tool="mdnice编辑器">五月份参加答辩，顺道又介绍了一下<code>ggtree</code>的工作，在会上被问到如果树有分支特别长的话，能不能截断，我回答可以，但麻烦点。当我回到座位上的时候，我就在想，应该有可以不麻烦的手段，而且这似乎很重要，因为我们吐槽截断坐标轴的时候，总是说取个log就行了，但不见得是log normal分布啊，而且这个树分支的实例让我想到，outliers就是outliers，而且是有意义的，这时候截断是很好的可视化方式。带着这个问题，第二天晚上带孩子的时候，就想到了完全兼容<code>ggplot2</code>的方式，<a href="https://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247490747&amp;idx=1&amp;sn=1e426e4c2e3b802036fe99b7f83fa5ce&amp;chksm=ec43adfcdb3424ea541e63d01317beadb6ac02d4d285dbaa74433d5f871d66a65095ceb8c594&amp;token=1099050631&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">发了条公众号，看看大家的需求</a><img data-fileid="100007701" data-ratio="1" data-src="https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iaajvl7fD4ZCicMcjhXMp1v6UY7KnGQWtMMalMo7qUlPWMqMQb2hiaZd7x5xPzCoEianI6BWJaFfqW9aA/640?wx_fmt=png" data-type="png" data-w="64" src="https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iaajvl7fD4ZCicMcjhXMp1v6UY7KnGQWtMMalMo7qUlPWMqMQb2hiaZd7x5xPzCoEianI6BWJaFfqW9aA/640?wx_fmt=png">，第二天早上开搞，<a href="https://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247490751&amp;idx=1&amp;sn=86b47b25634c5ddcd2a5bf09cfefe473&amp;chksm=ec43adf8db3424ee2a9d85f576e7edb1da506c796c40d0df0382b4835ce3447e7abe78cab91b&amp;token=1099050631&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">一下子就实现了，兼容ggplot2，可随意加图层</a><span><img data-fileid="100007702" data-ratio="1" data-src="https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iaajvl7fD4ZCicMcjhXMp1v6UY7KnGQWtMMalMo7qUlPWMqMQb2hiaZd7x5xPzCoEianI6BWJaFfqW9aA/640?wx_fmt=png" data-type="png" data-w="64" src="https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iaajvl7fD4ZCicMcjhXMp1v6UY7KnGQWtMMalMo7qUlPWMqMQb2hiaZd7x5xPzCoEianI6BWJaFfqW9aA/640?wx_fmt=png"></span>。</p><p data-tool="mdnice编辑器">接下来就是学生上场填坑，搞搞细节，并且我提出来要截断长图，以及要切图以放大或缩小局部，一一并实现，<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247490820&amp;idx=1&amp;sn=653ee5971fa79a718867ab0bf5e33a31&amp;chksm=ec43ac43db3425550af196c3b4681696773fca8143333e36286333a6d62cb86dbbbc04f34ef9&amp;scene=21#wechat_redirect" textvalue="又过了两周，上线CRAN" data-itemshowtype="0" tab="innerlink" data-linktype="2"><span><strong>又过了两周，上线CRAN</strong></span></a><span><span><img data-fileid="100007703" data-ratio="1" data-src="https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iaajvl7fD4ZCicMcjhXMp1v6UY7KnGQWtMMalMo7qUlPWMqMQb2hiaZd7x5xPzCoEianI6BWJaFfqW9aA/640?wx_fmt=png" data-type="png" data-w="64" src="https://mmbiz.qpic.cn/mmbiz_png/b96CibCt70iaajvl7fD4ZCicMcjhXMp1v6UY7KnGQWtMMalMo7qUlPWMqMQb2hiaZd7x5xPzCoEianI6BWJaFfqW9aA/640?wx_fmt=png"></span></span>。</p><p data-tool="mdnice编辑器">放了两个月，8月份让学生写文章，9月份投出去，10月份接收，11月全文online，从始至终，这是目前我们团队发得最快的一篇文章，当然还能够更快一些，没破我个人的记录。</p><p data-tool="mdnice编辑器">学生写的文章，在里面用了4个例子，这几个例子找得很好，能够很好的诠释这个包的功能，以及它对于生物学数据解析上的辅助。</p><h2 data-tool="mdnice编辑器"><span></span>例子一：截长图</h2><p data-tool="mdnice编辑器">长图是不适合于在纸上打印的，那么截断它，画成几行，不就行了。</p><p data-tool="mdnice编辑器"><img data-fileid="100007687" data-ratio="1.2352941176470589" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKXjkyfOGOZiaRFqYrfd5qP0zFLKAKQu8feM1Xic1V5FtoIhOnG6bQGRWw/640?wx_fmt=png" data-type="png" data-w="748" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKXjkyfOGOZiaRFqYrfd5qP0zFLKAKQu8feM1Xic1V5FtoIhOnG6bQGRWw/640?wx_fmt=png"></p><h2 data-tool="mdnice编辑器"><span></span>例子二：截坐标</h2><p data-tool="mdnice编辑器">有outliers，看不清局部，截个坐标，就解决了。</p><p data-tool="mdnice编辑器"><img data-fileid="100007688" data-ratio="0.4932330827067669" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrK6BsaqPCkYZia9nSL4EfxJV1qDko3L3zny5LibMqBneicHklyKRfjHyLIA/640?wx_fmt=png" data-type="png" data-w="1330" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrK6BsaqPCkYZia9nSL4EfxJV1qDko3L3zny5LibMqBneicHklyKRfjHyLIA/640?wx_fmt=png"></p><h2 data-tool="mdnice编辑器"><span></span>例子三：局部放大</h2><p data-tool="mdnice编辑器">诸如曼哈顿图，火山图这些，我们关注的就是那些outliers，能不能放大局部？起码你标记起来方便多了。</p><p data-tool="mdnice编辑器"><img data-fileid="100007689" data-ratio="0.7540056550424128" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKVkdaGBQWFoicrwv8I7I9aN1cicSRzIRKuMkB4aWLJaGoY8BK18njoogQ/640?wx_fmt=png" data-type="png" data-w="1061" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKVkdaGBQWFoicrwv8I7I9aN1cicSRzIRKuMkB4aWLJaGoY8BK18njoogQ/640?wx_fmt=png"></p><h2 data-tool="mdnice编辑器"><span></span>例子四：还是截坐标</h2><p data-tool="mdnice编辑器">来个大家最常见的柱状图，顺道和log转换的比较一下。因为例子都比较简单，所以在此处顺道来个，截断后，随意加图层的实例。</p><p data-tool="mdnice编辑器"><img data-fileid="100007690" data-ratio="0.5301204819277109" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKeibPEs4OyPU6LIPds8BOfwVv3B1R8NsXuefaoicGssRpJZvGnK3QIE4Q/640?wx_fmt=png" data-type="png" data-w="1328" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKeibPEs4OyPU6LIPds8BOfwVv3B1R8NsXuefaoicGssRpJZvGnK3QIE4Q/640?wx_fmt=png"></p><h2 data-tool="mdnice编辑器"><span></span>功能和代码</h2><p data-tool="mdnice编辑器"><img data-fileid="100007691" data-ratio="0.3602347762289068" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKMCgnkPVicBYYHQCoeQTpewRhogueJb5pvHQ7lEfXhJ4oibeicp0R8HUqA/640?wx_fmt=png" data-type="png" data-w="1363" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKMCgnkPVicBYYHQCoeQTpewRhogueJb5pvHQ7lEfXhJ4oibeicp0R8HUqA/640?wx_fmt=png"></p><p data-tool="mdnice编辑器">功能就是几个<code>scale</code>函数，代码就是随意使用加号给<code>+</code>上去。</p><p data-tool="mdnice编辑器"><img data-fileid="100007692" data-ratio="0.721102863202545" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKj4QVhXwFZLibbJ9SZvcSHepJdyhyaqODicwOVGvMORnNlzlotNibKkltw/640?wx_fmt=png" data-type="png" data-w="943" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKj4QVhXwFZLibbJ9SZvcSHepJdyhyaqODicwOVGvMORnNlzlotNibKkltw/640?wx_fmt=png"></p><p data-tool="mdnice编辑器">最初学生给文章取的题目是优雅地设置坐标轴截断之类的，文章的内容上前后都偏向于讲outliers，没有把截长图和局部放大很好地拢在一起，</p><p data-tool="mdnice编辑器">我改后的题目就变成：</p><p data-tool="mdnice编辑器"><img data-fileid="100007693" data-ratio="0.18973418881759854" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKxEtfC8CIPWLwEc5coUsjwicbT6ZZHE5ia9f9FYzPGGkIvuRRoG2rsu1A/640?wx_fmt=png" data-type="png" data-w="1091" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4lBjFnP9biajKPBqn5GFQfrKxEtfC8CIPWLwEc5coUsjwicbT6ZZHE5ia9f9FYzPGGkIvuRRoG2rsu1A/640?wx_fmt=png"></p><p data-tool="mdnice编辑器">而摘要里的这句话，基本上就是我的主旨：</p><blockquote data-tool="mdnice编辑器"><p>The ggbreak package increases the available visual space for a better presentation of the data and detailed annotation, thus improves our ability to interpret the data.</p></blockquote><p data-tool="mdnice编辑器">以这样的出发点来写，把所有东西拢在一起，且把我们做的事情给拔高了一下。</p><p data-tool="mdnice编辑器">点击阅读原文，直达文章全文！</p></section></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/1pVrOdUr5YzO-xBi5rndwQ",target="_blank" rel="noopener noreferrer">原文链接</a>
