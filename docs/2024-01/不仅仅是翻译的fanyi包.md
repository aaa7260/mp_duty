---
title: "不仅仅是翻译的fanyi包"
date: 2024-01-10T00:34:11Z
draft: ["false"]
tags: [
  "fetched",
  "YuLabSMU"
]
categories: ["Acdemic"]
---
不仅仅是翻译的fanyi包 by YuLabSMU
------
<div><p data-mpa-powered-by="yiban.io"><img data-imgfileid="100010450" data-ratio="0.8017309205350118" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLiafIz1bvymzX14HrPh0dMQicN3nV3eOgptRNKmz3fL9z0xv3Nwh9UXaw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1271" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLiafIz1bvymzX14HrPh0dMQicN3nV3eOgptRNKmz3fL9z0xv3Nwh9UXaw/640?wx_fmt=png&amp;from=appmsg"></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><p data-tool="mdnice编辑器">最新的版本已经上线，所以大家可以通过下面的指令来安装了：</p><pre data-tool="mdnice编辑器"><span></span><code>install.packages(<span>"fanyi"</span>)<br></code></pre><h2 data-tool="mdnice编辑器"><span></span><span>这个包支持了哪些翻译服务？</span><span></span></h2><ul data-tool="mdnice编辑器"><li><section>百度翻译</section></li><li><section>必应翻译</section></li><li><section>有道智云</section></li><li><section>火山引擎</section></li><li><section>彩云小译</section></li><li><section>腾讯翻译君</section></li><li><section>智谱清言</section></li></ul><p data-tool="mdnice编辑器">其中<code>智谱清言</code>就是<a href="https://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247494097&amp;idx=1&amp;sn=dd3ea0edf59f5912a97893b913ed7bf4&amp;chksm=ec405896db37d18059fcaad73e549d6ad2ec88a9881dda3ed98ade5099c678ba27f784d905d3&amp;scene=21#wechat_redirect" data-linktype="2">基于大语言模型的</a>，后续我们可能会探索一下，在这个包里是否有可能利用大语言模型做点其它的事情，而不仅仅是翻译。</p><h2 data-tool="mdnice编辑器"><span></span><span>这个包怎么工作的？</span><span></span></h2><p data-tool="mdnice编辑器">你首先要注册并开通这些服务，拿到密匙这些信息，通过<code>set_translate_option()</code>给进去，然后就可以用了。每个翻译服务，事实上我们都有对应的函数，可以调用。如百度的就是<code>baidu_translate()</code>而必应的就是<code>bing_translate()</code>，所以不会混。然后我们还有一个函数是<code>translate()</code>，它的翻译可以是任何一个支持的服务，到底用哪个，取决于当前的设定，而设定是<code>set_translate_source()</code>函数来指定的。</p><p data-tool="mdnice编辑器">对于每一个翻译服务，我们在包的主页，https://github.com/YuLab-SMU/fanyi，的README里，都有详细的介绍：</p></section><p><img data-galleryid="" data-imgfileid="100010452" data-ratio="0.8535353535353535" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLaToJkYZ6VibqiaJPa1bwfx0cd0BOTmhFcXC54NMRPnSbL8frB0EQKb4w/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1188" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLaToJkYZ6VibqiaJPa1bwfx0cd0BOTmhFcXC54NMRPnSbL8frB0EQKb4w/640?wx_fmt=png&amp;from=appmsg"></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h2 data-tool="mdnice编辑器"><span></span><span>翻译实例</span><span></span></h2></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(fanyi)<br><br><span>##</span><br><span>## run `set_translate_option()` to setup</span><br><span>##</span><br><br>text &lt;- <span>'我都不知道做人该怎么办，总之报纸写啥就信啥，电视演啥我就看啥。'</span><br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>translate(text, from=<span>'zh'</span>, to=<span>'en'</span>)<br></code></pre><blockquote data-tool="mdnice编辑器"><p>I don’t even know what to do as a person. In short, I believe whateveris written in the newspaper and watch whatever is shown on TV.</p></blockquote><pre data-tool="mdnice编辑器"><span></span><code>translate(text, from=<span>'zh'</span>, to=<span>'th'</span>)<br></code></pre><blockquote data-tool="mdnice编辑器"><p>ผมไม่รู้ว่าการเป็นมนุษย์ควรทําอย่างไร สรุปแล้วหนังสือพิมพ์เขียนอะไรก็เชื่ออย่างนั้นทีวีเล่นอะไรก็อ่านอย่างนั้น</p></blockquote><pre data-tool="mdnice编辑器"><span></span><code>translate(text, from=<span>'zh'</span>, to=<span>'jp'</span>)<br></code></pre><blockquote data-tool="mdnice编辑器"><p>私は人間としてどうすればいいのか分からないが、とにかく新聞は何を書いても何を信じても、テレビは何を演じても私は何を見てもいい。</p></blockquote><pre data-tool="mdnice编辑器"><span></span><code>translate(text, from=<span>'zh'</span>, to=<span>'fra'</span>)<br></code></pre><blockquote data-tool="mdnice编辑器"><p>Je ne sais pas quoi faire en tant que personne, je crois ce que lesjournaux écrivent, je regarde ce que la télévision fait.</p></blockquote></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h2 data-tool="mdnice编辑器"><span></span></h2><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h2 data-tool="mdnice编辑器"><span></span><span>翻译还能嵌套</span><span></span></h2><p data-tool="mdnice编辑器">翻译有时候也不尽如意的，如果某一个翻译器翻A语言到B语言比较好，而另一个翻译器翻译B语言到C语言比较好，它俩结合一下，A-&gt;B-&gt;C，比单独用这两翻译器A-C要好的话，你能结合起来用。</p><figure data-tool="mdnice编辑器"><img data-imgfileid="100010462" data-ratio="0.29324324324324325" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLMOGX3jCNHVj5x8T7uqaNOJQRkwuP7MNnFMy7jd9daS7TKoj24jtmFQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="740" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLMOGX3jCNHVj5x8T7uqaNOJQRkwuP7MNnFMy7jd9daS7TKoj24jtmFQ/640?wx_fmt=png&amp;from=appmsg"></figure><blockquote data-tool="mdnice编辑器"><p>此处只是演示，并不是说这样更好，我反正看不懂法文。</p></blockquote></section><h2 data-tool="mdnice编辑器"><span>我们还有小工具</span><span></span></h2><h3 data-tool="mdnice编辑器"><span></span><span>立省30万的小词典</span><span></span></h3><p data-tool="mdnice编辑器">为什么省30万，<a href="https://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247493909&amp;idx=1&amp;sn=c2a07551b029b42ca5b922eb94a52ef4&amp;chksm=ec405852db37d144839137bfdea0bf0b75d5619102d4c3d0da69dff500ee552de43b140ad07c&amp;token=490791501&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">猛击此处</a>。</p><figure data-tool="mdnice编辑器"><img data-imgfileid="100010460" data-ratio="0.2680965147453083" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLicf8MbkgAY78YfUrnpiauSl1P9fIOj7XYIFdEYLQE29Mbg9coJwGmRCA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="746" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLicf8MbkgAY78YfUrnpiauSl1P9fIOj7XYIFdEYLQE29Mbg9coJwGmRCA/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span>翻译ggplot图</span><span></span></h3><p data-tool="mdnice编辑器">来一段我们熟悉的富集分析，出来的图，我们用不同语言翻译一下<code>y</code>轴：</p><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(DOSE)<br><span>library</span>(enrichplot)<br>data(geneList)<br>de &lt;- names(geneList)[<span>1</span>:<span>200</span>]<br>x &lt;- enrichDO(de)<br>p &lt;- dotplot(x)<br>p2 &lt;- translate_ggplot(p, axis=<span>'y'</span>)<br>p3 &lt;- translate_ggplot(p, axis=<span>'y'</span>, to=<span>'kor'</span>)<br>p4 &lt;- translate_ggplot(p, axis=<span>'y'</span>, to=<span>'ara'</span>)<br>aplot::plot_list(English = p, Chinese = p2, <br>                Korean = p3, Arabic = p4, ncol=<span>2</span>)<br></code></pre></section><p><img data-imgfileid="100010461" data-ratio="0.9" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLpq7iaMg0o1Kl9ByBvDltthmQD4MRKLx75fibTgicWxTYgg6V4Cq0k55oQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="960" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLpq7iaMg0o1Kl9ByBvDltthmQD4MRKLx75fibTgicWxTYgg6V4Cq0k55oQ/640?wx_fmt=png&amp;from=appmsg"></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h2 data-tool="mdnice编辑器"><span></span><span>翻译基因信息</span><span></span></h2><p data-tool="mdnice编辑器">这是生物坑里小伙伴的最爱了，也就是我们说的，赋能毕业论文写作。一方面是翻译各种文本，另一方面是你的基因信息，可能不需要花时间查找整理了，直接抓取，批量翻译。</p><p data-tool="mdnice编辑器">下面是实例：</p><pre data-tool="mdnice编辑器"><span></span><code>symbol &lt;- c(<span>"CCR7"</span>, <span>"CD3E"</span>)<br>gene &lt;- clusterProfiler::bitr(symbol, <br>            fromType = <span>'SYMBOL'</span>, <br>            toType = <span>'ENTREZID'</span>, <br>            OrgDb = <span>'org.Hs.eg.db'</span>)<br><br>gene<br></code></pre><pre data-tool="mdnice编辑器"><code>##   SYMBOL ENTREZID<br>## 1   CCR7     1236<br>## 2   CD3E      916<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>res &lt;- gene_summary(gene$ENTREZID)<br>names(res)<br></code></pre><pre data-tool="mdnice编辑器"><code>## [1] "uid"         "name"        "description" "summary"<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>d &lt;- data.frame(desc=res$description,<br>              desc2=translate(res$description))<br>d<br></code></pre><pre data-tool="mdnice编辑器"><code>##                                             desc                     desc2<br>## 1                 C-C motif chemokine receptor 7      C-C基序趋化因子受体7<br>## 2 CD3 epsilon subunit of T-cell receptor complex T细胞受体复合体的CD3ε亚基<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>res$summary<br></code></pre><blockquote data-tool="mdnice编辑器"><p>[1] The protein encoded by this gene is a member of the Gprotein-coupled receptor family. This receptor was identified as agene induced by the Epstein-Barr virus (EBV), and is thought to be amediator of EBV effects on B lymphocytes. This receptor is expressedin various lymphoid tissues and activates B and T lymphocytes. It hasbeen shown to control the migration of memory T cells to inflamedtissues, as well as stimulate dendritic cell maturation. The chemokine(C-C motif) ligand 19 (CCL19/ECL) has been reported to be a specificligand of this receptor. Signals mediated by this receptor regulate Tcell homeostasis in lymph nodes, and may also function in theactivation and polarization of T cells, and in chronic inflammationpathogenesis. Alternative splicing of this gene results in multipletranscript variants. [provided by RefSeq, Sep 2014]</p></blockquote><blockquote data-tool="mdnice编辑器"><p>[2] The protein encoded by this gene is the CD3-epsilon polypeptide,which together with CD3-gamma, -delta and -zeta, and the T-cellreceptor alpha/beta and gamma/delta heterodimers, forms the T-cellreceptor-CD3 complex. This complex plays an important role in couplingantigen recognition to several intracellular signal-transductionpathways. The genes encoding the epsilon, gamma and delta polypeptidesare located in the same cluster on chromosome 11. The epsilonpolypeptide plays an essential role in T-cell development. Defects inthis gene cause immunodeficiency. This gene has also been linked to asusceptibility to type I diabetes in women. [provided by RefSeq, Jul2008]</p></blockquote><pre data-tool="mdnice编辑器"><span></span><code>translate(res$summary)<br></code></pre><blockquote data-tool="mdnice编辑器"><p>[1]该基因编码的蛋白质是G蛋白偶联受体家族的成员。该受体被鉴定为EB病毒（EBV）诱导的基因，被认为是EB病毒对B淋巴细胞影响的媒介。这种受体在各种淋巴组织中表达，并激活B和T淋巴细胞。它已被证明可以控制记忆T细胞向炎症组织的迁移，并刺激树突细胞成熟。据报道，趋化因子（C-C基序）配体19（CCL19/ECL）是该受体的特异性配体。该受体介导的信号调节淋巴结中的T细胞稳态，也可能在T细胞的激活和极化以及慢性炎症发病机制中发挥作用。该基因的选择性剪接导致多种转录物变体。【RefSeq提供，2014年9月】</p></blockquote><blockquote data-tool="mdnice编辑器"><p>[2]该基因编码的蛋白质是CD3ε多肽，其与CD3γ、-Δ和-ζ以及T细胞受体α/β和γ/Δ异二聚体一起形成T细胞受体-CD3复合物。这种复合物在将抗原识别与几种细胞内信号转导途径偶联方面起着重要作用。编码ε、γ和δ多肽的基因位于11号染色体上的同一簇中。ε多肽在T细胞发育中起着重要作用。这种基因的缺陷会导致免疫缺陷。该基因也与女性易患I型糖尿病有关。【RefSeq提供，2008年7月】</p></blockquote></section><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h2 data-tool="mdnice编辑器"><span></span><span>文章实例怎么说？</span><span></span></h2><p data-tool="mdnice编辑器">我们写了个小文章，搞了点小例子。</p></section><p><img data-galleryid="" data-imgfileid="100010469" data-ratio="0.8196544276457883" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLoulnL5cFDiaVPPKgl45k7zU26rsDsJL5SKiaXRCCWtPeRGTHt7jZfULQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="926" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLoulnL5cFDiaVPPKgl45k7zU26rsDsJL5SKiaXRCCWtPeRGTHt7jZfULQ/640?wx_fmt=png&amp;from=appmsg"></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span>单细胞的marker genes</span><span></span></h3><p data-tool="mdnice编辑器">把不同cell types的marker genes爬回来信息，和检验的结果，像什么fold change, p.adjust啥的，全整一张表输出出来，这不就节省查信息的时间了，当然这个基因信息，还能翻成中文。</p></section><p><img data-imgfileid="100010470" data-ratio="0.70703125" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLhVRPeiagJ6pIicZLHJydiaTw48X5XVAQoCWP38q0SwNemicZFcK1rJym4w/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1280" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLhVRPeiagJ6pIicZLHJydiaTw48X5XVAQoCWP38q0SwNemicZFcK1rJym4w/640?wx_fmt=png&amp;from=appmsg"></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span>基因信息各种能用</span><span></span></h3><p data-tool="mdnice编辑器">比如图A，画基因在不同细胞类群里的表达情况，我在旁边把基因信息给打出来，嗯，你同样可以打个中文版本，乃至中英文对照，方便自己解析。</p><p data-tool="mdnice编辑器">C图，画了一个基因的表达情况，这个图用<code>ggsc</code>包画的，图的副标题，就加了基因的全称，图下面就标注了基因的信息。这样子，图就成了自带解说的图了，信息量满满。而这些信息全是由fanyi包里的函数在线爬回来的，而且你当然也能翻成各种语言。</p></section><p><img data-galleryid="" data-imgfileid="100010471" data-ratio="0.726764500349406" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLtibiaGaNxsJXuBibyT91msnLDia6HZY1fMlCdNIhib8eV69mfIdSPdPrJicw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1431" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLtibiaGaNxsJXuBibyT91msnLDia6HZY1fMlCdNIhib8eV69mfIdSPdPrJicw/640?wx_fmt=png&amp;from=appmsg"></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span>热图注释</span><span></span></h3><p data-tool="mdnice编辑器">第三个图我用<code>ggtree</code>画了一个差异基因的热图，把基因的全称给抓下来，并且翻译成中文，打在右边，这样左边是基因名，右边是中文全称，看起来是不是很清楚这些基因是干啥的啦！右边是富集分析图的翻译，前面已经有演示过了。</p></section><p><img data-imgfileid="100010472" data-ratio="0.7140625" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLKhmlsZuK0ibXxLQT0R8mWK1EibKXMTDD39ZBiatRfntQib4xUfln07JAUA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1280" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4micHEZ9saZo6dbv082UKrmLKhmlsZuK0ibXxLQT0R8mWK1EibKXMTDD39ZBiatRfntQib4xUfln07JAUA/640?wx_fmt=png&amp;from=appmsg"></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><p data-tool="mdnice编辑器">代码全部在我们的文章里有，完全可参考，可重复，在当前这个时间点里，拯救大家的毕业论文。这篇文章，已经有<a href="https://mp.weixin.qq.com/s?__biz=MzI5NjUyNzkxMg==&amp;mid=2247494091&amp;idx=1&amp;sn=9fe5396b6c5cd8c9de8a9537bf871b21&amp;chksm=ec40588cdb37d19a4dfe298f70ea5809a3ef11ab09588684fe766af47de1d22ce197a02e886c&amp;token=490791501&amp;lang=zh_CN&amp;scene=21#wechat_redirect" data-linktype="2">不少编辑来约了</a>，欢迎大家引用，让引用先飞一会。</p></section><p><img data-imgfileid="100010474" data-ratio="0.9655172413793104" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4mjkEoeeUER3AgpV6rp0sKiaCv8vczxOtVsjensxUNszsVSibeibKIuiabdh4Bw1mSAGZEAJqU0j8Ql7w/640?wx_fmt=png&amp;from=appmsg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" data-w="1073" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4mjkEoeeUER3AgpV6rp0sKiaCv8vczxOtVsjensxUNszsVSibeibKIuiabdh4Bw1mSAGZEAJqU0j8Ql7w/640?wx_fmt=png&amp;from=appmsg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img data-imgfileid="100010473" data-ratio="1.043227665706052" data-src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4mjkEoeeUER3AgpV6rp0sKiazroicAG5R4jqNuwzc8geD8NQ2RAaicYZLgnLTVQichSMU9waia0rB9LRDQ/640?wx_fmt=png&amp;from=appmsg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" data-w="1041" src="https://mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4mjkEoeeUER3AgpV6rp0sKiazroicAG5R4jqNuwzc8geD8NQ2RAaicYZLgnLTVQichSMU9waia0rB9LRDQ/640?wx_fmt=png&amp;from=appmsg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/E2jBPKs083bKJFX3gitjNg",target="_blank" rel="noopener noreferrer">原文链接</a>
