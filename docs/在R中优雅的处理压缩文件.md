---
title: "在R中优雅的处理压缩文件"
date: 2022-09-29T22:51:31Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
在R中优雅的处理压缩文件 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来介绍一个简单的R语言小技巧如何使用代码执行压缩文件，非常实用的小技巧</p><span>❞</span></blockquote><figure data-tool="mdnice编辑器"><img data-ratio="0.6586666666666666" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYffjumiagIjep0PWRKUMKBAhjslyjW8KHfrG4k4NeLxsu6HWjU4icqXs4XXFLoHibylic5YUCAE9CTkg/640?wx_fmt=png" data-type="png" data-w="750" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYffjumiagIjep0PWRKUMKBAhjslyjW8KHfrG4k4NeLxsu6HWjU4icqXs4XXFLoHibylic5YUCAE9CTkg/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p><code>有需要学习数据可视化的朋友欢迎加入小编2022年度VIP群</code>，目前群内已经上传公众号文档<strong>「数据+代码约200篇」</strong>，<code>VIP交流群(1)已经500人满员</code>,随着内容不断增多，为了更好的创做内容现在进群需<strong>「付费149元」</strong>,若转发此文档到朋友圈集赞20个可优惠20元，早进早享受；<strong>「一定让你感受到物超所值」</strong></p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>R包原文</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>https://github.com/r-lib/archive</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>加载R包</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>library(tidyverse)<br><span># install.packages("archive")</span><br>library(archive)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>压缩zip文件</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>write_csv(mtcars, archive_write(<span>"mtcars.zip"</span>, <span>"mtcars.csv"</span>))<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>读入zip压缩文件</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>read_csv(archive_read(<span>"mtcars.zip"</span>), col_types = cols())<br></code></pre><blockquote data-tool="mdnice编辑器"><span>❝</span><p><span>上面介绍的</span><strong>「mtcars」</strong><span>数据集为R内置数据集合，那么本地的数据该怎么执行压缩，很简单读入保存成变量后</span>再<span>执行压缩代码即可，但需要注意格式有</span><code>csv,tsv</code><span>之分</span></p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>压缩本地文件</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>df &lt;- read_tsv(<span>"iris.xls"</span>)<br>write_tsv(df,archive_write(<span>"iris.zip"</span>, <span>"iris.xls"</span>))<br><span># 读入</span><br>read_tsv(archive_read(<span>"iris.zip"</span>), col_types = cols())<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>压缩为tar格式</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>write_csv(df, archive_write(<span>"iris.tar.gz"</span>, <span>"iris.csv"</span>, options = <span>"compression-level=9"</span>))<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>读入tar格式</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>read_csv(archive_read(<span>"iris.tar.gz"</span>), col_types = cols())<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>查看文件大小</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>file.size(c(<span>"iris.zip"</span>, <span>"iris.tar.gz"</span>))<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>[1] 1026  926<br></code></pre><blockquote data-tool="mdnice编辑器"><span>❝</span><p>可以看到<strong>「tar」</strong>格式的文件压缩率更高，优先推荐</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>多文件压缩</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>write_csv(iris, <span>"iris.csv"</span>)<br>write_csv(mtcars, <span>"mtcars.csv"</span>)<br>write_csv(airquality, <span>"airquality.csv"</span>)<br></code></pre><ul data-tool="mdnice编辑器"><li><section>将三个表格同时打包压缩</section></li></ul><pre data-tool="mdnice编辑器"><span></span><code>archive_write_files(<span>"data.tar.xz"</span>, c(<span>"iris.csv"</span>, <span>"mtcars.csv"</span>, <span>"airquality.csv"</span>))<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>查看压缩文件列表</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>archive(<span>"data.tar.xz"</span>)<br></code></pre><p data-tool="mdnice编辑器">内容还是很详细的</p><pre data-tool="mdnice编辑器"><span></span><code> path            size date               <br>  &lt;chr&gt;          &lt;int&gt; &lt;dttm&gt;             <br>1 iris.csv        3716 2022-09-29 22:34:11<br>2 mtcars.csv      1281 2022-09-29 22:34:11<br>3 airquality.csv  2890 2022-09-29 22:34:11<br></code></pre><p data-tool="mdnice编辑器">读入需要的压缩文件</p><pre data-tool="mdnice编辑器"><span></span><code>read_csv(archive_read(<span>"data.tar.xz"</span>, file = 2), col_types = cols())<br>read_csv(archive_read(<span>"data.tar.xz"</span>, file = <span>"mtcars.csv"</span>), col_types = cols())<br></code></pre><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节介绍到此结束，对于节省硬盘空间来说全部将文件压缩是个不错的选择，喜欢的观众老爷欢迎分享转发；<strong>「当然更推荐大家加入我的VIP交流群」</strong>扫描下方二维码加小编微信<strong>「付费149元」</strong>后邀请进群，<strong>「一定让你感受到物超所值」</strong>，<strong>「添加小编微信请备注来意，以便高效处理」</strong>，如果没什么事情请勿扰</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>小编微信</span><span></span></h3><p><img data-galleryid="" data-ratio="1" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg" data-type="jpeg" data-w="430" src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile><p><br></p><section><section><section><section><p data-mid="">往期推荐</p></section></section><section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498596&amp;idx=1&amp;sn=0369a7a71fbd3e686fcf63df5654d713&amp;chksm=cee2a3faf9952aecd776fe969b9a601b643642646c8fdf5a0056ebf54cb71f1771a7a1b77e27&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>十一黄金周正是学习时-加入R绘图交流群早日提高数据分析技能！</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498578&amp;idx=1&amp;sn=9dbbba39f4f8d5872ab1df8aec67f3d6&amp;chksm=cee2a3ccf9952ada60dc427c729f02d9487f7de45f829a529e7b782d4ff5d7b1cc10ac0704ff&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggplot2优雅的对图形做各种额外注释</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498540&amp;idx=1&amp;sn=87b68b14fc00d8743d47b053d19acba2&amp;chksm=cee2a3b2f9952aa4063a7a6becea7155c3010b02c241ba5fc5ca031a321caf632b0efb43f074&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>[GBD数据库挖掘] 9.ggplot2绘制ASIR地图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498500&amp;idx=1&amp;sn=e39bb463dfbe038efbd0f99e2ef3a1c1&amp;chksm=cee2a39af9952a8c412cb4beaed3bdf30d4c5324dc7531d3f963d78a360744f9bb9a08ee46dd&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggplot2绘制多组合散点图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498436&amp;idx=1&amp;sn=04e2d346171713d8eb424ec740e9de56&amp;chksm=cee2a25af9952b4cf0d4d21895d01b50eb84d438dea4a646124bec9175129732bd0aee4b9b78&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggplot2绘制小技巧(1) 修改特殊字符</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498407&amp;idx=1&amp;sn=0cb40695822746edea8922bc0bfaaf83&amp;chksm=cee2a239f9952b2f726c4278dfdf3726a3fdbf91816b875dbbd814ccaf8ca86105033724224a&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>[会员专享] ggplot2构建回归模型热图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498315&amp;idx=1&amp;sn=00bb88cc1b6c6407bff955befd115d46&amp;chksm=cee2a2d5f9952bc3e9d60c02ce13ec489f437ffc98fee18523f5702cb6da397b02d5d06b66ab&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>linkET优雅的绘制高端相关性热图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498298&amp;idx=1&amp;sn=c7f1876acb9489897a70c60717c6721a&amp;chksm=cee2a2a4f9952bb235234663df3b62fdca7c5a51232e18ddfe7876bfd59906e73c3e3acabb46&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggplot2优雅的给热图添加显著性标记</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498233&amp;idx=2&amp;sn=85ad779d86e48d89d8ec53e7ea9d1eb2&amp;chksm=cee2a167f9952871c1e568f0c5cb298ca3a807181e9bd9e5a2347d7e050c810e9c7860eb7bd1&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>nmicrobiology图表复现之个性化注释热图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498170&amp;idx=1&amp;sn=871c906a04720739cf53b21c2de510a2&amp;chksm=cee2a124f995283271c794e61c74c5dbf2fa94659f44d4256757d73f4e4f287e205734407f66&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>nmicrobiology图表复现之PCA图叠加密度曲线</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498075&amp;idx=1&amp;sn=4f01d2d36cfe1c241f929ef28c8f1000&amp;chksm=cee2a1c5f99528d3e5aff880d8dcfb0648dc81bb96e612b967a995a613debb6c52648240d5c9&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggraph优雅的绘制环状网络图(2)</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247498035&amp;idx=1&amp;sn=5c6e15b3baa74656bde9186151c142e5&amp;chksm=cee2a1adf99528bb70307254ec5fdd81abf8a0306ec91e86ac5f2e9bddcde5496c2a48ff2ab9&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>[GBD数据库挖掘] 4.ggplot2绘制相关变化趋势气泡图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247497987&amp;idx=1&amp;sn=8a3cabf85a5b9636954f36661515b38b&amp;chksm=cee2a19df995288b122f98ac2a56e7729c8f54c6c13086499980b015988efd5f3746efe2df45&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggplot2优雅的批量绘制散点图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247497878&amp;idx=1&amp;sn=744131e0f726e6b369316b108e7c8b73&amp;chksm=cee2a008f995291e17fe1320ccb006e532a930e4a4c36465a9466918ec34a3ce434d8f23128e&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggplot2优雅的组合地图与条形图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247497488&amp;idx=1&amp;sn=1884eb81ae3c76760775f154ee790df7&amp;chksm=cee2af8ef9952698f9f14f112ad0fe91d5b6330fa9a7292ed730d25136bc60a8664a4c8e22ed&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>[会员专享] ggplot2绘制环状正负堆砌条形图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247497192&amp;idx=1&amp;sn=a1e78a61efec90b49e51a978ec2b8a59&amp;chksm=cee2ad76f9952460708941992420589f1392cc1562c81ba569fca06bb7e1bcd8898aa4c7ec25&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>[会员专享] ggplot2优雅的绘制stamp图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247497064&amp;idx=1&amp;sn=22fed1a713b708dd6ffef057f4ca9b99&amp;chksm=cee2adf6f99524e09abeb9aecf7e2ad82d24d885bfa48d7fea4c5cf09d0e8e5344bfc5fd2b77&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>[会员专享] jjAnno完美复现nature microbiology图表之相关性热图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247496828&amp;idx=1&amp;sn=04956ad6667127ba88ebaf9f73a660ae&amp;chksm=cee2ace2f99525f481705270c797720141a267b0d4510156e2363f8fd3766a5c972255b0d2c8&amp;scene=21#wechat_redirect" data-linktype="2"></a><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247496828&amp;idx=1&amp;sn=04956ad6667127ba88ebaf9f73a660ae&amp;chksm=cee2ace2f99525f481705270c797720141a267b0d4510156e2363f8fd3766a5c972255b0d2c8&amp;scene=21#wechat_redirect" data-linktype="2"></a><p><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247496828&amp;idx=1&amp;sn=04956ad6667127ba88ebaf9f73a660ae&amp;chksm=cee2ace2f99525f481705270c797720141a267b0d4510156e2363f8fd3766a5c972255b0d2c8&amp;scene=21#wechat_redirect" data-linktype="2">[会员专享]nature microbiology图表复现之热图终结版</a></p></section></section></section></section></section></section></section></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/iZistRlnjZw4S5F8xjqlxg",target="_blank" rel="noopener noreferrer">原文链接</a>
