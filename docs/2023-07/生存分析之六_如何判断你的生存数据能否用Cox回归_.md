---
title: "生存分析之六：如何判断你的生存数据能否用Cox回归？"
date: 2023-07-01T01:11:35Z
draft: ["false"]
tags: [
  "fetched",
  "临床研究与医学统计"
]
categories: ["Acdemic"]
---
生存分析之六：如何判断你的生存数据能否用Cox回归？ by 临床研究与医学统计
------
<div><p>前面两篇文章分别介绍了两种参数回归，可用于相应分布的生存数据。但实际中，据我所知，绝大多数人更喜欢用的是Cox回归。起码在文章中，几乎99%可能大家都在用Cox回归做生存数据的多因素分析。<br></p><p>为什么大家这么喜欢Cox回归，我个人感觉主要原因是：</p><p>Cox回归不用考虑生存数据的分布，拿起来就用。其实这也是所有非参数方法的优点。但我发现一个矛盾的现象：在组间比较中，大家更喜欢用t检验或方差分析等参数检验，不喜欢用非参数的秩和检验，觉得非参数不靠谱；然而在生存数据分析中，大家却喜欢用非参数的Cox回归，反而参数的weibull回归等大家不喜欢用。也许，其实很多临床人员并不是喜欢或不喜欢参数或非参数本身，我想，大家选择方法的时候，可能就是基于一个原则：简单易用。<br></p><p>然而，尽管cox回归不用考虑生存数据分布，但有一点还是得明确，Cox回归绝不是适用于所有生存数据的多因素分析。至少有一个条件，Cox回归必须考虑，也必须满足，这就是：等比例风险（Porportional Hazards）。<br></p><section>所谓等比例风险，其实简单来说很容易理解：它表示，在研究期间内，某因素对生存的影响在任何时间都是相同的，不随时间的变化而变化。如吸烟对肿瘤的影响，不管是第一年、第二年、……，对肿瘤的危险都是相同的。</section><section>其实现实中很少有因素能够完全满足这一条件，但也不用担心，统计学本身就没那么严格。其实统计学中所有的各种条件，没有一个是非常严格的。比如正态性，只要不是很偏态就可以了；方差齐性，只要两组方差差别不是很大就好了；同样这个等比例风险也是一样，只要因素的风险在不同时间差不多就行了。<br></section><section>然而，尽管要求相对宽松，却也必须验证之后才知道，否则怎么知道你的因素是否满足这一条件呢？或者换句话说，你的因素有没有违背这一条件呢？如果违背了，用Cox回归就危险了。任何方法都有前提，Cox回归也不例外。</section><section>那么，如何判断数据是否满足这一条件呢？实际中常见的有这几种方法：</section><section>（1）图示法<br></section><section>绘制某因素在不同状态下的二次对数生存曲线图<span>（即横坐标是时间的对数，纵坐标是生存函数的对数的对数）</span>，如果生存曲线大致平行，表明等比例风险成立，否则提示等比例不成立。如下图中两条曲线交叉，提示可能不满足等比例风险假定。</section><p><img data-ratio="0.7318435754189944" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/XwRABt3jlGoK5PtWKD1TZyxGZcK1tLpIjWqJic9XXYCuCRwicNGd9YjicWV3TZU22TVBWLhOzvH2owdEQeSUHkiaoA/640?wx_fmt=png" data-type="png" data-w="537" src="https://mmbiz.qpic.cn/mmbiz_png/XwRABt3jlGoK5PtWKD1TZyxGZcK1tLpIjWqJic9XXYCuCRwicNGd9YjicWV3TZU22TVBWLhOzvH2owdEQeSUHkiaoA/640?wx_fmt=png"></p><p><br></p><section>（2）交互作用判断法<br></section><section>在模型中增加该变量与时间的交互作用项。如果交互作用项有统计学意义，则表明该变量在不同时间的作用不同，也就是说不满足等比例风险假设。如下表中tvc (time varying covariates) 中的treat有统计学意义，说明不满足等比例风险假定。</section><p><img data-ratio="0.27362637362637365" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/XwRABt3jlGoK5PtWKD1TZyxGZcK1tLpIBtPh7zoTlbGOQcqzhGqkCLibQLSx7jdOmzR8KIUBfaBKicSxWNzg4UVQ/640?wx_fmt=png" data-type="png" data-w="910" src="https://mmbiz.qpic.cn/mmbiz_png/XwRABt3jlGoK5PtWKD1TZyxGZcK1tLpIBtPh7zoTlbGOQcqzhGqkCLibQLSx7jdOmzR8KIUBfaBKicSxWNzg4UVQ/640?wx_fmt=png"></p><section>（3）残差法</section><section>绘制<span>Schoenfeld</span><span>残差</span>与时间t的关系图，如果Schoenfeld残差与时间t无明显的变化趋势，即残差与时间t无关，则提示符合等比例风险假设。如下图中残差似乎有随着时间降低的趋势，提示可能不满足等比例风险假定。</section><p><img data-ratio="0.7318435754189944" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/XwRABt3jlGoK5PtWKD1TZyxGZcK1tLpIcfrHy29QkD712zLCQ42nk9XewfIwQSD80EpiatYypw0DRZMmiaCicnVCQ/640?wx_fmt=png" data-type="png" data-w="537" src="https://mmbiz.qpic.cn/mmbiz_png/XwRABt3jlGoK5PtWKD1TZyxGZcK1tLpIcfrHy29QkD712zLCQ42nk9XewfIwQSD80EpiatYypw0DRZMmiaCicnVCQ/640?wx_fmt=png"></p><section>（4）模拟法</section><section>SAS软件还专门提供了一种基于模拟判断的方法，其大致意思是说，模拟出一堆正常如果满足应该是什么样子的曲线，然后看看实际曲线跟模拟的差异大不大。如果差的太大，说明可能不满足。<br></section><section>如下图，实际曲线（粗线）距离模拟曲线（细线）距离有点远，所以可能不满足等比例风险假定。</section><p><img data-ratio="0.738045738045738" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/XwRABt3jlGoK5PtWKD1TZyxGZcK1tLpIoLL6f8JNT21EyTXI96icP5qAauLEyEVEHKqRahs902DicREpFgoXziaWQ/640?wx_fmt=png" data-type="png" data-w="481" src="https://mmbiz.qpic.cn/mmbiz_png/XwRABt3jlGoK5PtWKD1TZyxGZcK1tLpIoLL6f8JNT21EyTXI96icP5qAauLEyEVEHKqRahs902DicREpFgoXziaWQ/640?wx_fmt=png"></p><section>这几种方法除了最后一种是SAS软件特有提供的，其它三种方法在所有软件中都可以轻松实现。</section><section>所以，建议大家以后再做Cox回归的时候，先简单判断一下，是否满足应用条件。Cox回归并不是想用就用，尽管国内很多文章其实并不考虑这些，然而，对于好的研究，还是需要考虑的。比如下面这个文章，这是发表在Lancet的一篇文章，大家仔细看一下，其实就提到了，比例风险假定是满足的，而且是采用二次对数生存曲线法来验证的。说明了文章的严谨性，其实这些都不难，为什么我们不能也做一下呢？<br></section><p><img data-ratio="0.20212765957446807" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/XwRABt3jlGoK5PtWKD1TZyxGZcK1tLpIXqBPo7huoIuzkeVDAcUpibeYd3WibLjFGlAY8SZEVsvBjUwzziaBTtGEg/640?wx_fmt=png" data-type="png" data-w="376" src="https://mmbiz.qpic.cn/mmbiz_png/XwRABt3jlGoK5PtWKD1TZyxGZcK1tLpIXqBPo7huoIuzkeVDAcUpibeYd3WibLjFGlAY8SZEVsvBjUwzziaBTtGEg/640?wx_fmt=png"></p><section>其实很多方法都是如此，并不是很难，我们其实完全可以通过软件实现，如果能够在文章中体现，还能说明我们的严谨，增加文章被接受的几率，何乐而不为呢？<br></section></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/ARxINRs8QoEsfNF4R6cBQw",target="_blank" rel="noopener noreferrer">原文链接</a>
