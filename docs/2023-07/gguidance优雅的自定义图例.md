---
title: "gguidance优雅的自定义图例"
date: 2023-07-24T12:11:58Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
gguidance优雅的自定义图例 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来介绍一款R包<strong>「gguidance」</strong>，其主要可以用来自定义设置图例及刻度条，在实际操作中非常的实用，下面小编来简单介绍几个案例来做展示，希望各位观众老爷能够喜欢，更多详细文档请参考作者官方文档。</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>官方文档</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>https://github.com/teunbrand/gguidance</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><h3 data-tool="mdnice编辑器"><span></span><span><span></span>加载R包</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>install.package(<span>"pak"</span>)<br>pak::pak(<span>"tidyverse/ggplot2"</span>)<br>pak::pak(<span>"teunbrand/gguidance@main"</span>)<br><br><span>library</span>(gguidance)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>绘制主图</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p &lt;- ggplot(mpg, aes(displ, hwy)) +<br>  geom_point() +<br>  labs(<br>    x = <span>"Engine displacement"</span>,<br>    y = <span>"Highway miles per gallon"</span>) +<br>    theme(axis.line = element_line())<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>设置图例布局</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p + aes(colour = paste(cyl, year)) +<br>  guides(colour = <span>"legend_cross"</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4nT8g0809IS9fNicnMHZicPwtXiaYiaqdG1SpPibZlEyOl3J4XkHmVDFCjpg/640?wx_fmt=png" data-type="png" data-w="924" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4nT8g0809IS9fNicnMHZicPwtXiaYiaqdG1SpPibZlEyOl3J4XkHmVDFCjpg/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>设置图例颜色</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p + aes(colour = class) +<br>  guides(colour = <span>"legend_string"</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4huloULia9vShBD6y7efqR8icaX7vTwZuCnSrSQWtgwA0v0ZCon50T8xQ/640?wx_fmt=png" data-type="png" data-w="924" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4huloULia9vShBD6y7efqR8icaX7vTwZuCnSrSQWtgwA0v0ZCon50T8xQ/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>设置图例两端形状</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p + aes(colour = cty) +<br>  scale_colour_viridis_c(guide = <span>"colourbar_cap"</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4WCiabwdswdc0lia8CSvpm0U2fRW97veJvKdwwtZaoW3JW5lUvicOhHFcg/640?wx_fmt=png" data-type="png" data-w="924" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4WCiabwdswdc0lia8CSvpm0U2fRW97veJvKdwwtZaoW3JW5lUvicOhHFcg/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>设置图例为小提琴</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p + aes(colour = cty) +<br>  scale_colour_viridis_c(guide = guide_colour_violin(density = mpg$cty))<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4uePklyM01fNOpIZXDVuTekVibWoAxJ8qsvAh5Gc0E2wNwFdibD9ZyhsQ/640?wx_fmt=png" data-type="png" data-w="924" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4uePklyM01fNOpIZXDVuTekVibWoAxJ8qsvAh5Gc0E2wNwFdibD9ZyhsQ/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>设置图例为直方图</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p + aes(colour = cty) +<br>  scale_colour_viridis_c(<br>    guide = guide_colour_histogram(hist = hist(mpg$cty, breaks = <span>10</span>))<br>  )<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4zDSH9N3iaxHict9gFyGmHvTV1BKULvsSyo55MibmiaqJ92bcBSj7fn3mXQ/640?wx_fmt=png" data-type="png" data-w="924" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4zDSH9N3iaxHict9gFyGmHvTV1BKULvsSyo55MibmiaqJ92bcBSj7fn3mXQ/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>刻度添加文本</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p + guides(x = guide_axis_extend(subtitle = c(<span>"Less"</span>, <span>"More"</span>)))<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe44icn5mKlbic7lYH8Kibxmo46xNCjIaPNLV8HqIhfLpWgUC47Wl0qO7V0Q/640?wx_fmt=png" data-type="png" data-w="924" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe44icn5mKlbic7lYH8Kibxmo46xNCjIaPNLV8HqIhfLpWgUC47Wl0qO7V0Q/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>设置刻度类型</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p + guides(x = <span>"axis_minor"</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4QlfqicIPQ7UXG2Y3GribwMINRCssagNM6tYIyk7kf60sn5369sgoOAZg/640?wx_fmt=png" data-type="png" data-w="924" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4QlfqicIPQ7UXG2Y3GribwMINRCssagNM6tYIyk7kf60sn5369sgoOAZg/640?wx_fmt=png"></figure><pre data-tool="mdnice编辑器"><span></span><code>p + guides(x = <span>"axis_cap"</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4S7VOCX9qc8y6PHmvqC6Uhg4gkjBLKBREuOdg8RWWDibCwXv92DI8icgQ/640?wx_fmt=png" data-type="png" data-w="924" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4S7VOCX9qc8y6PHmvqC6Uhg4gkjBLKBREuOdg8RWWDibCwXv92DI8icgQ/640?wx_fmt=png"></figure><pre data-tool="mdnice编辑器"><span></span><code>boxplot &lt;- ggplot(mpg, aes(class, displ)) +<br>  geom_boxplot() +<br>  labs(<br>    x = <span>"Type of car"</span>,<br>    y = <span>"Engine displacement"</span><br>  )<br><br>boxplot +<br>  guides(x = guide_axis_nested(<br>    range_start = c(<span>0.5</span>, <span>3.5</span>),<br>    range_end   = c(<span>4.5</span>, <span>6.5</span>),<br>    range_name  = c(<span>"First range"</span>, <span>"Second range"</span>),<br>    bracket     = <span>"square"</span> <br>  ))<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4sjrVOveFicBsj81ko2CV86zTUCaRog1G1zjR976SE7VibfIbdULkqHkQ/640?wx_fmt=png" data-type="png" data-w="924" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4sjrVOveFicBsj81ko2CV86zTUCaRog1G1zjR976SE7VibfIbdULkqHkQ/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>组合表格与图</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>my_table &lt;- lapply(split(mpg[, c(<span>"displ"</span>, <span>"cty"</span>, <span>"hwy"</span>)], mpg$class), colMeans)<br>my_table &lt;- as.data.frame(do.call(rbind, my_table))<br>my_table[] &lt;- lapply(my_table, scales::number, accuracy = <span>0.01</span>)<br>my_table$class &lt;- rownames(my_table)<br><br>boxplot +<br>  guides(x = guide_axis_table(table = my_table, key_col = class))<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe40VmufHnTicdr3PQgsuJILleKOZibUGRoQ0CJiazRRHsZpG5Ls0Gic5rQ0w/640?wx_fmt=png" data-type="png" data-w="924" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe40VmufHnTicdr3PQgsuJILleKOZibUGRoQ0CJiazRRHsZpG5Ls0Gic5rQ0w/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>添加阴影</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>boxplot + coord_guided(<span>"grid_zebra"</span>) +<br>  theme(panel.grid.major.x = element_line(alpha(<span>"grey50"</span>, <span>0.1</span>)))<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7142857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4Om2icIs82nrQSPN7OvWrlevVEXY6nORK4Z5Lb9QTrNmB6lhQ5uItqZg/640?wx_fmt=png" data-type="png" data-w="924" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4Om2icIs82nrQSPN7OvWrlevVEXY6nORK4Z5Lb9QTrNmB6lhQ5uItqZg/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节介绍到此结束，有需要学习个性化数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>购买<strong>「2023年度会员文档」</strong>同步更新中<strong>「售价149元」</strong>，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码；按照往年数据小编年产出约在150+以上</p><span>❞</span></blockquote><p data-tool="mdnice编辑器">购买后微信发小编订单截图即邀请进新的会员交流群，小编的文档为按年售卖，只包含当年度的<strong>「除系列课程外」</strong>的文档，有需要往年文档的朋友也可下单购买，需要了解更多信息的朋友欢迎交流咨询。</p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝扫一扫</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-ratio="1.5751295336787565" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4al8dM9LDzWTMicJibwJyc1eUxX3wYOXCciagKDSjIy1EXicE45ZQRvHBOw/640?wx_fmt=png" data-type="png" data-w="386" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4al8dM9LDzWTMicJibwJyc1eUxX3wYOXCciagKDSjIy1EXicE45ZQRvHBOw/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>2023会员群案例展示</span><span></span></h3><p data-tool="mdnice编辑器"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4Ribg9mEDbHcmlYow2J1WicV2Liaibl94S6FZSuyQ3X0icde2uyh8pNZAwrQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4Ribg9mEDbHcmlYow2J1WicV2Liaibl94S6FZSuyQ3X0icde2uyh8pNZAwrQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4iaROaEibyrOVhPn0XOrH3Qb1Zl12BQBK876WnibfDyKz8V4SwlibaibjseA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4iaROaEibyrOVhPn0XOrH3Qb1Zl12BQBK876WnibfDyKz8V4SwlibaibjseA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4ibNybzwqZEq3xDTBibXA77eugj8lAJT0ZKyTmvgorffR4n0XlUPjHaLw/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4ibNybzwqZEq3xDTBibXA77eugj8lAJT0ZKyTmvgorffR4n0XlUPjHaLw/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4OYRvuhjFOU17uunGGuZQCNu4UDCHN5toNEpRKOtOnqxFrtJKgAdnhA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4OYRvuhjFOU17uunGGuZQCNu4UDCHN5toNEpRKOtOnqxFrtJKgAdnhA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4ibjLtbxMiaQib9pBdLvMMFAoWrb2ksWMg8nhSlCCfHNRWJJkCXWQZJOoA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4ibjLtbxMiaQib9pBdLvMMFAoWrb2ksWMg8nhSlCCfHNRWJJkCXWQZJOoA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4PQibBEibDDGKPQibPz1z6MlABxCjXJphcicTd9Hic6SDt9OCHtA80QReYPA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4PQibBEibDDGKPQibPz1z6MlABxCjXJphcicTd9Hic6SDt9OCHtA80QReYPA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4bjlInkIMwzNUqlZw4Zbr6aGWkbu17ftPiaanWTUDkjzxfUrg6jkS8rQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4bjlInkIMwzNUqlZw4Zbr6aGWkbu17ftPiaanWTUDkjzxfUrg6jkS8rQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4zVEtf88ZcbtmRpNBm87XfguqIwhu2NTBT3HwCRibDK91IhHEFyYicVzg/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4zVEtf88ZcbtmRpNBm87XfguqIwhu2NTBT3HwCRibDK91IhHEFyYicVzg/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4z6cib4VovwtWUGgoBktbhn6qrRPkPHyTzEf1vtIlKs0WscaO3Hlrbtw/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYOriaVqdBEiaWEFMpzx1KDe4z6cib4VovwtWUGgoBktbhn6qrRPkPHyTzEf1vtIlKs0WscaO3Hlrbtw/640?wx_fmt=png"></p></section><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/u5EFQgTJdEr0osbOwVWYTA",target="_blank" rel="noopener noreferrer">原文链接</a>
