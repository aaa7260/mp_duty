---
title: "浅谈ggplot2中的group参数"
date: 2022-10-07T06:26:44Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
浅谈ggplot2中的group参数 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来回复<strong>「VIP群内观众老爷提的一个疑难杂症」</strong>，主要是解释一下如何在合适的地方使用<strong>「group」</strong>参数，这个提问可以说的上很是专业了，小编在以前的文档中也多有使用<strong>「group」</strong>参数；那么本节就来详细解答一下，<strong>「数据及代码已经上传VIP群，加群的观众老爷请自行下载」</strong></p><span>❞</span></blockquote><blockquote data-tool="mdnice编辑器"><span>❝</span><p><code>有需要学习数据可视化的朋友欢迎加入小编2022年度VIP群</code>，目前群内已经上传公众号文档<strong>「数据+代码约200篇」</strong>，<code>VIP交流群(1)已经500人满员</code>,随着内容不断增多，为了更好的创做内容现在进群需<strong>「付费149元」</strong>,若转发此文档到朋友圈集赞20个可优惠20元，早进早享受；<strong>「一定让你感受到物超所值」</strong></p><span>❞</span></blockquote><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br><span>library</span>(reshape)<br><span>library</span>(ggsignif)<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>df &lt;- data.frame(a=LETTERS[<span>1</span>:<span>6</span>],b= c(<span>3</span>,<span>2</span>,<span>5</span>,<span>4</span>,<span>7</span>,<span>8</span>))<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>ggplot(df,aes(a,b))+<br>  geom_point()+<br>  geom_line()<br></code></pre><p data-tool="mdnice编辑器">运行上述代码程序会出现以下报错提示，<code>每组只包含一个观察值。需要调整分组美学</code></p><blockquote data-tool="mdnice编辑器"><span>❝</span><p>geom_path: Each group consists of only one observation. Do you need to adjust the group aesthetic?</p><span>❞</span></blockquote><pre data-tool="mdnice编辑器"><span></span><code>ggplot(df,aes(a,b,group = <span>1</span>)) +   <br>  geom_point() +<br>  geom_line()<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.6471571906354515" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbA5O2slomgFBzVUhUL3n5P3Fxfd7U2qb1GekbRAJeetoLy7SF5MXW8MPsSQtjpicl3HaeibRS5skPw/640?wx_fmt=png" data-type="png" data-w="598" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbA5O2slomgFBzVUhUL3n5P3Fxfd7U2qb1GekbRAJeetoLy7SF5MXW8MPsSQtjpicl3HaeibRS5skPw/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>代码中的group=<code>1</code>,此处的可以是<strong>「1」</strong>或任何数值也可以是<strong>「T|F」</strong>，那么为什么要这么操作那?<br>这里就需要引出一个新的概念<strong>「个体几何对象」</strong>与<strong>「集体几何对象」</strong>，<strong>「geom」</strong>代表几何对象。例如<strong>「geom_point()」</strong> 使用一行数据是一个单独的几何对象。<strong>「geom_col()」</strong> 也是一个单独的几何对象。而<strong>「geom_line()」</strong> 由多行数据组成,因此它是一个集体几何对象。此外箱线图也是一种集体几何对象，因为它需要基于多行数据进行统计转换。单个geoms只依赖一行不需要group，而集体geoms需依赖多行因此需要groups。</p><span>❞</span></blockquote><blockquote data-tool="mdnice编辑器"><span>❝</span><p>所以只有搞清楚了<strong>「个体几何对象」</strong>与<strong>「集体几何对象」</strong>，才能在合适的地方使用<strong>「group」</strong> ,下面放几个案例供大家参考</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>自定义添加P值</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p_value1 &lt;- tibble(<br>  x = c(<span>"Sepal.Length"</span>,<span>"Sepal.Length"</span>,<span>"Petal.Length"</span>,<span>"Petal.Length"</span>),<br>  y= c(890,910,910,700))<br><br>p_value2 &lt;- tibble(<br>  x = c(<span>"Sepal.Width"</span>,<span>"Sepal.Width"</span>,<span>"Petal.Width"</span>,<span>"Petal.Width"</span>),<br>  y=c(480,600,600,190))<br><br>iris %&gt;% melt() %&gt;% ggplot(aes(variable,value))+<br>  geom_col(width = 0.5)+<br>  theme_classic()+<br>  scale_y_continuous(limits = c(0,950), expand = c(0, 0))+<br>  geom_line(data = p_value1, aes(x = x, y = y,group=1))+<br>  geom_line(data = p_value2, aes(x = x, y = y,group=1))+<br>  annotate(<span>"text"</span>, x = 2, y = 920, label = <span>"***"</span>,<br>           size = 6, color = <span>"#22292F"</span>)+<br>  annotate(<span>"text"</span>, x = 3, y = 610, label = <span>"**"</span>,<br>           size = 6, color = <span>"#22292F"</span>)+<br>  labs(x=NULL,y=NULL)+<br>  theme(plot.margin = unit(rep(1,4), <span>"cm"</span>))<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.6471571906354515" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbA5O2slomgFBzVUhUL3n5PSNib1RDjynG587bBhhYITBgQwDY4oykNhLfayR5Fn99OhgAzr2qHsnA/640?wx_fmt=png" data-type="png" data-w="598" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbA5O2slomgFBzVUhUL3n5PSNib1RDjynG587bBhhYITBgQwDY4oykNhLfayR5Fn99OhgAzr2qHsnA/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>当然关于<strong>「group」</strong>的添加还有很多的细节，不同问题不同的处理方式，以后遇到了小编在做详细说明；本节介绍到此结束，喜欢的观众老爷欢迎分享转发；<strong>「当然更推荐大家加入我的VIP交流群」</strong>扫描下方二维码加小编微信<strong>「付费149元」</strong>后邀请进群，<strong>「一定让你感受到物超所值」</strong>，<strong>「添加小编微信请备注来意，以便高效处理」</strong></p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>小编微信</span><span></span></h3><p><img data-galleryid="" data-ratio="1" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg" data-type="jpeg" data-w="430" src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section></section></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/iYZ1lYd3uNJ5nWHGWyBIIQ",target="_blank" rel="noopener noreferrer">原文链接</a>
