---
title: "ggplot2自定义各类文本颜色"
date: 2024-02-19T15:30:15Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
ggplot2自定义各类文本颜色 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来介绍一个修改文本颜色的绘图案例，在实际数据分析的过程中某些情况下我们需要为轴文本和图例文本来添加不同的颜色，但是由于在ggplot2中无默认的参数来实现这一功能，在此小编使用另一种巧妙的方法来实现这一需求，整个过程仅参考。希望对各位观众老爷能有所帮助。<strong>「数据代码已经整合上传到会员交流群」</strong>，购买过小编VIP的朋友可在所加的会员群内获取下载，有需要的朋友可阅读下方介绍加入VIP交流群。</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关于永久群内容的说明</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>给予长期支持我们的忠实读者们一个特别待遇：购买小编2023年VIP会员文档的读者，<strong>「将自动获得2024年及以后更新的绘图文档代码，无需额外付费目前已包含100+学习案例。」</strong>有需要学习数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>下单购买，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码。购买会员文档后微信发小编订单号即邀请进新的会员交流群</p><span>❞</span></blockquote><p data-tool="mdnice编辑器"><strong>「2024更新的绘图内容同时包含数据+代码+markdown注释文档+文档清单」</strong></p><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br><span>library</span>(readxl) <br><span># devtools::install_github("doehm/ggbrick")  # 从GitHub安装ggbrick包，用于绘制砖块图</span><br><span>library</span>(ggbrick) <br><span>library</span>(scales)<br><span>library</span>(ggsci)  <br><span>library</span>(ggtext) <br></code></pre><figure data-tool="mdnice编辑器"><img data-imgfileid="100025928" data-ratio="0.08611111111111111" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYgIFQeplzs5Y0scela9geibqfHkKDnJuUXgrRjUOI4hMjtAUe6tdf5iabV5VIU3QScUsx8HuELXqJA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYgIFQeplzs5Y0scela9geibqfHkKDnJuUXgrRjUOI4hMjtAUe6tdf5iabV5VIU3QScUsx8HuELXqJA/640?wx_fmt=png&amp;from=appmsg"></figure><pre data-tool="mdnice编辑器"><span></span><code>df &lt;- read_excel(<span>"Source Data Figure 3.xlsx"</span>, sheet = <span>3</span>)  <span># 从Excel文件读取数据，指定第3个工作表</span><br></code></pre><pre data-tool="mdnice编辑器"><span></span><code><span># 对数据进行预处理，包括更改Cluster列的值和调整summit列的数值范围</span><br>dff &lt;- df %&gt;% mutate(Cluster = str_replace_all(Cluster, c(<span>"Cluster"</span> = <span>"C"</span>)),<br>                     summit = summit / <span>10000000</span>)<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code><span># 将Cluster列转换为因子，并指定其水平（顺序）</span><br>dff$Cluster &lt;- factor(dff$Cluster, levels = rev(c(<span>"C1"</span>, <span>"C2"</span>, <span>"C3"</span>, <span>"C4"</span>, <span>"C5"</span>,<br>                                                  <span>"C6"</span>, <span>"C7"</span>, <span>"C8"</span>, <span>"C9"</span>, <span>"C10"</span>, <span>"C11"</span>, <span>"C12"</span>)))<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code><span># 为不同的Cluster生成颜色映射</span><br>col_mapping &lt;- dff %&gt;% select(Cluster) %&gt;% distinct() %&gt;% <br>  mutate(col = rev(pal_simpsons(<span>"springfield"</span>)(<span>12</span>))) %&gt;% <br>  deframe()<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>color &lt;- c(<span>"#788FCE"</span>, <span>"#E6956F"</span>, <span>"#A6BA96"</span>)  <span># 定义颜色向量</span><br></code></pre><pre data-tool="mdnice编辑器"><span></span><code><span># 使用ggplot绘制砖块图</span><br>dff %&gt;%<br>  ggplot(aes(Cluster, summit)) +   <br>  geom_brick(aes(Cluster, summit, fill = Type), colour = <span>NA</span>, size = <span>0.2</span>)  +<br>  scale_y_continuous(labels = label_number(), position = <span>"right"</span>, expand = c(<span>0</span>, <span>0</span>)) +<br>  scale_x_discrete(expand = c(<span>0</span>, <span>0</span>)) +<br>  labs(y = <span>"Number of OCRs"</span>, x = <span>NULL</span>, fill = <span>NULL</span>) +<br>  coord_flip() +<br>  theme_classic() +<br>  theme(axis.text.x = element_text(color = <span>"black"</span>, size = <span>8</span>, face = <span>"bold"</span>),<br>        axis.text.y = element_text(color = col_mapping, size = <span>8</span>, face = <span>"bold"</span>),<br>        plot.background = element_rect(fill = <span>"white"</span>, colour = <span>"white"</span>),  <span># 设置图表背景为白色</span><br>        plot.margin = margin(b = <span>5</span>, t = <span>5</span>, r = <span>5</span>, l = <span>5</span>),  <span># 设置图表的边距</span><br>        legend.text = element_markdown(size = <span>8</span>, face = <span>"bold"</span>),<br>        legend.background = element_blank(),<br>        legend.key.height = unit(<span>0.5</span>, <span>"cm"</span>),<br>        legend.key.width = unit(<span>0.5</span>, <span>"cm"</span>),<br>        legend.position = c(<span>0.4</span>, <span>0.1</span>))  <span># 设置图例位置</span><br></code></pre><figure data-tool="mdnice编辑器"><img data-imgfileid="100025930" data-ratio="1.2896825396825398" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYgIFQeplzs5Y0scela9geibHwdjfElpNxj9DibW4CWZzxsfNMzoYCeibolgjeT7DfXWlhMr75FlNQvA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1008" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYgIFQeplzs5Y0scela9geibHwdjfElpNxj9DibW4CWZzxsfNMzoYCeibolgjeT7DfXWlhMr75FlNQvA/640?wx_fmt=png&amp;from=appmsg"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>可以看到Y轴文本根据不同的Cluster生成了不同的颜色，同时图例文本颜色也与图例色块保持了一致，强迫症可以得到满足了。本节介绍到此结束，更多精彩内容持续更新中。</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝扫一扫</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-imgfileid="100025929" data-ratio="1.5806451612903225" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYgIFQeplzs5Y0scela9geibdwnv5P6sHaOTvySxXLdE3wicmmXFuNGaV5icwSf81kDCdjKA2ed6mVVQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="682" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYgIFQeplzs5Y0scela9geibdwnv5P6sHaOTvySxXLdE3wicmmXFuNGaV5icwSf81kDCdjKA2ed6mVVQ/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝店铺(有需要欢迎关注)</span><span></span></h3><p><img data-galleryid="" data-imgfileid="100019415" data-ratio="1.0210420841683367" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAbvhPDLGT8NaialEsht92PTYNJWpmVLfoYGic1uha5FyBrDCibibZCLjiazgvpT1XcdwibfVywD2el0VAgg/640?wx_fmt=jpeg" data-type="jpeg" data-w="998" src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAbvhPDLGT8NaialEsht92PTYNJWpmVLfoYGic1uha5FyBrDCibibZCLjiazgvpT1XcdwibfVywD2el0VAgg/640?wx_fmt=jpeg"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3></section><section><mp-common-profile data-pluginname="mpprofile" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/ZVG41LM_iifsHX_zDI59jw",target="_blank" rel="noopener noreferrer">原文链接</a>
