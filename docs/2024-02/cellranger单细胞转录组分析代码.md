---
title: "cellranger单细胞转录组分析代码"
date: 2024-02-10T22:57:57Z
draft: ["false"]
tags: [
  "fetched",
  "东林的扯淡小屋"
]
categories: ["Acdemic"]
---
cellranger单细胞转录组分析代码 by 东林的扯淡小屋
------
<div><p><br></p><section><ul><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre data-lang="sql"><code><span>下载软件</span></code><code><span>wget -O cellranger-7.0.0.tar.gz "https://cf.10xgenomics.com/releases/cell-exp/cellranger-7.0.0.tar.gz?Expires=1660521741&amp;Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jZi4xMHhnZW5vbWljcy5jb20vcmVsZWFzZXMvY2VsbC1leHAvY2VsbHJhbmdlci03LjAuMC50YXIuZ3oiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE2NjA1MjE3NDF9fX1dfQ__&amp;Signature=I1ClmYpGC95JhgfEilOLlMOtkbvNUm3uVXqjnmHEz2vFYPVhMF1aZIk-p8NHV37YUABtlrfX5wYUygwMtYMQ6ZpC3bBNiY29rEWf0QQCUsHCxh23v6-q2TQMYlckMntqIeCD63CkxjWLdX85nEgepLpmLKDSH2gSIMxP0PyhAA1TzHdVDIkPcGa2b7ShosdFK7CQXvXJ~nNDYa4AIrNq9Ku1C1RerSNjEPYHd2Bkz7b1pSoEM69rutHgIA43fkCtuW9xX3hXt-lSYtqBNRYyLABqJelx3JQ4lWVufUdEh-YYJZuA2u0RtRF4uTe96KdENkafebKuByH3O9PaJV9Hag__&amp;Key-Pair-Id=APKAI7S6A5RYOXBWRPDA"</span></code><code><span> </span></code><code><span>下载官方基因组：</span></code><code><span>wget https://cf.10xgenomics.com/supp/cell-exp/refdata-gex-GRCh38-2020-A.tar.gz</span></code><code><span>wget https://cf.10xgenomics.com/supp/cell-exp/refdata-gex-mm10-2020-A.tar.gz</span></code><code><span>wget https://cf.10xgenomics.com/supp/cell-exp/refdata-gex-GRCh38-and-mm10-2020-A.tar.gz</span></code><code><span> </span></code><code><span><br></span></code><code><span>软件安装：</span></code><code><span>tar -xzvf cellranger-7.0.0.tar.gz</span></code><code><span>export PATH=/data/yudonglin/software/cellranger-7.0.0:$PATH</span></code><code><span> </span></code><code><span><span>#cellranger testrun --id=tiny</span></span></code><code><span>   </span></code><code><span><br></span></code><code><span>/data/yudonglin/reference/singcell/refdata-gex-GRCh38-2020-A</span></code><code><span>/data/yudonglin/reference/singcell/refdata-gex-mm10-2020-A</span></code><code><span><span>#配置环境，成功安装：</span></span></code><code><span>export PATH=/data/yudonglin/software/cellranger-7.0.0:$PATH</span></code><code><span><span>#开始运行：</span></span></code><code><span>cellranger count <span>--id=Y7_B1 \</span></span></code><code><span>                   <span>--transcriptome=/data/yudonglin/reference/singcell/refdata-gex-mm10-2020-A\</span></span></code><code><span>                   <span>--fastqs=/data1/yudonglin/shu/ \</span></span></code><code><span>                   <span>--sample=FH-H3-Y7-B1 \</span></span></code><code><span>                   <span>--localcores=40 \</span></span></code><code><span>                   <span>--localmem=64</span></span></code><code><span><br></span></code><code><span><br></span></code><code><span><br></span></code><code><span><br></span></code><code><span>export PATH=/data/yudonglin/software/cellranger-7.0.0:$PATH</span></code><code><span> cellranger count <span>--id=Y7_B \</span></span></code><code><span>                   <span>--transcriptome=/data/yudonglin/reference/singcell/refdata-gex-GRCh38-2020-A\</span></span></code><code><span>                   <span>--fastqs=/data4/yudonglin/zhanghongquan/ \</span></span></code><code><span>                   <span>--sample=FH-H3-Y7-B1 \</span></span></code><code><span>                   <span>--localcores=40 \</span></span></code><code><span>                   <span>--localmem=64</span></span></code><code><span><br></span></code><code><span><br></span></code><code><span><br></span></code><code><span><br></span></code><code><span>conda <span>create</span> -n velocity </span></code><code><span>conda <span>activate</span> velocity </span></code><code><span>conda <span>install</span> R</span></code><code><span><span>#然后安装需要的库：</span></span></code><code><span>conda <span>install</span> -c conda-forge openmp</span></code><code><span>conda <span>install</span> -c anaconda boost</span></code><code><span>conda <span>install</span> numpy scipy cython numba matplotlib scikit-learn h5py click</span></code><code><span>conda <span>install</span> r-devtools</span></code><code><span>conda <span>install</span> r-pkgdown</span></code><code><span>conda <span>install</span> r-ragg</span></code><code><span><br></span></code><code><span><br></span></code><code><span>install.packages(<span>"devtools"</span>)</span></code><code><span><span>library</span>(devtools)</span></code><code><span>install_github(<span>"velocyto-team/velocyto.R"</span>)</span></code><code><span><span>library</span>(velocyto.R)</span></code><code><span><br></span></code><code><span><br></span></code><code><span><br></span></code><code><span><span>export</span> OPENBLAS_NUM_THREADS=<span>1</span> </span></code><code><span>conda <span>activate</span> velocity </span></code><code><span>velocyto run10x -m /<span>data</span>/yudonglin/<span>reference</span>/singcell/velocity/hg19_rmsk.gtf /data3/yudonglin/metastases/sra/CRCLM_COL18_PBMC_TCAGAAAT /<span>data</span>/yudonglin/<span>reference</span>/singcell/refdata-gex-GRCh38<span>-2020</span>-A/genes/genes.gtf </span></code><code><span> </span></code><code><span><br></span></code><code><span><br></span></code><code><span><span>export</span> OPENBLAS_NUM_THREADS=<span>1</span> </span></code><code><span>conda <span>activate</span> velocity </span></code><code><span>velocyto run10x -m /<span>data</span>/yudonglin/<span>reference</span>/singcell/velocity/mm10_rmsk.gtf /data3/yudonglin/cancer/<span>data</span>/B16F0 /<span>data</span>/yudonglin/<span>reference</span>/singcell/refdata-gex-mm10<span>-2020</span>-A/genes/genes.gtf </span></code><code><span> </span></code><code><span><br></span></code><code><span><br></span></code><code><span><br></span></code><code><span><span>#conda remove -n homer --all</span></span></code><code><span><span>#conda remove -n velocyto --all</span></span></code><code><span>conda <span>activate</span> velocyto</span></code><code><span>python</span></code><code><span><br></span></code><code><span><br></span></code><code><span><span>#conda create -n velocyto python=3.9</span></span></code><code><span>conda <span>activate</span> velocyto</span></code><code><span>conda <span>install</span> R</span></code><code><span><span>#然后安装需要的库：</span></span></code><code><span>conda <span>install</span> -c conda-forge openmp</span></code><code><span>conda <span>install</span> -c anaconda boost</span></code><code><span>conda <span>install</span> numpy scipy cython numba matplotlib scikit-learn h5py click</span></code><code><span>conda <span>install</span> r-devtools</span></code><code><span>conda <span>install</span> r-pkgdown</span></code><code><span>conda <span>install</span> r-ragg</span></code><code><span>conda <span>install</span> -c conda-forge -c bioconda cellrank</span></code><code><span><br></span></code><code><span>conda <span>install</span> -c bioconda scvelo</span></code><code><span><br></span></code><code><span><br></span></code><code><span><br></span></code><code><span><br></span></code></pre></section><p><img data-galleryid="" data-imgfileid="100025333" data-ratio="0.15781487101669195" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/kZ1wdgAscBq9WElrnNmwwWKxmVlFicuUqdY0icKPU2HgzokmV6IicDiaVYhn1zVcTkZoujXvyL21BrwAaic2bzR44gQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1318" src="https://mmbiz.qpic.cn/mmbiz_png/kZ1wdgAscBq9WElrnNmwwWKxmVlFicuUqdY0icKPU2HgzokmV6IicDiaVYhn1zVcTkZoujXvyL21BrwAaic2bzR44gQ/640?wx_fmt=png&amp;from=appmsg"></p><p><img data-galleryid="" data-imgfileid="100025332" data-ratio="0.6018518518518519" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/kZ1wdgAscBq9WElrnNmwwWKxmVlFicuUqqnJEUrBwvZAahjVC9ohDW1eIdyEPicPO51c4nKqUMAPWH06YK3pbHiaw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/kZ1wdgAscBq9WElrnNmwwWKxmVlFicuUqqnJEUrBwvZAahjVC9ohDW1eIdyEPicPO51c4nKqUMAPWH06YK3pbHiaw/640?wx_fmt=png&amp;from=appmsg"><span></span></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/vl2CWFBg7I5SlUh-ejvOBg",target="_blank" rel="noopener noreferrer">原文链接</a>
