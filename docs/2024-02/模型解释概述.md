---
title: "模型解释概述"
date: 2024-02-05T02:51:44Z
draft: ["false"]
tags: [
  "fetched",
  "医学和生信笔记"
]
categories: ["Acdemic"]
---
模型解释概述 by 医学和生信笔记
------
<div><section><span>关注公众号，发送</span><strong>R语言</strong><span>或</span><strong>python</strong><span>，可获取资料</span><span></span></section><section><mp-common-profile data-pluginname="mpprofile" data-id="MzUzOTQzNzU0NA==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84R9YDc8IDhqWAHTrZsMuhDpFlw4scqOl1ZVWpeY77cdibaSzPeGALfkEhdVpwHzVibHCRSYZg4csB43g/0?wx_fmt=png" data-nickname="医学和生信笔记" data-alias="yxhsxbj" data-signature="外科医生👨‍⚕️的R语言和生信学习🔖" data-from="2" data-weuitheme="light"></mp-common-profile></section><section data-role="outer" label="edit by 135editor"><section data-role="paragraph"><section data-role="outer" label="edit by 135editor"><section data-role="paragraph"><section data-role="outer" label="edit by 135editor"><section data-role="paragraph"><section data-role="outer"><section data-role="outer" label="edit by 135editor"><section data-tools="135编辑器" data-id="28"><p data-brushtype="text" hm_fix="440:185"><span>💡专注R语言在🩺生物医学中的使用</span></p></section></section></section></section></section><hr><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><p data-tool="mdnice编辑器"><span><span>设为“</span><strong><span>星标</span></strong><span>”，精彩不错过</span></span><br></p><hr><p data-tool="mdnice编辑器"><span><strong></strong></span></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><p data-tool="mdnice编辑器">对于一般线性回归、逻辑回归、cox回归这种模型来说，它的预测结果很好解释，比如说对于线性回归来说，它的解释就是：自变量每增加一个单位，因变量变化多少倍。每个自变量都有系数，这个系数就可以说明该变量对于因变量的重要程度。</p><p data-tool="mdnice编辑器">但是对于许多机器学习模型来说，它们的预测结果很难解释。比如对于支持向量机模型，你该怎么解释它的预测结果呢？你该怎么确定每个预测变量的重要性呢？如何量化它们呢？</p><p data-tool="mdnice编辑器">模型的可解释性在医学领域又是非常重要的。统计学家或者医生都喜欢OR值/HR值这种直观的解释，医学不喜欢“黑盒子”。其他领域亦是如此。</p><blockquote data-tool="mdnice编辑器"><p>有两个领域最不喜欢不确定性，一个和钱有关（金融），另一个和命有关（医学）。</p></blockquote><p data-tool="mdnice编辑器">所以发展出了各种可以解释这种复杂模型的方法。</p><p data-tool="mdnice编辑器">总的来说，模型解释可以分为两种类型：</p><ul data-tool="mdnice编辑器"><li><section><strong>局部解释</strong>（local explanation），又可以被称为<code>instance-level explanation</code>，是针对单个实例（单个观测，单个样本）的预测结果的解释。</section></li><li><section><strong>全局解释</strong>（global explanation），又可以被称为<code>dataset-level explanation</code>，是针对整个数据或者模型整体的预测进行的解释。</section></li></ul><p data-tool="mdnice编辑器">除了上面这种分类方法外，还可以分为<strong>针对特定模型的解释</strong>和<strong>模型无关的解释</strong>：</p><ul data-tool="mdnice编辑器"><li><section>针对于特定模型（model-specific）的解释：</section></li></ul><p data-tool="mdnice编辑器">有些模型历史悠久，而且研究非常透彻，所以出现了很多针对此类模型的专用解释方法，比如对于线性模型，就可以使用正态QQ图、模型诊断图等方法进行检查。除此之外还有随机森林模型等，也有专门的解释方法。</p><ul data-tool="mdnice编辑器"><li><section>模型无关（model-agnostic）的解释：</section></li></ul><p data-tool="mdnice编辑器">这类方法不管是什么样的模型都可以使用，是一类通用的模型解释方法，所以被称为model-agnostic approach。通常说起模型解释，比较常见的也是与模型无关的解释方法。</p><p data-tool="mdnice编辑器"><strong>常见的局部解释方法可以分为3类：</strong></p><p data-tool="mdnice编辑器">1.第一类是分析模型对特定观测的预测值与平均预测值有何不同，以及如何把这些差异分配到各个预测变量中。这种方法被称为<strong>变量（或特征）归因</strong>法（variable attributions）。这类方法包括：</p><ul data-tool="mdnice编辑器"><li><section><strong>分解解释</strong>，break-down</section></li><li><section><strong>Shaply加性解释</strong>，SHaply Additive Explanations，简称<strong>SHAP</strong></section></li></ul><p data-tool="mdnice编辑器">2.第二类方法是使用一个简单的函数解释模型，主要围绕感兴趣的观测进行解释。这种方法包括：</p><ul data-tool="mdnice编辑器"><li><section>局部代理解释，Local Interpretable Model-agnostic Explanations，简称为<strong>LIME</strong></section></li></ul><p data-tool="mdnice编辑器">3.第三类方法主要研究：如果单个预测变量的值发生变化，模型的预测结果会如何变化。这类方法包括：</p><ul data-tool="mdnice编辑器"><li><section><strong>CP剖面图</strong>（ceteris-paribus profiles，或者ceteris-paribus plot）</section></li><li><section><strong>局部诊断图</strong>，local-diagnostics</section></li></ul><p data-tool="mdnice编辑器">常见的全局解释方法如下：</p><ul data-tool="mdnice编辑器"><li><section>模型性能</section></li><li><section>变量重要性</section></li><li><section>部分依赖图，partial-dependent profile或者partial-dependent plot，简称PDP</section></li><li><section>残差诊断图</section></li></ul><p data-tool="mdnice编辑器">很多全局解释方法都是和局部解释方法密切联系的，理解了局部解释方法，那么全局解释方法就简单的多了。</p><p data-tool="mdnice编辑器">目前在R中进行模型解释是非常简单的，难的是理解这些方法的原理和解读。以上介绍的所有方法都可以通过<code>DALEX</code>（moDel Agnostic Language for Exploration and eXplanation）和<code>DALEXtra</code>实现，我们后面讲解也是基于这两个包进行，所以只要安装这两个包即可。</p><pre data-tool="mdnice编辑器"><code>install.packages(<span>"DALEX"</span>)<br>install.packages(<span>"DALEXtra"</span>)<br></code></pre><p data-tool="mdnice编辑器">同时这两个R包也是<code>DrWhy.AI</code>生态系统的一部分。<code>DrWhy.AI</code>包括一系列专门用于模型解释的工具（R和Python都适用），包括全套的模型解释解决方案。这些工具具有统一的语法规则且使用简单。</p><p data-tool="mdnice编辑器"><code>DrWhy.AI</code>之于模型解释，就像<code>tidymodels</code>和<code>mlr3</code>之于机器学习。除了传统的分类和回归问题外，<code>DrWhy.AI</code>还有可用于生存分析模型解释的专用R包：<code>survex</code>。</p><p data-tool="mdnice编辑器">该系列工具的部分成员和使用逻辑可用下图表示：</p><figure data-tool="mdnice编辑器"><img data-imgfileid="100017234" data-ratio="0.7305555555555555" data-type="png" data-w="1080" data-src="https://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84RicJurTpNmiad0OiaLtMITS064xYwQebDxQ66GXQuhUHQAPRKkIOv9dOTEgoqXauD2hff6RjoUU0yRzA/640?wx_fmt=png&amp;from=appmsg" src="https://mmbiz.qpic.cn/mmbiz_png/tpAC6lR84RicJurTpNmiad0OiaLtMITS064xYwQebDxQ66GXQuhUHQAPRKkIOv9dOTEgoqXauD2hff6RjoUU0yRzA/640?wx_fmt=png&amp;from=appmsg"><figcaption>grammar_of_explanations</figcaption></figure><p data-tool="mdnice编辑器">该系列工具进行模型解释主要是分为3个步骤：</p><ol data-tool="mdnice编辑器"><li><section>对于不同工具建立的模型，比如不同的R包（例如：<code>e1071</code>/<code>randomforest</code>/<code>rpart</code>/<code>knn</code>/<code>tidymodels</code>/<code>caret</code>/<code>mlr3</code>，等）建立的模型，或者Python建立的模型，<strong>首先建立对这些模型的解释器</strong>；</section></li><li><section>然后<strong>选择解释方法</strong>；</section></li><li><section>最后<strong>进行相关的可视化</strong>。</section></li></ol><p data-tool="mdnice编辑器">每个步骤只需要1行代码即可，使用极其简单！大大简化了模型解释的工作量。后面我会详细介绍各种模型解释方法以及在R语言中的实现。</p><p data-tool="mdnice编辑器">参考书籍：</p><ol data-tool="mdnice编辑器"><li><section>Interpretable machine learning. 这本书是作者在担任临床研究的统计学专家时当做副业写成的，真的是太羡慕作者的工作状态了！作者在前言中写到：This book started as a side project when I was working as a statistician in clinical research. I worked four days a week（<strong>1周只工作4天</strong>）, and on my “day off” I worked on side projects.</section></li></ol><p data-tool="mdnice编辑器">中文翻译版：https://blog.csdn.net/jiazhen/article/details/126824573</p><ol start="2" data-tool="mdnice编辑器"><li><section>Explanatory Model Analysis：Explore, Explain, and Examine Predictive Models. With examples in R and Python. <code>DALEX</code>说明书。</section></li></ol><p data-tool="mdnice编辑器">公众号后台回复<strong>模型解释</strong>即可获取模型解释合集。</p></section><p><span><br></span></p><hr><blockquote><p><span><strong>联系我们，关注我们</strong></span></p><ol><li><section>免费QQ交流群1：613637742</section></li><li><section>免费QQ交流群2：608720452</section></li><li><section>公众号消息界面关于作者获取联系方式</section></li><li><section>知乎、CSDN、简书同名账号</section></li><li><section>哔哩哔哩：阿越就是我</section></li></ol></blockquote></section></section></section></section></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/dhmJMBa53Jtmd0HUt0Q9OQ",target="_blank" rel="noopener noreferrer">原文链接</a>
