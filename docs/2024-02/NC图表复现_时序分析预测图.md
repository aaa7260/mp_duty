---
title: "NC图表复现-时序分析预测图"
date: 2024-02-26T23:41:11Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
NC图表复现-时序分析预测图 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来复现NC上一张时序分析预测图，<strong>「图形咋看起来比较简单，但是细品起来细节也是非常的多」</strong>，数据为论文源数据，小编进行了图形绘制，整个过程仅参考。希望对各位观众老爷能有所帮助。<strong>「数据代码已经整合上传到会员交流群」</strong>，购买过小编VIP的朋友可在所加的会员群内获取下载，有需要的朋友可关注文末介绍加入VIP交流群。</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关于永久群内容的说明</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>给予长期支持我们的忠实读者们一个特别待遇：购买小编2023年VIP会员文档的读者，<strong>「将自动获得2024年及以后更新的绘图文档代码，无需额外付费目前已包含100+学习案例。」</strong>有需要学习数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>下单购买，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码。购买会员文档后微信发小编订单号即邀请进新的会员交流群。</p><span>❞</span></blockquote><p data-tool="mdnice编辑器"><strong>「2024更新的绘图内容同时包含数据+代码+markdown注释文档+文档清单」</strong></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>原图</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-imgfileid="100026038" data-ratio="0.3685185185185185" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZsGhqTXUpxb0fO6OLfNo9pjpL7pFk7G0zvesqNF0FO0BcVT62mgU6iamXoR9rTJofbjepSxGyMiaIg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZsGhqTXUpxb0fO6OLfNo9pjpL7pFk7G0zvesqNF0FO0BcVT62mgU6iamXoR9rTJofbjepSxGyMiaIg/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>论文</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-imgfileid="100026036" data-ratio="0.37222222222222223" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZsGhqTXUpxb0fO6OLfNo9pEQyf6em3GOQlVNesvvUafyFwC8DMNhfdnw7vt0mRE7s4PcsmeHmHFg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZsGhqTXUpxb0fO6OLfNo9pEQyf6em3GOQlVNesvvUafyFwC8DMNhfdnw7vt0mRE7s4PcsmeHmHFg/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>复现结果</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-imgfileid="100026035" data-ratio="0.4981481481481482" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZsGhqTXUpxb0fO6OLfNo9pibHkIOfIe7h9dMQqMnCOLA6GsGicaJ0dJ44j61tnNGjrP0Ip6aRN07RQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZsGhqTXUpxb0fO6OLfNo9pibHkIOfIe7h9dMQqMnCOLA6GsGicaJ0dJ44j61tnNGjrP0Ip6aRN07RQ/640?wx_fmt=png&amp;from=appmsg"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>图例部分就不做修改了，有需要的可以自定义更改。</p><span>❞</span></blockquote><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br><span>library</span>(ggtext)<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>data &lt;- read_tsv(<span>"data2.txt"</span>)<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>df &lt;- read_tsv(<span>"data1.txt"</span>) %&gt;% mutate(full_upper=GPPFULL+full_se,<br>                                       full_lower=GPPFULL-full_se,<br>                                       bgc_upper=GPPBGC+bgc_se,<br>                                       bgc_lower=GPPBGC-bgc_se)<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>ggplot()+<br>  annotate(geom=<span>"rect"</span>,xmin=<span>2011</span>,xmax=<span>Inf</span>,ymin=-<span>Inf</span>,ymax=<span>0</span>,alpha=<span>.2</span>)+<br>  geom_line(data=df %&gt;% select(<span>1</span>,<span>2</span>,<span>4</span>) %&gt;% pivot_longer(-id),<br>            aes(x = id, y = value,color=name),size=<span>1</span>)+<br>  geom_ribbon(data=df %&gt;% select(<span>1</span>,<span>2</span>,<span>6</span>,<span>7</span>),<br>              aes(x=id,y=GPPFULL,ymin = full_upper, ymax = full_lower),<br>              fill = <span>"#0B7751"</span>, alpha = <span>0.5</span>)+<br>  geom_ribbon(data=df %&gt;% select(<span>1</span>,<span>4</span>,<span>8</span>,<span>9</span>),<br>              aes(x=id,y=GPPBGC,ymin = bgc_upper, ymax = bgc_lower),<br>              fill = <span>"#7294D4"</span>, alpha = <span>0.5</span>)+<br>  geom_hline(yintercept = <span>100</span>,linetype=<span>"dashed"</span>,color=<span>"#FF7F00"</span>,size=<span>1</span>)+<br>  geom_errorbar(data=data,aes(MedianYear,mean*<span>500</span>,<br>                              ymin=(mean-se)*<span>500</span>,<br>                              ymax=(mean+se)*<span>500</span>),<br>                width=<span>1.8</span>,size=<span>1</span>,color=<span>"#FF7F00"</span>)+<br>  geom_point(data=data,aes(MedianYear,mean*<span>500</span>),color=<span>"#FF7F00"</span>,<br>             shape=<span>23</span>,fill=<span>"#FDD262"</span>,size=<span>4</span>)+<br>  scale_color_manual(values = c(GPPBGC=<span>"#7294D4"</span>,GPPFULL=<span>"#0B7751"</span>))+<br>  scale_x_continuous(expa=c(<span>0</span>,<span>0</span>))+<br>  theme_test() +<br>  theme(axis.title.y.right = element_markdown(size=<span>10</span>),<br>        axis.title.y.left = element_markdown(size=<span>10</span>,color=<span>"#FF7F00"</span>),<br>        axis.text.x=element_text(color=<span>"black"</span>),<br>        axis.text.y.left = element_text(color=<span>"#FF7F00"</span>),<br>        plot.margin = unit(c(<span>1</span>,<span>1</span>,<span>1</span>,<span>1</span>),unit=<span>"cm"</span>),<br>        legend.title = element_blank(),<br>        legend.background = element_blank(),<br>        legend.key = element_blank(),<br>        legend.position =c(<span>0.5</span>,<span>0.9</span>))<br></code></pre><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节介绍到此结束，有需要学习数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>下单购买，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码。购买会员文档后微信发小编订单号即邀请进新的会员交流群。</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝扫一扫</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-imgfileid="100026037" data-ratio="1.5806451612903225" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZsGhqTXUpxb0fO6OLfNo9piaf6czSVksTReSvgHEVA894wiawnhgtgs82LUOBiazicAkvBXlNLFibvXWw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="682" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZsGhqTXUpxb0fO6OLfNo9piaf6czSVksTReSvgHEVA894wiawnhgtgs82LUOBiazicAkvBXlNLFibvXWw/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝店铺(有需要欢迎关注)</span><span></span></h3><p><img data-galleryid="" data-imgfileid="100019415" data-ratio="1.0210420841683367" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAbvhPDLGT8NaialEsht92PTYNJWpmVLfoYGic1uha5FyBrDCibibZCLjiazgvpT1XcdwibfVywD2el0VAgg/640?wx_fmt=jpeg" data-type="jpeg" data-w="998" src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAbvhPDLGT8NaialEsht92PTYNJWpmVLfoYGic1uha5FyBrDCibibZCLjiazgvpT1XcdwibfVywD2el0VAgg/640?wx_fmt=jpeg"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><p><img data-galleryid="" data-imgfileid="100016185" data-ratio="0.3194444444444444" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYib6Vf5Lfu4s64dJIEWhdGMvrcDEx2Rxgd91TOF5sjqy47Wqf2cTO1c5Nhdibh8G5IhOnR53j6XKrw/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYib6Vf5Lfu4s64dJIEWhdGMvrcDEx2Rxgd91TOF5sjqy47Wqf2cTO1c5Nhdibh8G5IhOnR53j6XKrw/640?wx_fmt=png"></p></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/CwRIBEDOFuCxwJRYYTXV5w",target="_blank" rel="noopener noreferrer">原文链接</a>
