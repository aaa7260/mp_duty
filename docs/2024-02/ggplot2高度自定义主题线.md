---
title: "ggplot2高度自定义主题线"
date: 2024-02-25T14:27:37Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
ggplot2高度自定义主题线 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来介绍如何使用通过ggplot2预设主题来自定义theme()函数修改轴线，通过一个分面的例子来进行展示，整个过程仅参考，希望对各位观众老爷能有所帮助。</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关于永久群内容的说明</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>给予长期支持我们的忠实读者们一个特别待遇：购买小编2023年VIP会员文档的读者，<strong>「将自动获得2024年及以后更新的绘图文档代码，无需额外付费目前已包含100+学习案例。」</strong>有需要学习数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>下单购买，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码。购买会员文档后微信发小编订单号即邀请进新的会员交流群</p><span>❞</span></blockquote><p data-tool="mdnice编辑器"><strong>「2024更新的绘图内容同时包含数据+代码+markdown注释文档+文档清单」</strong></p><figure data-tool="mdnice编辑器"><img data-imgfileid="100026015" data-ratio="0.6175925925925926" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVZP0OIJPEYJ1hohxnn1Io6DoxAauskvYyZ4jaiczM3J9mLqvibL9yRibRQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVZP0OIJPEYJ1hohxnn1Io6DoxAauskvYyZ4jaiczM3J9mLqvibL9yRibRQ/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>最终结果</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-imgfileid="100026012" data-ratio="0.5361111111111111" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVgHBibHfnJf9hjneTXs831zsJzg5tbdMiaqq3TjtHWSDQ9P9Iic3Anx9aA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVgHBibHfnJf9hjneTXs831zsJzg5tbdMiaqq3TjtHWSDQ9P9Iic3Anx9aA/640?wx_fmt=png&amp;from=appmsg"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>通常绘图在进行分面操作时，有时需要将面板间距设置为0，通过这样的操作会减小面板间间距，但是也会产生一个问题，即面板间的轴线会叠在一起形成一条粗线。在默认的theme函数中想要去除面板间的轴线则会发现axis.line.y等主题设置项会不执行操作，若使用theme_classic()主题的结果则会使得最右侧会缺少一条轴线。那么该如何自定义设置theme函数来达到所需的效果哪，请看下方案例。</p><span>❞</span></blockquote><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>theme_bw()</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>mpg %&gt;% filter(drv %<span>in</span>% c(<span>"f"</span>,<span>"r"</span>)) %&gt;% <br>  ggplot(., aes(x = displ, y = hwy, color = class)) +<br>  geom_point()+<br>  facet_wrap(.~drv,nrow=<span>1</span>)+<br>  theme_bw()+<br>  theme(plot.background = element_rect(fill=<span>"white"</span>), <span># 控制整个图形背景</span><br>        panel.background = element_rect(fill=<span>"white"</span>), <span># 控制图形绘图面板背景</span><br>        panel.grid.major = element_blank(), <span># 移除主网格线</span><br>        panel.grid.minor = element_blank(),<br>        panel.spacing.x=unit(<span>0</span>,<span>"cm"</span>),<br>        strip.background.x =element_rect(fill=<span>"grey"</span>,color=<span>"black"</span>))<br></code></pre><figure data-tool="mdnice编辑器"><img data-imgfileid="100026013" data-ratio="0.5361111111111111" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVWDMvMeTgUOFYEibnOrct9ARXcsia2mMebk0e9s2Xnic2xf0KXPXxLicFKg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVWDMvMeTgUOFYEibnOrct9ARXcsia2mMebk0e9s2Xnic2xf0KXPXxLicFKg/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>theme_classic()</span><span></span></h3><p data-tool="mdnice编辑器">使用此主题后会发现右侧会缺少一条线</p><pre data-tool="mdnice编辑器"><span></span><code>mpg %&gt;% filter(drv %<span>in</span>% c(<span>"f"</span>,<span>"r"</span>)) %&gt;% <br>  ggplot(., aes(x = displ, y = hwy, color = class)) +<br>  geom_point()+<br>  facet_wrap(.~drv,nrow=<span>1</span>)+<br>  theme_classic()+<br>  theme(plot.background = element_rect(fill=<span>"white"</span>), <span># 控制整个图形背景</span><br>        panel.background = element_rect(fill=<span>"white"</span>), <span># 控制图形绘图面板背景</span><br>        panel.grid.major = element_blank(), <span># 移除主网格线</span><br>        panel.grid.minor = element_blank(),<br>        panel.spacing.x=unit(<span>0</span>,<span>"cm"</span>),<br>        strip.background.x =element_rect(fill=<span>"grey"</span>,color=<span>"black"</span>))<br></code></pre><figure data-tool="mdnice编辑器"><img data-imgfileid="100026014" data-ratio="0.5361111111111111" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVicJPYTTeHicnKwfN2icsTO83eVYWe1NZStBNJrFFKqiaXrvaQ4xO40dlQQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVicJPYTTeHicnKwfN2icsTO83eVYWe1NZStBNJrFFKqiaXrvaQ4xO40dlQQ/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>自定义theme</span><span></span></h3><p data-tool="mdnice编辑器">若要使右侧的线条可以通过主题元素进行自定义，我们可以通过添加一条辅助轴线的方式来将Y轴右侧轴线变为实际可操作的元素。</p><pre data-tool="mdnice编辑器"><span></span><code>mpg %&gt;% filter(drv %<span>in</span>% c(<span>"f"</span>,<span>"r"</span>)) %&gt;% <br>  ggplot(., aes(x = displ, y = hwy, color = class)) +<br>  geom_point()+<br>  scale_y_continuous(sec.axis = sec_axis(~ ., name = <span>""</span>))+<br>  facet_wrap(.~drv,nrow=<span>1</span>)+<br>  theme(plot.background = element_rect(fill=<span>"white"</span>), <span># 控制整个图形背景</span><br>        panel.background = element_rect(fill=<span>"white"</span>), <span># 控制图形绘图面板背景</span><br>        panel.grid.major = element_blank(), <span># 移除主网格线</span><br>        panel.grid.minor = element_blank(), <span># 移除网格线</span><br>        panel.spacing.x=unit(<span>0</span>,<span>"cm"</span>),<br>        strip.background.x =element_rect(fill=<span>"grey"</span>,color=<span>"black"</span>),<br>        axis.line.x=element_line(color=<span>"black"</span>),<br>        axis.line.y.left = element_line(color=<span>"black"</span>),<br>        axis.line.y.right = element_line(color=<span>"black"</span>),<br>        axis.text.y.right = element_blank(),<br>        axis.ticks.y.right = element_blank())<br></code></pre><figure data-tool="mdnice编辑器"><img data-imgfileid="100026011" data-ratio="0.5361111111111111" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVgHBibHfnJf9hjneTXs831zsJzg5tbdMiaqq3TjtHWSDQ9P9Iic3Anx9aA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVgHBibHfnJf9hjneTXs831zsJzg5tbdMiaqq3TjtHWSDQ9P9Iic3Anx9aA/640?wx_fmt=png&amp;from=appmsg"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节介绍到此结束，很小的一个细节调整也许在某时会有用处。更多内容持续更新中</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝扫一扫</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-imgfileid="100026020" data-ratio="1.5806451612903225" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVSHyuJt8wrheAmUGJ0qsdSDFWQhtO1MlObLSHAktbYv71IMicms96TxQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="682" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAah8X4vVo6qqNiaLQbvG0uaVSHyuJt8wrheAmUGJ0qsdSDFWQhtO1MlObLSHAktbYv71IMicms96TxQ/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝店铺(有需要欢迎关注)</span><span></span></h3><p><img data-galleryid="" data-imgfileid="100019415" data-ratio="1.0210420841683367" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAbvhPDLGT8NaialEsht92PTYNJWpmVLfoYGic1uha5FyBrDCibibZCLjiazgvpT1XcdwibfVywD2el0VAgg/640?wx_fmt=jpeg" data-type="jpeg" data-w="998" src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAbvhPDLGT8NaialEsht92PTYNJWpmVLfoYGic1uha5FyBrDCibibZCLjiazgvpT1XcdwibfVywD2el0VAgg/640?wx_fmt=jpeg"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/kv6IxW3cWe5uecgwdxquPg",target="_blank" rel="noopener noreferrer">原文链接</a>
