---
title: "我薅到了国外的数据分析教材——多层次建模1（Multilevel Modelling）"
date: 2024-08-07T01:22:49Z
draft: ["false"]
tags: [
  "fetched",
  "数据分析师修炼笔记"
]
categories: ["Acdemic"]
---
我薅到了国外的数据分析教材——多层次建模1（Multilevel Modelling） by 数据分析师修炼笔记
------
<div><p>过去5年，一直在做给留学生R语言和数据分析的课程辅导，所以累积了很多课件，其中不乏很好的内容，就解析分享上来。</p><p><strong><img data-ratio="1" data-src="https://res.wx.qq.com/t/wx_fed/we-emoji/res/v1.3.10/assets/Expression/Expression_67@2x.png" data-w="128" src="https://res.wx.qq.com/t/wx_fed/we-emoji/res/v1.3.10/assets/Expression/Expression_67@2x.png"> 第一节的教案的主要内容：</strong></p><p>如何使用R进行基本数据操作和EDA分析，并在贯穿课程的开源数据集GCSE EXAM Score上进行了一系列代码演示。<span></span></p><p><strong><img data-ratio="1" data-src="https://res.wx.qq.com/t/wx_fed/we-emoji/res/v1.3.10/assets/Expression/Expression_67@2x.png" data-w="128" src="https://res.wx.qq.com/t/wx_fed/we-emoji/res/v1.3.10/assets/Expression/Expression_67@2x.png"> EDA-单变量探索性分析</strong></p><section><ul><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre data-lang="bash"><code><span>attach(data)</span></code><code><span><span># 先看整体数据的统计结果（mean，分位数，计数等）</span></span></code><code><span>summary(data) </span></code><code><span>n &lt;- table(school) </span></code><code><span><span># 直方图——查看连续性单变量的分布</span></span></code><code><span>hist(table(school), xlab=<span>"Size"</span>, main=<span>"Distribution of school</span></span></code><code><span><span>sizes"</span>)</span></code><code><span><span># 概率矩阵表——查看离散型单变量的分布</span></span></code><code><span>prop.table(table(sex)) </span></code><code><span>prop.table(table(vrband))</span></code><code><span>prop.table(table(sch.type)) </span></code><code><span>data.sch &lt;- unique(data[,c(1,6)]) </span></code><code><span>prop.table(table(data.sch<span>$sch</span>.<span>type</span>))</span></code># 箱线图—查看离散型单变量的分布<code><span>barplot(prop.table(table(sex)))</span></code><code><span>barplot(prop.table(table(vrband)))</span></code><code><span>barplot(prop.table(table(sch.type)))</span></code></pre></section><p><strong><img data-src="https://res.wx.qq.com/t/wx_fed/we-emoji/res/v1.3.10/assets/Expression/Expression_67@2x.png" data-ratio="1" data-w="128" src="https://res.wx.qq.com/t/wx_fed/we-emoji/res/v1.3.10/assets/Expression/Expression_67@2x.png"> EDA-多变量探索性分析</strong><strong></strong></p><p><span>离散+连续，这里选择school（离散变量，表示所在学校）和gcse（连续变量，表示分数）</span></p><section><ul><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre data-lang="cs"><code><span><span>#无序的箱线图，可看出离散变量对连续变量的影响，即是否会出现分布的变化</span></span></code><code><span>means.sch &lt;- aggregate(gcse, <span>by</span>=list(school), mean)</span></code><code><span>names(means.sch) &lt;- c(<span>"Group.1"</span>, <span>"mean.gcse"</span>)</span></code><code><span>boxplot(gcse~school)</span></code><code><span>abline(h=<span>0</span>, col=<span>2</span>)</span></code><code><span>points(means.sch, col=<span>4</span>, pch=<span>16</span>)</span></code><code><span><span>#当离散变量是数值表现，即为顺序离散变量，可选择绘制顺序箱线图</span></span></code><code><span>ord.means.sch=order(means.sch[,<span>2</span>])</span></code><code><span>ordered.school &lt;- order(ord.means.sch)[school]</span></code><code><span>boxplot(gcse~ordered.school)</span></code><code><span>abline(h=<span>0</span>, col=<span>2</span>)</span></code><code><span>points(means.sch[ord.means.sch,<span>2</span>], col=<span>4</span>, pch=<span>16</span>)</span></code></pre></section><p><img data-galleryid="" data-imgfileid="100000342" data-ratio="0.5944954128440367" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/BibadMadR2tQ5mVGtTnZJictJAvoDLHH4ldtvT7XgububnkIxia8FAN8jJQWRmBxZ7USkGfoRZDEfccq7T2pxcaLA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="545" src="https://mmbiz.qpic.cn/mmbiz_png/BibadMadR2tQ5mVGtTnZJictJAvoDLHH4ldtvT7XgububnkIxia8FAN8jJQWRmBxZ7USkGfoRZDEfccq7T2pxcaLA/640?wx_fmt=png&amp;from=appmsg"></p><p>连续+连续，这里选择lr和gcse两个连续变量作为演示</p><p>对于分析两个连续变量之间的关系，就需要绘制折线图了<br></p><p><img data-galleryid="" data-imgfileid="100000343" data-ratio="0.5364341085271318" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/BibadMadR2tQ5mVGtTnZJictJAvoDLHH4ls3CocAvEyDLxbw6uLeSD4uZ8pSqUoo7pibb9E2IP0dicQ8iaHdzicqw0mg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="645" src="https://mmbiz.qpic.cn/mmbiz_png/BibadMadR2tQ5mVGtTnZJictJAvoDLHH4ls3CocAvEyDLxbw6uLeSD4uZ8pSqUoo7pibb9E2IP0dicQ8iaHdzicqw0mg/640?wx_fmt=png&amp;from=appmsg"></p><section><ul><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre data-lang="perl"><code><span><span>#选取数据</span></span></code><code><span>sel.sch &lt;- data.sch$school[c(<span>1</span>,<span>2</span>,<span>20</span>,<span>18</span>,<span>22</span>,<span>54</span>)]</span></code><code><span>subset &lt;- data[school %in% sel.sch,]</span></code><code><span>plot(subset$lr, subset$gcse, pch=<span>16</span>, cex=<span>0</span>.<span>2</span>,</span></code><code><span>col=se<span>q(1:length(sel.sch)</span>), xlab=<span>"lr"</span>, ylab=<span>"gcse"</span>)</span></code><code><span><span>#增加折线</span></span></code><code><span><span>for</span> (i in <span>1</span>:<span>length</span>(sel.sch)){</span></code><code><span> temp &lt;- data[school==sel.sch[i],]</span></code><code><span> abline(lm(gcse~lr, data=temp), col=i) </span></code><code><span>} </span></code><code><span>legend(<span>"bottomright"</span>, legend=paste(sel.sch,<span>"("</span>,n[sel.sch], <span>")"</span>), </span></code><code><span>col=se<span>q(1:length(sel.sch)</span>), lty=<span>1</span>, cex=<span>0</span>.<span>7</span>)</span></code></pre></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/ewuy4ThbN0FWrsYuGqaZSw",target="_blank" rel="noopener noreferrer">原文链接</a>
