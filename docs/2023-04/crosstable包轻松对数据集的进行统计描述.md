---
title: "crosstable包轻松对数据集的进行统计描述"
date: 2023-04-11T22:41:53Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
crosstable包轻松对数据集的进行统计描述 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><blockquote data-tool="mdnice编辑器"><span>❝</span><p>crosstable包是一个用于创建和分析交叉表的R语言包。交叉表（又称列联表或者列交叉表）是一种描述两个或多个分类变量的关系的表格。这种表格在统计分析和数据科学中非常常见，因为它们允许我们了解不同变量之间的关联和相互作用。crosstable包提供了一组简洁、易用的函数，帮助用户轻松创建、修改、分析和可视化交叉表。</p><span>❞</span></blockquote><blockquote data-tool="mdnice编辑器"><span>❝</span><p>有需要学习个性化数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>购买<strong>「2023年度会员」</strong> <code>初始价格99元</code>，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码；按照往年数据小编年产出约在150+以上</p><span>❞</span></blockquote><p data-tool="mdnice编辑器">购买后微信发小编订单截图即邀请进新的会员交流群，小编的文档为按年售卖，只包含当年度的<strong>「除系列课程外」</strong>的文档，有需要往年文档的朋友也可下单购买，需要了解更多信息的朋友欢迎交流咨询，<strong>「添加小编微信请备注，以提高沟通效率」</strong></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>加载R包</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>install.packages(<span>"crosstable"</span>)<br><span>library</span>(crosstable)<br><span>library</span>(tidyverse)<br><span>library</span>(survival)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>构建数据</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>mtcars2 = mtcars %&gt;% <br>  mutate(model=rownames(mtcars), <br>         vs=ifelse(vs==<span>0</span>, <span>"vshaped"</span>, <span>"straight"</span>),<br>         am=ifelse(am==<span>0</span>, <span>"auto"</span>, <span>"manual"</span>), <br>         across(c(<span>"cyl"</span>, <span>"gear"</span>), factor),<br>         .before=<span>1</span>) %&gt;% <br>  import_labels(mtcars_labels, name_from=<span>"name"</span>, label_from=<span>"label"</span>) %&gt;% <br>  as_tibble()<br></code></pre><blockquote data-tool="mdnice编辑器"><span>❝</span><p>由于crosstable函数仅支持两个分类变量，因此我们需要首先将mpg和cyl变量转换为分类变量。然后按am分组，并创建一个交叉表的列表。</p><span>❞</span></blockquote><pre data-tool="mdnice编辑器"><span></span><code>crosstable(mtcars2, c(mpg, cyl), by=am) %&gt;%<br>  as_flextable(keep_id=<span>TRUE</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.4641711229946524" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaibkToJdczksJNwT9Aic5xyEwknVu80wsibpg16ia8k7A8tTdbdn0VC9JSaudibVYw8SnickHgrkLdic2sQ/640?wx_fmt=png" data-type="png" data-w="935" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaibkToJdczksJNwT9Aic5xyEwknVu80wsibpg16ia8k7A8tTdbdn0VC9JSaudibVYw8SnickHgrkLdic2sQ/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>汇总展示</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>crosstable(mtcars2, c(am, mpg), by=vs, total=<span>"both"</span>) %&gt;% <br>  as_flextable(keep_id=<span>TRUE</span>)<br><br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.4641711229946524" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaibkToJdczksJNwT9Aic5xyEjKZT51ZZHGsdNN9GopecZNN6S9x6TNzfdJtJk6PXf2Is4WVbFVLxog/640?wx_fmt=png" data-type="png" data-w="935" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaibkToJdczksJNwT9Aic5xyEjKZT51ZZHGsdNN9GopecZNN6S9x6TNzfdJtJk6PXf2Is4WVbFVLxog/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>控制分类变量</span><span></span></h3><p data-tool="mdnice编辑器">使用crosstable包处理经过修改的mtcars数据集（mtcars3），并根据vs变量对am和cyl变量创建一个交叉表。始终显示缺失值（NA）以及以特定格式显示百分比。</p><pre data-tool="mdnice编辑器"><span></span><code>mtcars3 = mtcars2<br>mtcars3$cyl[<span>1</span>:<span>5</span>] = <span>NA</span><br>crosstable(mtcars3, c(am, cyl), by=vs, showNA=<span>"always"</span>, <br>           percent_digits=<span>0</span>, percent_pattern=<span>"{n} ({p_col}/{p_row})"</span>) %&gt;% <br>  as_flextable(keep_id=<span>TRUE</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.4641711229946524" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaibkToJdczksJNwT9Aic5xyEuPWibOh35Iy8hEakB2KrhSibu9uKuoiayayBte1vics04IGmdMflRkic4mg/640?wx_fmt=png" data-type="png" data-w="935" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaibkToJdczksJNwT9Aic5xyEuPWibOh35Iy8hEakB2KrhSibu9uKuoiayayBte1vics04IGmdMflRkic4mg/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>计算相关性系数</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(survival)<br>crosstable(mtcars2, where(is.numeric), cor_method=<span>"pearson"</span>, by=mpg) %&gt;% <br>  as_flextable(keep_id=<span>TRUE</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.6933158584534731" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaibkToJdczksJNwT9Aic5xyEAicibfPlxzDH0sUBB8j8w5JPbfwgXXXIwKDep2Fb68ZOkS9puYs8yYhg/640?wx_fmt=png" data-type="png" data-w="763" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaibkToJdczksJNwT9Aic5xyEAicibfPlxzDH0sUBB8j8w5JPbfwgXXXIwKDep2Fb68ZOkS9puYs8yYhg/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>生存分析</span><span></span></h3><p data-tool="mdnice编辑器">Crosstable 还能够描述生存数据。crosstable 函数不支持生存分析和随访数据。需要使用 survival 包的 survdiff() 函数计算生存曲线之间的差异，并使用 aggregate() 函数按 x 分组。</p><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(survival)<br>aml$surv = Surv(aml$time, aml$status)<br>crosstable(aml, surv, by=x, times=c(<span>0</span>,<span>50</span>,<span>150</span>), followup=<span>TRUE</span>) %&gt;% <br>  as_flextable(keep_id=<span>TRUE</span>)<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.43905635648754915" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaibkToJdczksJNwT9Aic5xyE2XxD6jU32MRdlGBw1L3ibJ1JK1M4uLdetnQIDpefBict7ZLS7LA2mpnw/640?wx_fmt=png" data-type="png" data-w="763" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaibkToJdczksJNwT9Aic5xyE2XxD6jU32MRdlGBw1L3ibJ1JK1M4uLdetnQIDpefBict7ZLS7LA2mpnw/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>小编微信</span><span></span></h3><p><img data-galleryid="" data-ratio="1" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg" data-type="jpeg" data-w="430" src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg"></p><h3 data-tool="mdnice编辑器"><span></span><span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-weui-theme="light" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section></section><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/IDV57hQEx5ngs2lmtPRrXA",target="_blank" rel="noopener noreferrer">原文链接</a>
