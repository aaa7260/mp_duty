---
title: "ML-with-R || tidyverse"
date: 2022-10-18T11:36:51Z
draft: ["false"]
tags: [
  "fetched",
  "医学生之学习生信"
]
categories: ["Acdemic"]
---
ML-with-R || tidyverse by 医学生之学习生信
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><p data-tool="mdnice编辑器">数据框转tibble：<code>as_tibble()</code></p><p data-tool="mdnice编辑器"><code>tibble()</code>函数创建tibble时，字符串不会自动转为因子，并且是按照顺序创建每一列的，也就是说后面的列可以用前面创建的列名进行数值计算操作</p><p data-tool="mdnice编辑器">用<code>[</code>筛选数据框的一列时，dataframe返回的是向量，tibble返回的则还是tibble</p><p data-tool="mdnice编辑器"><code>gather()</code>函数可以把宽数据转为长数据，<code>spread()</code>则是反向操作，即长数据转为宽数据，参数主要是key-value的一个键值对，key对应长数据一列分类变量的列名，value则是长数据数值变量的列名</p><p data-tool="mdnice编辑器">关于宽松数据与整洁数据的理解：整洁数据也就是长数据，每一列代表一个变量，每一行包含单独的观测数据。而宽松数据则类似于列联表的格式</p><p data-tool="mdnice编辑器">函数的副作用：函数执行计算之外的其他操作(例如绘图/更改环境)，就称函数有副作用</p><p data-tool="mdnice编辑器"><code>&lt;&lt;-</code>为超级赋值运算符，放在函数中会给变量赋值，会在<span>全局环境</span>中重新分配对象</p><pre data-tool="mdnice编辑器"><span></span><code>pure &lt;- <span><span>function</span></span>() {<br>  a &lt;- a + 1<br>  a<br>}<br><br>side_effect &lt;- <span><span>function</span></span>() {<br>  a &lt;&lt;- a + 1<br>  a<br>}<br><br>c(pure(), pure())<br><span># [1] 21 21</span><br>c(side_effect(), side_effect())<br><span># [1] 21 22</span><br></code></pre><p data-tool="mdnice编辑器"><code>vector()</code>也可以创建包含NULL元素的列表</p><pre data-tool="mdnice编辑器"><span></span><code>elementLengths &lt;- vector(<span>"list"</span>, length = 3)<br>elementLengths<br><span># [[1]]</span><br><span># NULL</span><br><span># </span><br><span># [[2]]</span><br><span># NULL</span><br><span># </span><br><span># [[3]]</span><br><span># NULL</span><br></code></pre><p data-tool="mdnice编辑器">匿名函数：在运行中定义的函数，在<code>map()</code>函数中function可以用<code>~</code>代替，x也可以被<code>.</code>代替</p><pre data-tool="mdnice编辑器"><span></span><code>listOfNumerics &lt;- list(a = rnorm(5), <br>                       b = rnorm(9),<br>                       c = rnorm(10))<br>map(listOfNumerics, ~. + 2)<br><span># $a</span><br><span># [1] 3.303616 2.657234 2.425238 1.985719</span><br><span># [5] 2.355868</span><br><span># </span><br><span># $b</span><br><span># [1] 2.336210 2.947165 1.815839 1.549297</span><br><span># [5] 2.725117 2.837421 2.547192 2.040629</span><br><span># [9] 3.411547</span><br><span># </span><br><span># $c</span><br><span># [1] 2.24827229 0.04744651 3.03820466</span><br><span># [4] 1.53446205 2.64250958 1.14538474</span><br><span># [7] 0.74769253 2.46643954 3.24977768</span><br><span># [10] 0.82271355</span><br></code></pre><p data-tool="mdnice编辑器">游走函数，只发挥函数的副作用，一般应用于绘图，<code>.x</code>引用想要遍历的列表操作，<code>.y</code>引用列表元素的名称/索引(或者数据框的索引)</p><pre data-tool="mdnice编辑器"><span></span><code>walk(listOfNumerics, hist)<br><br>iwalk(listOfNumerics, ~hist(.x, main = .y))<br></code></pre><p data-tool="mdnice编辑器"><code>map2()</code>可以同时遍历多个列表，可以用于为多变量输入的函数输入参数</p><pre data-tool="mdnice编辑器"><span></span><code>multipliers &lt;- list(0.5, 10, 3)<br><br>map2(.x = listOfNumerics, .y = multipliers, ~.x * .y)<br></code></pre><p data-tool="mdnice编辑器">数据框的本质就是元素按照列来排列的列表，<code>pmap()</code>可以通过输入一个数据框来为多变量函数输入多个参数</p><pre data-tool="mdnice编辑器"><span></span><code>arguments &lt;- expand.grid(n = c(100, 200),<br>                         mean = c(1, 10),<br>                         sd = c(1, 10))<br><br>arguments<br><br>par(mfrow = c(2, 4))<br><br>pmap(arguments, rnorm) %&gt;%<br>  iwalk(~hist(.x, main = paste(<span>"Element"</span>, .y)))<br></code></pre><blockquote data-tool="mdnice编辑器"><p>参考书:《机器学习实战 使用R、tidyverse和mlr》</p></blockquote></section><p>作者：杨裕农<br></p><p>校审：梁晓杰</p><section><section powered-by="xiumi.us"><section><section powered-by="xiumi.us"><section><section><svg viewbox="0 0 1 1"></svg></section></section><section><section><svg viewbox="0 0 1 1"></svg></section></section></section></section><section><section powered-by="xiumi.us"><p><strong>推荐阅读</strong></p></section></section><section><section powered-by="xiumi.us"><section><section><svg viewbox="0 0 1 1"></svg></section></section><section><section><svg viewbox="0 0 1 1"></svg></section></section></section></section></section><section powered-by="xiumi.us"><section><section powered-by="xiumi.us"><section><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1749972884732641287#wechat_redirect" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span data-positionback="static"><img data-ratio="0.4257143" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5TrywoXqsHqzicT92x36jHghoKCRnaWfFFJrcED22q5ZoqFjhK3PeQY9G9yw/640?wx_fmt=jpeg" data-type="jpeg" data-w="700" src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5TrywoXqsHqzicT92x36jHghoKCRnaWfFFJrcED22q5ZoqFjhK3PeQY9G9yw/640?wx_fmt=jpeg"></span></a></section></section></section><section><section powered-by="xiumi.us"><p><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1749972884732641287#wechat_redirect" textvalue="影像组学 | 系列笔记汇总帖" tab="innerlink" data-linktype="2"><strong>影像组学 | 系列笔记汇总帖</strong></a></p></section></section></section><section powered-by="xiumi.us"><section><section><svg viewbox="0 0 1 1"></svg></section></section></section><section powered-by="xiumi.us"><section><section powered-by="xiumi.us"><section><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1702351181395656711#wechat_redirect" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span data-positionback="static"><img data-ratio="0.3759259" data-src="https://mmbiz.qpic.cn/mmbiz_png/dgYTF46r3icZRUkM9O8JHXFXkoich5TrywxFd6fFWuXJjibaviahAdwY32aMkQSqKrFkWZl3FmHIjAwm1IYFZicQIXA/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/dgYTF46r3icZRUkM9O8JHXFXkoich5TrywxFd6fFWuXJjibaviahAdwY32aMkQSqKrFkWZl3FmHIjAwm1IYFZicQIXA/640?wx_fmt=png"></span></a></section></section></section><section><section powered-by="xiumi.us"><p><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1702351181395656711#wechat_redirect" textvalue="机器学习 | 系列笔记汇总帖" tab="innerlink" data-linktype="2"><strong>机器学习 | 系列笔记汇总帖</strong></a><br></p></section></section></section><section powered-by="xiumi.us"><section><section><svg viewbox="0 0 1 1"></svg></section></section></section><section powered-by="xiumi.us"><section><section powered-by="xiumi.us"><section><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1726566214476365829#wechat_redirect" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span data-positionback="static"><img data-ratio="0.4250248" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5TrywIB11rQfj30OXdkRttrYPrdJUMLTBjXbJkZcbReCsSEvTauhWC91CGA/640?wx_fmt=jpeg" data-type="jpeg" data-w="1007" src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5TrywIB11rQfj30OXdkRttrYPrdJUMLTBjXbJkZcbReCsSEvTauhWC91CGA/640?wx_fmt=jpeg"></span></a></section></section></section><section><section powered-by="xiumi.us"><p><br></p><p><strong><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1726566214476365829#wechat_redirect" textvalue="深度学习 | 系列笔记" tab="innerlink" data-linktype="2">深度学习 | 系列笔记汇总帖</a></strong></p></section></section></section><section powered-by="xiumi.us"><section><section><svg viewbox="0 0 1 1"></svg></section></section></section><section powered-by="xiumi.us"><section><section powered-by="xiumi.us"><section><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1723714009205440518#wechat_redirect" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span data-positionback="static"><img data-ratio="0.4258824" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5TrywcMicocppVg24UtXIDXqfxLN1BeaB4GqLmCSytfgrO0jQI5J5Zy0nTZA/640?wx_fmt=jpeg" data-type="jpeg" data-w="425" src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5TrywcMicocppVg24UtXIDXqfxLN1BeaB4GqLmCSytfgrO0jQI5J5Zy0nTZA/640?wx_fmt=jpeg"></span></a></section></section></section><section><section powered-by="xiumi.us"><p><br></p><p><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1723714009205440518#wechat_redirect" textvalue="TCGA文献复现系列" tab="innerlink" data-linktype="2"><strong>TCGA文献复现系列</strong></a></p></section></section></section><section powered-by="xiumi.us"><section><section><svg viewbox="0 0 1 1"></svg></section></section></section><section powered-by="xiumi.us"><section><section powered-by="xiumi.us"><section><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1959685332967227394#wechat_redirect" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span data-positionback="static"><img data-croporisrc="https://mmbiz.qlogo.cn/mmbiz_png/dgYTF46r3icZRUkM9O8JHXFXkoich5TrywqulSp9435zicSRXvLyZvzj2rbXISqib4xWpDRb7a1LaFsm38ibj1aTyHQ/0?wx_fmt=png" data-cropx1="0" data-cropx2="1135.4386634116572" data-cropy1="4.823636363636364" data-cropy2="429.30363636363643" data-ratio="0.37720848056537104" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5TrywwFlX4megAEXD8VxL0HBbUvL92xpic8GhNRM450M8YQBpISrhLSleANA/640?wx_fmt=jpeg" data-type="jpeg" data-w="1132" src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5TrywwFlX4megAEXD8VxL0HBbUvL92xpic8GhNRM450M8YQBpISrhLSleANA/640?wx_fmt=jpeg"></span></a></section></section></section><section><section powered-by="xiumi.us"><p><br></p><p><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1959685332967227394#wechat_redirect" textvalue="循环与批量" tab="innerlink" data-linktype="2"><strong>R语言</strong></a></p></section></section></section><section powered-by="xiumi.us"><section><section><svg viewbox="0 0 1 1"></svg></section></section></section><section powered-by="xiumi.us"><section><section powered-by="xiumi.us"><section><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1943132026228834306#wechat_redirect" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span data-positionback="static"><img data-ratio="0.4242424" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5Tryw84iabZlYHOaAn7ZRN4rNzgNFVEjicWiajG2lUNaCGDlKgyST7Dm9pSWqQ/640?wx_fmt=jpeg" data-type="jpeg" data-w="693" src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5Tryw84iabZlYHOaAn7ZRN4rNzgNFVEjicWiajG2lUNaCGDlKgyST7Dm9pSWqQ/640?wx_fmt=jpeg"></span></a></section></section></section><section><section powered-by="xiumi.us"><p><br></p><p><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1943132026228834306#wechat_redirect" textvalue="文献解读" tab="innerlink" data-linktype="2"><strong>文献精读</strong></a></p></section></section></section><section powered-by="xiumi.us"><section><section><svg viewbox="0 0 1 1"></svg></section></section></section><section powered-by="xiumi.us"><section><section powered-by="xiumi.us"><section><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1814006954114023427#wechat_redirect" textvalue="你已选中了添加链接的内容" tab="innerlink" data-linktype="1"><span data-positionback="static"><img data-ratio="0.425" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5Tryw2aicQbF76V0ia2fMmN7SD3S8WsKU9XKhp4UKiaNC5TrhqStCuziaPaPTVw/640?wx_fmt=jpeg" data-type="jpeg" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_jpg/dgYTF46r3icZRUkM9O8JHXFXkoich5Tryw2aicQbF76V0ia2fMmN7SD3S8WsKU9XKhp4UKiaNC5TrhqStCuziaPaPTVw/640?wx_fmt=jpeg"></span></a></section></section></section><section><section powered-by="xiumi.us"><p><br></p><p><a target="_blank" href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI0NjUyMTE2MQ==&amp;action=getalbum&amp;album_id=1814006954114023427#wechat_redirect" textvalue="绘图集" tab="innerlink" data-linktype="2"><strong>绘图集</strong></a></p></section></section></section><section powered-by="xiumi.us"><section><section><svg viewbox="0 0 1 1"></svg></section></section></section></section><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/_Sw7qbljEx4NfSRdLTyPzg",target="_blank" rel="noopener noreferrer">原文链接</a>
