---
title: "听说你无法下载SeuratData的单细胞示例数据"
date: 2022-08-26T08:01:52Z
draft: ["false"]
tags: [
  "fetched",
  "单细胞天地"
]
categories: ["Duty"]
---
听说你无法下载SeuratData的单细胞示例数据 by 单细胞天地
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><blockquote data-tool="mdnice编辑器"><p>我们写教程经常会使用 satijalab/seurat-data ，它内置了很多数据集，如果你还没有这个的seurat-data包 ，就自己去下载：</p></blockquote><pre data-tool="mdnice编辑器"><span></span><code>install.packages(<span>'devtools'</span>)<br>devtools::install_github(<span>'satijalab/seurat-data'</span>)<br><span>library</span>(SeuratData) <span>#加载seurat数据集  </span><br>getOption(<span>'timeout'</span>)<br>options(timeout=<span>10000</span>)<br>InstallData(<span>"pbmc3k"</span>)  <br>data(<span>"pbmc3k"</span>)  <br>sce &lt;- pbmc3k.final  <br></code></pre><p data-tool="mdnice编辑器">但是因为它这个包仍然是在GitHub，所以很多人下载失败， 另外它数据也是在外网，很多人网络有问题无法下载。所以后来我们推荐了一个TENxPBMCData 包，也蛮有意思的，安装和加载很方便：</p><pre data-tool="mdnice编辑器"><span></span><code><span># BiocManager::install('TENxPBMCData') # (286 KB)</span><br><span>library</span>(TENxPBMCData)<br>args(TENxPBMCData) <br></code></pre><p data-tool="mdnice编辑器">它里面有很多数据集，每个数据集都有自己的代号：</p><pre data-tool="mdnice编辑器"><span></span><code><span>function</span> (dataset = c(<span>"pbmc4k"</span>, <span>"pbmc68k"</span>, <span>"frozen_pbmc_donor_a"</span>, <br>    <span>"frozen_pbmc_donor_b"</span>, <span>"frozen_pbmc_donor_c"</span>, <span>"pbmc33k"</span>, <br>    <span>"pbmc3k"</span>, <span>"pbmc6k"</span>, <span>"pbmc8k"</span>, <span>"pbmc5k-CITEseq"</span>), as.sparse = TRUE) <br></code></pre><p data-tool="mdnice编辑器">我们任意选择一个数据集举例说明。</p><pre data-tool="mdnice编辑器"><span></span><code>tenx_pbmc4k &lt;- TENxPBMCData(dataset = <span>"pbmc4k"</span>)<br>tenx_pbmc4k<br>counts(tenx_pbmc4k)<br></code></pre><p data-tool="mdnice编辑器">可以看到，它是SingleCellExperiment对象格式，并不是我们常见的seurat对象哦。而且基因名字还不是常见的symbol，也是需要转换。所以使用起来对新手来说并不方便。</p><p data-tool="mdnice编辑器">还不如去着手解决无法下载SeuratData的单细胞示例数据的难题，其实如果你网络好，很容易批量下载里面的全部数据集，代码如下所示：</p><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(SeuratData) <br>df = AvailableData() <br>dts = rownames( df )<br>lapply(gsub(<span>'.SeuratData'</span>,<span>''</span>,dts), InstallData)<br></code></pre><p data-tool="mdnice编辑器">目前总共是21个数据集，从标题很容易看到不同数据集来源和意义：</p><p><img data-galleryid="" data-ratio="0.5253623188405797" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxr62BTtI5ya3iabMrfFlliamlicAhPQyWxwQJVwUwDicv5ibbzox6TjTsE5bcXd4UAR33ZUAibagqXrwjA/640?wx_fmt=png" data-type="png" data-w="1656" src="https://mmbiz.qpic.cn/mmbiz_png/cZNhZQ6j4wxr62BTtI5ya3iabMrfFlliamlicAhPQyWxwQJVwUwDicv5ibbzox6TjTsE5bcXd4UAR33ZUAibagqXrwjA/640?wx_fmt=png"></p><figure data-tool="mdnice编辑器"><figcaption>21个数据集</figcaption></figure><p data-tool="mdnice编辑器">前面的 批量下载和安装每个数据集 ，本质上就是调用 InstallData 函数而已，它就是下载一个压缩包，然后安装即可；</p><pre data-tool="mdnice编辑器"><span></span><code><span># http://seurat.nygenome.org/src/contrib/bmcite.SeuratData_0.3.0.tar.gz</span><br>install.packages(pkgs = pkgs, repos = getOption(x = <span>"SeuratData.repo.use"</span>), <br>        <span>type</span> = <span>"source"</span>, ...)<br></code></pre><p data-tool="mdnice编辑器">那么我们完全可以拼接处理全部的压缩包的下载路径，然后去网络比较好的地方批量下载即可：</p><pre data-tool="mdnice编辑器"><span></span><code>fs = paste0(<span>'http://seurat.nygenome.org/src/contrib/'</span>,dts,<span>'_'</span>,AvailableData()[,<span>2</span>],<span>'.tar.gz'</span>) <br>fs<br>write.table(fs,<span>'fs.txt'</span>,sep = <span>''</span>,row.names = <span>F</span>,col.names = <span>F</span>,quote = <span>F</span>)<br><br>lapply(fs, <span>function</span>(x){<br>  download.file(x ,  destfile =  basename(x))<br>})<br></code></pre><p data-tool="mdnice编辑器">全部的包下载链接是：</p><pre data-tool="mdnice编辑器"><span></span><code>http://seurat.nygenome.org/src/contrib/bmcite.SeuratData_0.3.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/bonemarrowref.SeuratData_1.0.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/cbmc.SeuratData_3.1.4.tar.gz<br>http://seurat.nygenome.org/src/contrib/celegans.embryo.SeuratData_0.1.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/fetusref.SeuratData_1.0.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/hcabm40k.SeuratData_3.0.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/humancortexref.SeuratData_1.0.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/ifnb.SeuratData_3.1.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/kidneyref.SeuratData_1.0.1.tar.gz<br>http://seurat.nygenome.org/src/contrib/lungref.SeuratData_2.0.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/mousecortexref.SeuratData_1.0.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/panc8.SeuratData_3.0.2.tar.gz<br>http://seurat.nygenome.org/src/contrib/pancreasref.SeuratData_1.0.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/pbmc3k.SeuratData_3.1.4.tar.gz<br>http://seurat.nygenome.org/src/contrib/pbmcMultiome.SeuratData_0.1.3.tar.gz<br>http://seurat.nygenome.org/src/contrib/pbmcref.SeuratData_1.0.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/pbmcsca.SeuratData_3.0.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/ssHippo.SeuratData_3.1.4.tar.gz<br>http://seurat.nygenome.org/src/contrib/stxBrain.SeuratData_0.1.1.tar.gz<br>http://seurat.nygenome.org/src/contrib/stxKidney.SeuratData_0.1.0.tar.gz<br>http://seurat.nygenome.org/src/contrib/thp1.eccite.SeuratData_3.1.5.tar.gz<br></code></pre><p data-tool="mdnice编辑器">最后下载成功会得到接近 4G的文件 ：</p><pre data-tool="mdnice编辑器"><span></span><code>ls -lh |cut -d<span>" "</span> -f7-<br><br>  100M Aug 24 12:09 bmcite.SeuratData_0.3.0.tar.gz<br>  411M Aug 24 12:15 bonemarrowref.SeuratData_1.0.0.tar.gz<br>   72M Aug 24 12:16 cbmc.SeuratData_3.1.4.tar.gz<br>  9.5M Aug 24 12:17 celegans.embryo.SeuratData_0.1.0.tar.gz<br>  725M Aug 24 12:29 fetusref.SeuratData_1.0.0.tar.gz<br>   80M Aug 24 12:30 hcabm40k.SeuratData_3.0.0.tar.gz<br>   37M Aug 24 12:33 humancortexref.SeuratData_1.0.0.tar.gz<br>  394M Aug 24 12:36 ifnb.SeuratData_3.1.0.tar.gz<br>  126M Aug 24 12:39 kidneyref.SeuratData_1.0.1.tar.gz<br>  833M Aug 24 12:48 lungref.SeuratData_2.0.0.tar.gz<br>   54M Aug 24 12:49 mousecortexref.SeuratData_1.0.0.tar.gz<br>  117M Aug 24 12:50 panc8.SeuratData_3.0.2.tar.gz<br>   47M Aug 24 12:53 pancreasref.SeuratData_1.0.0.tar.gz<br>  267M Aug 24 12:56 pbmcMultiome.SeuratData_0.1.3.tar.gz<br>   73M Aug 24 13:37 pbmcref.SeuratData_1.0.0.tar.gz<br>   56M Aug 24 13:38 pbmcsca.SeuratData_3.0.0.tar.gz<br>   43M Aug 24 13:40 ssHippo.SeuratData_3.1.4.tar.gz<br>  105M Aug 24 13:43 stxBrain.SeuratData_0.1.1.tar.gz<br>   15M Aug 24 13:48 stxKidney.SeuratData_0.1.0.tar.gz<br>  122M Aug 24 13:50 thp1.eccite.SeuratData_3.1.5.tar.gz<br></code></pre><p data-tool="mdnice编辑器">因为文件比较大，我们三天后发布在这个推文的留言下面给大家百度云网盘链接哈，当然了，你也可以自己根据上面的网页链接地址去进行下载，务必保证下载是完整的哦。</p><p data-tool="mdnice编辑器">有了这些压缩包文件，使用 前面的 install.packages 函数指定各个包文件路径，然后加上   type = "source", 就可以本地安装了，无需重新在线下载啦 ：</p><pre data-tool="mdnice编辑器"><span></span><code>install.packages(pkgs = pkgs, repos = getOption(x = <span>"SeuratData.repo.use"</span>), <br>        <span>type</span> = <span>"source"</span>, ...)<br></code></pre></section><p><br></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/t61DYZLnsuFGDdBm5irkww",target="_blank" rel="noopener noreferrer">原文链接</a>
