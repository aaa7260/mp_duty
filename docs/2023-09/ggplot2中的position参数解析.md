---
title: "ggplot2中的position参数解析"
date: 2023-09-19T23:18:18Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
ggplot2中的position参数解析 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来回答一个老爷的问题，介绍常见绘图案例中几个基本参数的设置问题，主要用在柱状图与箱线图中。下面小编通过两个案例来进行展示，图形仅供展示用过程仅参考，希望各位观众老爷能够喜欢。代码直接复制粘贴即可运行</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><h3 data-tool="mdnice编辑器"><span></span><span><span></span>加载R包</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br><span>library</span>(patchwork)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>导入数据</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>df &lt;- iris %&gt;% pivot_longer(-Species) %&gt;% <br>  group_by(Species) %&gt;% <br>  slice_head(n=<span>2</span>) %&gt;% <br>  ungroup() %&gt;% <br>  slice(-<span>4</span>,-<span>6</span>)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>案例展示</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p1 &lt;- ggplot(df) +<br>  geom_col(aes(x =Species,y=value,fill=name),<br>           position =  <span>"dodge"</span>)+<br>  labs(x=<span>NULL</span>,y=<span>NULL</span>)+<br>  theme(legend.position =<span>"non"</span>)<br><br>p2 &lt;- ggplot(mtcars, aes(factor(cyl), fill = factor(vs))) +<br>  geom_bar(position = position_dodge(preserve = <span>"single"</span>))+<br>  labs(x=<span>NULL</span>,y=<span>NULL</span>)+<br>  theme(legend.position =<span>"non"</span>)<br><br>p3 &lt;- ggplot(df) +<br>  geom_col(aes(x =Species,y=value,fill=name),<br>           position = position_dodge2(preserve = <span>"single"</span>))+<br>  labs(x=<span>NULL</span>,y=<span>NULL</span>)+<br>  theme(legend.position =<span>"non"</span>)<br><br>p1+p2+p3<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.4842592592592593" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0eQAjZkwFTM8xFCTJgyxfy91hIVBT0WntPRMgXZxmt5fCicPIHziayQnw/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0eQAjZkwFTM8xFCTJgyxfy91hIVBT0WntPRMgXZxmt5fCicPIHziayQnw/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>在上方代码中可以看到<code>position_dodge()</code>, <code>position = "dodge"</code>和<code>position_dodge2()</code>这三个参数，该系统参数都用于调整图层元素（如柱子或点）的位置，以避免重叠。但它们之间有一些细微的差别：</p><span>❞</span></blockquote><h4 data-tool="mdnice编辑器"><span></span><span><span></span>1. <code>position = "dodge"</code></span><span></span></h4><p data-tool="mdnice编辑器">这是position<code>_dodge()</code>的简写形式，它会自动计算需要的dodge宽度。不能设置<code>preserve</code>参数。</p><h4 data-tool="mdnice编辑器"><span></span><span><span></span>2. <code>position_dodge()</code></span><span></span></h4><p data-tool="mdnice编辑器">相对于<code>position="dodge"</code>更为灵活，允许通过<code>width</code>参数来设置dodge的宽度。<br>默认情况下，<code>preserve="total"</code>，意味着所有的柱子会被等宽地分开。</p><h4 data-tool="mdnice编辑器"><span></span><span><span></span>3. <code>position_dodge2()</code></span><span></span></h4><p data-tool="mdnice编辑器">这是<code>position_dodge()</code>的一个扩展，提供了更多的控制，<code>preserve= "single"</code>：保持每个单独的柱子的宽度不变，而不是整个组。<br><code>preserve="total"</code>：保持整个组的宽度不变（这与<code>position_dodge()</code>相同）。</p><pre data-tool="mdnice编辑器"><span></span><code>position_dodge2(width = <span>0.9</span>, preserve = <span>"single"</span>)<br></code></pre><h4 data-tool="mdnice编辑器"><span></span><span><span></span>示例：</span><span></span></h4><p data-tool="mdnice编辑器">假设你有一个数据集，其中有两个因素变量<code>A</code>和<code>B</code>，每个都有两个水平<code>1</code>和<code>2</code>。</p><ul data-tool="mdnice编辑器"><li><section><p>使用<code>position="dodge"</code>或<code>position_dodge()</code>，你会得到四个等宽的柱子（两个<code>A=1</code>和两个<code>A=2</code>），它们按<code>B</code>的水平分开。</p></section></li><li><section><p>使用<code>position_dodge2(preserve="single")</code>，如果<code>A=1</code>和<code>A=2</code>的柱子高度不同，那么<code>A=1</code>的两个柱子会比<code>A=2</code>的两个柱子更接近，因为它们的宽度被保留了。</p></section></li></ul><h3 data-tool="mdnice编辑器"><span></span><span><span></span>箱线图添加均值</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>set.seed(<span>1234</span>)                                         <br>data &lt;- data.frame(values = rnorm(<span>100</span>),<br>                   group = LETTERS[<span>1</span>:<span>4</span>])<br><br>ggplot(data, aes(x = group, y = values)) +                <br>  stat_boxplot(geom=<span>"errorbar"</span>,width=<span>0.1</span>)+  <span># 绘制箱线图的error bar</span><br>  geom_boxplot() +                         <span># 绘制箱线图</span><br>  stat_summary(fun = mean, geom = <span>"point"</span>, col = <span>"#00A08A"</span>) +  <span># 绘制均值点</span><br>  stat_summary(fun = mean, geom = <span>"text"</span>, col = <span>"#00A08A"</span>,    <span># 绘制均值标签</span><br>               vjust = <span>1.5</span>, aes(label = paste(<span>"Mean"</span>, round(..y.., digits = <span>1</span>))))+<br>  theme_bw()  <span># 使用黑白主题</span><br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7446808510638298" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc047dYerMzuo4UOfaGeiaJtgUMFDJiazicRdUbRIezicCE4eI2dH4sxohHwA/640?wx_fmt=png" data-type="png" data-w="799" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc047dYerMzuo4UOfaGeiaJtgUMFDJiazicRdUbRIezicCE4eI2dH4sxohHwA/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节内容介绍到此结束，过程仅供参考；有需要学习个性化数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>购买<strong>「2023年度会员文档」</strong>同步更新中<strong>「售价149元」</strong>，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码；按照往年数据小编年产出约在150+以上</p><span>❞</span></blockquote><p data-tool="mdnice编辑器">购买后微信发小编订单截图即邀请进新的会员交流群，小编的文档为按年售卖，只包含当年度的<strong>「除系列课程外」</strong>的文档，有需要往年文档的朋友也可下单购买，需要了解更多信息的朋友欢迎交流咨询。</p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝扫一扫</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-ratio="1.6141479099678457" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0RianHlZ4lpMibJyRpUicVPwcc8upKxP8zfUzVa5hic1iaodkgQxX2oicXt7Q/640?wx_fmt=png" data-type="png" data-w="622" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0RianHlZ4lpMibJyRpUicVPwcc8upKxP8zfUzVa5hic1iaodkgQxX2oicXt7Q/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>2023会员群案例展示</span><span></span></h3><p data-tool="mdnice编辑器"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0jDJI1icESExRY02essCOrgicFVdky7lslG27FQxiaOSYVMibI98CtkPYWQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0jDJI1icESExRY02essCOrgicFVdky7lslG27FQxiaOSYVMibI98CtkPYWQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc03EibPk7Dnsjs4za8tXKHYHxJyZb3icupXSYtZ0INhdzLDicicKEzdpcrWw/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc03EibPk7Dnsjs4za8tXKHYHxJyZb3icupXSYtZ0INhdzLDicicKEzdpcrWw/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0iamJViaDq58rcPhDwNliakmNdMGiaNiaGNwDZlkHuafmGc7r5x7fn81uAvA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0iamJViaDq58rcPhDwNliakmNdMGiaNiaGNwDZlkHuafmGc7r5x7fn81uAvA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0DfHYLdQxxWlleFDRxYVVmjxNZCE6APty53oUoL5GibZa32BT9Uibkicvw/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0DfHYLdQxxWlleFDRxYVVmjxNZCE6APty53oUoL5GibZa32BT9Uibkicvw/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0icibGOzftE1wnVdojfvUuYlb7x3e0Ppx76wrwn7tHhxporecZ3VMuyOg/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0icibGOzftE1wnVdojfvUuYlb7x3e0Ppx76wrwn7tHhxporecZ3VMuyOg/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0RGQmtxUF3Q0mbG1VBLicAxmDELmfPUNls2uQmHwiaqUUkHQAjoBdF2ZA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0RGQmtxUF3Q0mbG1VBLicAxmDELmfPUNls2uQmHwiaqUUkHQAjoBdF2ZA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0AwQ6P55OABXQ4PFD6J0UuE8xQGJVdzYrExbcstmpyFrQIm2zgKKvBQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0AwQ6P55OABXQ4PFD6J0UuE8xQGJVdzYrExbcstmpyFrQIm2zgKKvBQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0tibdfxTxXLibAb6rkZ5J6mmuoSD4MzlIrWLgpHEaHW8ezIAIuRicrEYaA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0tibdfxTxXLibAb6rkZ5J6mmuoSD4MzlIrWLgpHEaHW8ezIAIuRicrEYaA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0lmibp2iaUL1EAlZnTgKkS7jvNXFx1mfQpuPibtB7W4mDc1CCx63GFLibsA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYeicu7JbrEvWQLwm3QMrPc0lmibp2iaUL1EAlZnTgKkS7jvNXFx1mfQpuPibtB7W4mDc1CCx63GFLibsA/640?wx_fmt=png"></p></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/Cso555LyO33D8_LZ2bP75w",target="_blank" rel="noopener noreferrer">原文链接</a>
