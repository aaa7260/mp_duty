---
title: "ggplot2优雅绘制别致条形图"
date: 2023-09-09T15:29:32Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
ggplot2优雅绘制别致条形图 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来介绍如何使用<strong>「ggplot2结合ggforce」</strong>来绘制别具一格的条形图，下面小编通过一个案例来进行展示，图形仅供展示用，希望各位观众老爷能够喜欢。数据代码已经整合上传到2023VIP交流群，加群的观众老爷可自行下载，有需要的朋友可关注文末介绍加入VIP交流群</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><h3 data-tool="mdnice编辑器"><span></span><span><span></span>加载R包</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br><span>library</span>(ggtext)<br><span>library</span>(ggforce)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>导入数据</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>df &lt;- read_tsv(<span>"data.tsv"</span>)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>定义圆点数据</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span># 定义一些常量，用于后续的图形绘制</span><br>r &lt;- <span>.275</span>  <span># 圆的半径</span><br>xo &lt;- <span>115</span> / <span>10</span>  <span># 圆心的 x 坐标</span><br>yo &lt;- -<span>0.15</span>  <span># 圆心的 y 坐标</span><br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>数据可视化</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>df %&gt;% ggplot() +<br>  <span># 使用 facet_wrap 函数按照 'holder_company_name' 进行分面（子图）</span><br>  facet_wrap(vars(holder_company_name), ncol = <span>1</span>) +<br>  <span># 使用 geom_rect 添加一个矩形区域作为背景</span><br>  geom_rect(aes(xmin = <span>0</span>, xmax = n / <span>10</span>, ymin = -<span>.125</span>, ymax = <span>1.125</span>), fill = <span>"#add8e6"</span>, alpha = <span>.65</span>) +<br>  geom_text(aes(x = <span>95</span> / <span>10</span>, y = <span>.5</span>, label = holder_company_name), color = <span>"white"</span>, fontface = <span>"bold"</span>, size = <span>4</span>, hjust = <span>1</span>) +<br>  <span># 使用 annotate 函数添加多个白色矩形和线段进行装饰</span><br>  annotate(geom = <span>"rect"</span>, xmin = <span>0</span>, xmax = <span>100</span> / <span>10</span>, ymin = -<span>.125</span>, ymax = <span>1.125</span>, color = <span>"white"</span>, fill = <span>NA</span>) +<br>  annotate(geom = <span>"rect"</span>, xmin = -<span>5</span> / <span>10</span>, xmax = <span>0</span>, ymin = <span>.35</span>, ymax = <span>.65</span>, color = <span>"white"</span>, fill = <span>"white"</span>) +<br>  annotate(geom = <span>"rect"</span>, xmin = -<span>7</span> / <span>10</span>, xmax = -<span>5</span> / <span>10</span>, ymin = <span>.15</span>, ymax = <span>.85</span>, color = <span>"white"</span>, fill = <span>"white"</span>) +<br>  annotate(geom = <span>"rect"</span>, xmin = <span>100</span> / <span>10</span>, xmax = <span>101</span> / <span>10</span>, ymin = <span>.35</span>, ymax = <span>.65</span>, color = <span>"white"</span>, fill = <span>"white"</span>) +<br>  annotate(geom = <span>"rect"</span>, xmin = <span>101</span> / <span>10</span>, xmax = <span>102</span> / <span>10</span>, ymin = <span>.4</span>, ymax = <span>.6</span>, color = <span>"white"</span>, fill = <span>"white"</span>) +<br>  annotate(geom = <span>"segment"</span>, x = <span>102</span> / <span>10</span>, xend = <span>115</span> / <span>10</span>, y = <span>.5</span>, yend = <span>.5</span>, color = <span>"white"</span>) +<br>  <span># 使用 ggforce::geom_circle 添加一个圆形</span><br>  ggforce::geom_circle(data = tibble(x = xo, y = yo), aes(x0 = xo, y0 = yo, r = r), color = <span>"white"</span>, fill = <span>"#add8e6"</span>, alpha = <span>.65</span>, size = <span>.85</span>) +<br>  geom_text(aes(x = xo, yo, label = n), size = <span>3</span>) +   <span># 在圆形中添加文本</span><br>  theme_minimal() +   <span># 应用图形主题</span><br>  theme(<br>    text = element_text(color = <span>"white"</span>),<br>    axis.title = element_blank(),<br>    axis.text = element_blank(),<br>    strip.text = element_blank(),<br>    panel.spacing.y = unit(<span>.125</span>, <span>"cm"</span>),<br>    panel.grid = element_blank(),<br>    plot.background = element_rect(fill = <span>"grey20"</span>, color = <span>NA</span>),<br>    plot.margin = margin(t = <span>.5</span>, r = <span>1.5</span>, b = <span>.5</span>, l = <span>1.5</span>, unit = <span>"cm"</span>)<br>  )<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="1.0574074074074074" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRrTuNUroLl8ackyIiciczcUqhDPQ5uuVjlKKMW4KiaBJJbrbzQ7JT27Daw/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRrTuNUroLl8ackyIiciczcUqhDPQ5uuVjlKKMW4KiaBJJbrbzQ7JT27Daw/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节内容介绍到此结束，有需要学习个性化数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>购买<strong>「2023年度会员文档」</strong>同步更新中<strong>「售价149元」</strong>，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码；按照往年数据小编年产出约在150+以上</p><span>❞</span></blockquote><p data-tool="mdnice编辑器">购买后微信发小编订单截图即邀请进新的会员交流群，小编的文档为按年售卖，只包含当年度的<strong>「除系列课程外」</strong>的文档，有需要往年文档的朋友也可下单购买，需要了解更多信息的朋友欢迎交流咨询。</p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝扫一扫</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-ratio="1.6141479099678457" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRZprlFDVZzFNiaHwuEE9weYKibGBxxY4Nib8ELcibGleUtqqd9nQFqyrEVw/640?wx_fmt=png" data-type="png" data-w="622" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRZprlFDVZzFNiaHwuEE9weYKibGBxxY4Nib8ELcibGleUtqqd9nQFqyrEVw/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>2023会员群案例展示</span><span></span></h3><p data-tool="mdnice编辑器"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRUIJHBDYHDhySS9o51vQ91pX78KBicpraDNWcSCdjxlxkycSqfKwoysQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRUIJHBDYHDhySS9o51vQ91pX78KBicpraDNWcSCdjxlxkycSqfKwoysQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQR0NrngNuicljx6AUsrqK5QexaleGEpnPS2ic7r8BbRKpH49BeN7KnCwXw/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQR0NrngNuicljx6AUsrqK5QexaleGEpnPS2ic7r8BbRKpH49BeN7KnCwXw/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRHD2saEROuicxuZqbElic7Jgia8N7bibK2ywfUYs8JvBib5NxOzkwSsqqkzA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRHD2saEROuicxuZqbElic7Jgia8N7bibK2ywfUYs8JvBib5NxOzkwSsqqkzA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRPw5aME9WeKAL4jzIx4so2LZtD5U1YYOyHBVhC03NTMfwj2nsvueRZg/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRPw5aME9WeKAL4jzIx4so2LZtD5U1YYOyHBVhC03NTMfwj2nsvueRZg/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRlRozvYB9NZvxbe5zFrObhLUGceibIaOeQbfz0doAjlEyXmQ7FW19Bcw/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRlRozvYB9NZvxbe5zFrObhLUGceibIaOeQbfz0doAjlEyXmQ7FW19Bcw/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQR4rIJBEJIY0g8NlibJt6oia9OUmKNibyegJOg3UcJeejKwuXKXzUTDEAnw/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQR4rIJBEJIY0g8NlibJt6oia9OUmKNibyegJOg3UcJeejKwuXKXzUTDEAnw/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRVaHWTyCCZhxHOJw9H3HUddR55W9gZMOiaLjpCd5Oibm3JRpWKjv5xYibA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRVaHWTyCCZhxHOJw9H3HUddR55W9gZMOiaLjpCd5Oibm3JRpWKjv5xYibA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQR5ibTz5PKzxbhWeLgKzdqj57iazooBwkWVll8DoFjzno1TakMdFqkRzww/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQR5ibTz5PKzxbhWeLgKzdqj57iazooBwkWVll8DoFjzno1TakMdFqkRzww/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRjahFc6dNNRUIsbNyKFoNMyq3adYP3qn2icFKwkXjWoz4xZ0BI2ZKomA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZwAbcFKqEOPlucqOXS2nQRjahFc6dNNRUIsbNyKFoNMyq3adYP3qn2icFKwkXjWoz4xZ0BI2ZKomA/640?wx_fmt=png"></p></section><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/QlBOscBMS-wTbGN5Cny3jw",target="_blank" rel="noopener noreferrer">原文链接</a>
