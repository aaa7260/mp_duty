---
title: "R中优雅的绘制环状sina图"
date: 2023-09-26T14:51:42Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
R中优雅的绘制环状sina图 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来介绍如何使用<strong>「ggforce」</strong>包来绘制sina图，下面小编通过一个案例来进行展示，图形仅供展示用，希望各位观众老爷能够喜欢。数据代码已经整合上传到2023VIP交流群，加群的观众老爷可自行下载，有需要的朋友可关注文末介绍加入VIP交流群</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><p><img data-galleryid="" data-ratio="0.3194444444444444" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYib6Vf5Lfu4s64dJIEWhdGMvrcDEx2Rxgd91TOF5sjqy47Wqf2cTO1c5Nhdibh8G5IhOnR53j6XKrw/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAYib6Vf5Lfu4s64dJIEWhdGMvrcDEx2Rxgd91TOF5sjqy47Wqf2cTO1c5Nhdibh8G5IhOnR53j6XKrw/640?wx_fmt=png"></p><blockquote data-tool="mdnice编辑器"><span>❝</span><p>在R中创建sina图使用geom_sina函数，sina图是一种用于显示单个分类变量的每个观测值的图形。它与箱线图和小提琴图类似，但是它显示了每个单独的数据点，这可以提供关于数据分布的更多信息。</p><span>❞</span></blockquote><p data-tool="mdnice编辑器"><strong>「sina图的主要优点是它可以清楚地显示每个数据点，而不是简单地显示数据的总体分布。这使得sina图特别适用于小样本大小的数据集，其中每个数据点的值都很重要。」</strong></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>加载R包</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br><span>library</span>(lubridate)<br><span>library</span>(scico)<br><span>library</span>(ggforce)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>导入数据</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>df &lt;- read_csv(<span>"data.csv"</span>) %&gt;% janitor::clean_names()<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>数据清洗</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>df &lt;- df %&gt;% mutate(year=year(gas_day_started_on)) %&gt;% <br>  filter(year &gt; <span>2012</span>) %&gt;% <span># 筛选数据</span><br>  select(gas_day_started_on,gas_in_storage_t_wh) %&gt;%<br>  mutate(mth = month(gas_day_started_on))<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>数据可视化</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code> df %&gt;%<br>  ggplot(aes(x=mth, y=gas_in_storage_t_wh,group=mth)) +<br>  <span># 使用ggforce包中的geom_sina函数绘制sina图</span><br>  ggforce::geom_sina(aes(color=gas_in_storage_t_wh), alpha=<span>.5</span>, shape=<span>21</span>)+<br>  <span># 添加文本标签</span><br>  geom_text(data=tibble(x=<span>6.5</span>, y=seq(<span>2</span>,<span>8</span>,<span>2</span>), lab=c(<span>"2"</span>,<span>"4"</span>,<span>"6"</span>,<span>"8TWh"</span>)),<br>            aes(x=x, y=y, label=y),inherit.aes = <span>FALSE</span>)+<br>  <span># 使用scico包中的scale_color_scico函数为图形添加颜色</span><br>  scico::scale_color_scico(palette=<span>"roma"</span>, direction=-<span>1</span>,<br>                           labels=scales::label_number(suffix=<span>"TWh"</span>)) +<br>  <span># 设置x轴和y轴的刻度</span><br>  scale_x_continuous(breaks=c(seq(<span>1</span>,<span>12</span>,<span>1</span>)), labels=month.abb[<span>1</span>:<span>12</span>]) +<br>  scale_y_continuous(breaks=c(seq(<span>0</span>,<span>8</span>,<span>2</span>))) +<br>  coord_polar() +   <span># 使用极坐标系</span><br>  <span># 使用cowplot包中的theme_minimal_grid函数设置主题</span><br>  cowplot::theme_minimal_grid(<span>12</span>, line_size = <span>.3</span>) +<br>  <span># 设置图例和轴的样式</span><br>  theme(legend.position = <span>"top"</span>,<br>        legend.title=element_blank(),<br>        legend.text=element_text(size=<span>9.5</span>),<br>        axis.title=element_blank(),<br>        axis.text.y=element_blank(),<br>        plot.margin=margin(<span>.5</span>,<span>0</span>,<span>.3</span>,<span>0</span>, unit=<span>"cm"</span>),<br>        legend.justification = <span>"center"</span>,<br>        legend.margin=margin(b=-<span>15</span>)) +<br>  <span># 设置颜色条的样式</span><br>  guides(color=guide_colorbar(barwidth = unit(<span>18</span>,<span>"lines"</span>),<br>                              barheight = unit(<span>.5</span>,<span>"lines"</span>)))<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.7833333333333333" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcj54wOKGPxic8OsWUf2UbcvjhBUxDibBriboj4AtOKDBjhdbJYCzh9E4KDg/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcj54wOKGPxic8OsWUf2UbcvjhBUxDibBriboj4AtOKDBjhdbJYCzh9E4KDg/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节内容介绍到此结束，过程仅供参考；有需要学习个性化数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>购买<strong>「2023年度会员文档」</strong>同步更新中<strong>「售价149元」</strong>，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码；按照往年数据小编年产出约在150+以上</p><span>❞</span></blockquote><p data-tool="mdnice编辑器">购买后微信发小编订单截图即邀请进新的会员交流群，小编的文档为按年售卖，只包含当年度的<strong>「除系列课程外」</strong>的文档，有需要往年文档的朋友也可下单购买，需要了解更多信息的朋友欢迎交流咨询。</p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>小编微信</span><span></span></h3><p><img data-galleryid="" data-ratio="1" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg" data-type="jpeg" data-w="430" src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>2023会员群案例展示</span><span></span></h3><p data-tool="mdnice编辑器"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjqVeV0nJf7MWcU2aGGgcDygJXpicZJyHzzEE28bwPTbhzMbMSJHF2u8Q/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjqVeV0nJf7MWcU2aGGgcDygJXpicZJyHzzEE28bwPTbhzMbMSJHF2u8Q/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjpWTswgiaU9BWBJd1fCfyn4p7zHfz4P4b1RIBzpjjPn1SPArgic6GybBA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjpWTswgiaU9BWBJd1fCfyn4p7zHfz4P4b1RIBzpjjPn1SPArgic6GybBA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjzy6034HTmnpaMWDqu0D5qxEBHOzUFM0GHhGHB5BWjWWInzmIibWNlxA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjzy6034HTmnpaMWDqu0D5qxEBHOzUFM0GHhGHB5BWjWWInzmIibWNlxA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjOkqZxHgz5wU1c2xvLicYBgEWWzdiajNM3rvZLtvVs6luRGPfeh0N7vug/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjOkqZxHgz5wU1c2xvLicYBgEWWzdiajNM3rvZLtvVs6luRGPfeh0N7vug/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjfbHsHickF89PlWJkxRh0bK6F5moSqCyOznux5yHCOtia9Cjh5LmdYFDg/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjfbHsHickF89PlWJkxRh0bK6F5moSqCyOznux5yHCOtia9Cjh5LmdYFDg/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjsGCyEd99BwicDtEMOoKmLpZRXHI1o2ALfXaic2ia6plCcevXgjRooYcqQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjsGCyEd99BwicDtEMOoKmLpZRXHI1o2ALfXaic2ia6plCcevXgjRooYcqQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjE7yDbzibQ75rzjz9dvcVVAmqQ90QvE549icicDgicVaopmthWMoHh8wTbg/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcjE7yDbzibQ75rzjz9dvcVVAmqQ90QvE549icicDgicVaopmthWMoHh8wTbg/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcj4GKdno2WCl35Jyuia58J7yKoTO4ouiaFYz4Tu5jAFjmBcJMgWM6C4gAg/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcj4GKdno2WCl35Jyuia58J7yKoTO4ouiaFYz4Tu5jAFjmBcJMgWM6C4gAg/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcj5McOCib2iab0pGSIDVSIAcxzGX2jkUEV2syRl5hMInGx3Gib2JWhN2a0A/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAbEAvdxaP732qwbvibTlCUcj5McOCib2iab0pGSIDVSIAcxzGX2jkUEV2syRl5hMInGx3Gib2JWhN2a0A/640?wx_fmt=png"></p></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/6ZBDLPqDooTfUBga1Hdd2A",target="_blank" rel="noopener noreferrer">原文链接</a>
