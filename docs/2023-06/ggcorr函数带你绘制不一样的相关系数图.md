---
title: "ggcorr函数带你绘制不一样的相关系数图"
date: 2023-06-06T22:55:04Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
ggcorr函数带你绘制不一样的相关系数图 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来介绍如何使用<strong>「GGally」</strong>包自带的函数来绘制相关性系数图，虽然<strong>「corrplot」</strong>很是强大但是相关的R包也是有一定的可取之处。下面就来通过一个小案例介绍，<strong>「数据+代码已经上传2023VIP群，加群的观众老爷请自行下载」</strong></p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-weui-theme="light" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><h3 data-tool="mdnice编辑器"><span></span><span><span></span>加载R包</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br><span>library</span>(GGally)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>数据清洗</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>df &lt;- read_tsv(<span>"data.xls"</span>)<br><br>df_named &lt;- df[,11:22] %&gt;% <br>  dplyr::rename(<span>"HomeShots"</span>=HS,<br>         <span>"AwayShots"</span>=AS,<br>         <span>"HomeShots-on-Target"</span>=HST,<br>         <span>"AwayShots-on-Target"</span>=AST,<br>         <span>"HomeFouls"</span>=HF,<br>         <span>"AwayFouls"</span>=AF,<br>         <span>"HomeCorners"</span>=HC,<br>         <span>"AwayCorners"</span>=AC,<br>         <span>"HomeYellowCards"</span>=HY,<br>         <span>"AwayYellowCards"</span>=AY,<br>         <span>"HomeRedCards"</span>=HR,<br>         <span>"AwayRedCards"</span>=AR)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>数据可视化</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>ggcorr(df_named, method = c(<span>"pairwise"</span>),  <span># 使用pairwise方法计算相关系数矩阵</span><br>       geom = <span>"circle"</span>, max_size = <span>15</span>,  <span># 使用圆形表示相关系数</span><br>       min_size = <span>5</span>, nbreaks = <span>6</span>,  <span># 设置相关系数的大小范围和分段数</span><br>       angle = <span>0</span>,  <span># 设置圆形的角度</span><br>       palette = <span>"RdYlBu"</span>,  <span># 设置调色板为红黄蓝</span><br>       hjust = <span>1</span>, size = <span>4</span>, color = <span>"grey50"</span>,  <span># 设置相关系数标签的位置、大小和颜色</span><br>       layout.exp = <span>0.5</span>,  <span># 设置相关系数标签的位置展示方式</span><br>       name = expression(rho)) +  <span># 设置相关系数标签的名称为ρ</span><br>  geom_point(size = <span>10</span>, aes(color = coefficient &gt; <span>0</span>, <br>                            alpha = abs(coefficient) &gt; <span>0.5</span>)) +  <span># 使用点表示系数大于0且绝对值大于0.5的相关系数，设置点的大小和颜色</span><br>  scale_alpha_manual(values = c(<span>"TRUE"</span> = <span>0.25</span>, <span>"FALSE"</span> = <span>0</span>)) +  <span># 设置alpha值的映射关系，当系数满足条件时设置透明度为0.25，否则为0</span><br>  guides(alpha = <span>FALSE</span>) +  <span># 不显示alpha的图例</span><br>  theme(plot.margin = margin(<span>0</span>, <span>0</span>, <span>0</span>, <span>0</span>, <span>"pt"</span>),  <span># 设置图的边距</span><br>        legend.background = element_blank(),  <span># 不显示图例的背景</span><br>        legend.spacing.x = unit(<span>0</span>, <span>"cm"</span>))  <span># 设置图例水平间距为0cm</span><br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.6893317702227433" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83Lia2w0wYHmO8nNdia67t27F0p92NCkhVZmd4LGOqWpic5UurUQLCLujbg/640?wx_fmt=png" data-type="png" data-w="853" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83Lia2w0wYHmO8nNdia67t27F0p92NCkhVZmd4LGOqWpic5UurUQLCLujbg/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>有需要学习个性化数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>购买<strong>「2023年度会员」</strong> <code>初始价格99元</code>，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码；按照往年数据小编年产出约在150+以上</p><span>❞</span></blockquote><p data-tool="mdnice编辑器">购买后微信发小编订单截图即邀请进新的会员交流群，小编的文档为按年售卖，只包含当年度的<strong>「除系列课程外」</strong>的文档，有需要往年文档的朋友也可下单购买，需要了解更多信息的朋友欢迎交流咨询。</p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝扫一扫</span><span></span></h3><figure data-tool="mdnice编辑器"><img data-ratio="1.6136783733826248" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83ib9lMxTx2P8kABbGqMQP4Y25ApN2WblnhHCZZI4Apr3RPXKLKm6djhA/640?wx_fmt=png" data-type="png" data-w="541" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83ib9lMxTx2P8kABbGqMQP4Y25ApN2WblnhHCZZI4Apr3RPXKLKm6djhA/640?wx_fmt=png"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>2023会员群精彩内容</span><span></span></h3><p data-tool="mdnice编辑器"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83xK5IMwDCLvf77UnGk32zKVJRRhWbDEBrKanuqKRiaeRAX4ZfwBz224Q/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83xK5IMwDCLvf77UnGk32zKVJRRhWbDEBrKanuqKRiaeRAX4ZfwBz224Q/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83Vbk3vbeNvEe3VrC4Qalyx4s0VUQj9ohTdGKISLQk1TW6aVrqTqRUtA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83Vbk3vbeNvEe3VrC4Qalyx4s0VUQj9ohTdGKISLQk1TW6aVrqTqRUtA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83DRDibWRyvZQURudwb2Zj9cenKNdvWib57iaiamdvoTNZmeMEP2L32GLpNA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83DRDibWRyvZQURudwb2Zj9cenKNdvWib57iaiamdvoTNZmeMEP2L32GLpNA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB837p6IBv4CkbqPWHu2gG3t1AGOsxHwYqIxYY9dhibATWEOk5ibrrhUfqrg/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB837p6IBv4CkbqPWHu2gG3t1AGOsxHwYqIxYY9dhibATWEOk5ibrrhUfqrg/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83GibniaXXUxuekJVX3bc36VRLb2V4dC7lWalGyIBJWmaVn0Snvlu7UCrg/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83GibniaXXUxuekJVX3bc36VRLb2V4dC7lWalGyIBJWmaVn0Snvlu7UCrg/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83QRiayUfVmcMgrsesDsUmiaygu4ic40zEfdxyL5nFeuW0bZ6UuHRicJSjuA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZn0Nlic5VRpjjYeuYnplB83QRiayUfVmcMgrsesDsUmiaygu4ic40zEfdxyL5nFeuW0bZ6UuHRicJSjuA/640?wx_fmt=png"></p></section><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/kjNhI5iHx4g_G6zha_WQAA",target="_blank" rel="noopener noreferrer">原文链接</a>
