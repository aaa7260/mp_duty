---
title: "ggplot2绘制热图标准化从0-1"
date: 2023-06-24T13:04:24Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
ggplot2绘制热图标准化从0-1 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>最近有朋友询问绘制热图时如何使刻度条展示为从<strong>「0-1」</strong>，这就涉及对数据进行标准的特殊处理，通常对数据进行处理无外乎<strong>「取log」</strong>或者直接使用<strong>「scale()函数进行标准化」</strong>，但是要达到从<strong>「0-1」</strong>的效果这两种方法显然实现不了，因此需要自定义函数来对数据进行标准化处理。下面小编就通过一个案例来进行展示，希望各位观众老爷能够喜欢。<strong>「数据+代码已经上传2023VIP群，加群的观众老爷请自行下载」</strong></p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><h3 data-tool="mdnice编辑器"><span></span><span><span></span>加载R包</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br><span>library</span>(vegan)<br>devtools::install_github(<span>"thomasp85/scico"</span>)<br><span>library</span>(scico)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>导入数据</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>data(<span>"varechem"</span>)  <span># 导入varechem数据集，该数据集包含了生态学变量的测量数据</span><br><br><span># 数据清洗</span><br>df &lt;- varechem %&gt;%  <span># 将varechem数据集赋值给df，并进行列的选择和删除</span><br>  select(<span>1</span>:<span>14</span>) %&gt;%  <span># 选择第1到14列的数据</span><br>  select(-c(Humdepth,Baresoil))  <span># 删除Humdepth和Baresoil列的数据</span><br></code></pre><h4 data-tool="mdnice编辑器"><span></span><span><span></span>使用Min-Max标准化方法对df进行归一化处理</span><span></span></h4><pre data-tool="mdnice编辑器"><span></span><code>df_normalized &lt;- as.data.frame(apply(df, <span>2</span>, <span>function</span>(x) (x - min(x)) / (max(x) - min(x))))<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>绘制标准化热图</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>varechem %&gt;%  <span># 将varechem数据集进行操作</span><br>  rownames_to_column(var=<span>"id"</span>) %&gt;%  <span># 将行名转为列名，并将该列名命名为id</span><br>  select(id) %&gt;%  <span># 选择id列</span><br>  bind_cols(.,df_normalized) %&gt;%  <span># 将id列和df_normalized数据框进行列绑定</span><br>  pivot_longer(-id) %&gt;%  <span># 对数据进行长格式转换，id列保持不变</span><br>  ggplot(aes(name,id,fill=value))+  <span># 设置绘图的数据映射</span><br>  geom_tile()+  <span># 绘制瓷砖图</span><br>  labs(x=<span>NULL</span>,y=<span>NULL</span>)+  <span># 设置x和y轴标签为空</span><br>  scale_fill_scico(palette=<span>"vik"</span>)+  <span># 设置填充颜色的配色方案为"vik"</span><br>  scale_y_discrete(expand=c(<span>0</span>,<span>0</span>),position = <span>'left'</span>)+  <span># 设置y轴为离散型，并将标签显示在左侧</span><br>  scale_x_discrete(expand=c(<span>0</span>,<span>0</span>))+  <span># 设置x轴为离散型</span><br>  theme(plot.background = element_blank(),  <span># 设置绘图的背景为空白</span><br>        panel.background = element_blank(),  <span># 设置面板的背景为空白</span><br>        axis.text=element_text(color=<span>"black"</span>,size=<span>8</span>),  <span># 设置坐标轴文本的颜色为黑色，大小为8</span><br>        axis.ticks = element_blank(),  <span># 设置坐标轴刻度为空白</span><br>        legend.background = element_blank(),  <span># 设置图例的背景为空白</span><br>        legend.text = element_text(color=<span>"black"</span>),  <span># 设置图例文本的颜色为黑色</span><br>        legend.title = element_blank(),  <span># 设置图例标题为空白</span><br>        legend.spacing.x = unit(<span>0.1</span>,<span>"cm"</span>))+  <span># 设置图例水平间距为0.1厘米</span><br>          guides(fill=guide_colorbar(direction=<span>"vertical"</span>,reverse=<span>F</span>,barwidth=unit(<span>.5</span>,<span>"cm"</span>),barheight=unit(<span>11</span>,<span>"cm"</span>)))<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="1.4105793450881612" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3Fvgkg0bxz9P7g7bFPpwRO4QCLASMEsTAG6EzIXLrUoM5622RUqK80lCmicoQ/640?wx_fmt=png" data-type="png" data-w="397" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3Fvgkg0bxz9P7g7bFPpwRO4QCLASMEsTAG6EzIXLrUoM5622RUqK80lCmicoQ/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>非常简单的一个小案例，本节介绍到此结束，有需要学习个性化数据可视化的朋友，欢迎到小编的<strong>「淘宝店铺」</strong> <strong>「R语言数据分析指南」</strong>购买<strong>「2023年度会员文档」</strong>同步更新中 <code>初始价格99元</code>6月后将调整价格为<strong>「149元」</strong>，内容主要包括各种<strong>「高分论文的图表分析复现以及一些个性化图表的绘制」</strong>均包含数据+代码；按照往年数据小编年产出约在150+以上</p><span>❞</span></blockquote><p data-tool="mdnice编辑器">购买后微信发小编订单截图即邀请进新的会员交流群，小编的文档为按年售卖，只包含当年度的<strong>「除系列课程外」</strong>的文档，有需要往年文档的朋友也可下单购买，需要了解更多信息的朋友欢迎交流咨询。</p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>2023会员群案例展示</span><span></span></h3><p data-tool="mdnice编辑器"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgibzmLqiaLsO23KKfgsgpv1Cr8GO0Ul5tTicufsL1pwJANGtNPicJuSIqKQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgibzmLqiaLsO23KKfgsgpv1Cr8GO0Ul5tTicufsL1pwJANGtNPicJuSIqKQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3Fvgkg6QIukzKsqeDbUQjfYzbgTmDehKMvaCKAzTaBSptwHvuRRibiaeBdcuiaA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3Fvgkg6QIukzKsqeDbUQjfYzbgTmDehKMvaCKAzTaBSptwHvuRRibiaeBdcuiaA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgFwy6heGQxKmAL9YylnqpX1oniaprn7GkSeBKHrn9x4T7OsPMK3bKxgA/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgFwy6heGQxKmAL9YylnqpX1oniaprn7GkSeBKHrn9x4T7OsPMK3bKxgA/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3Fvgkgsr6ibt84WcAjcUjHhsG8sNwxY17bD16pIjD5ibic348ZI8kH9PwpMibJTw/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3Fvgkgsr6ibt84WcAjcUjHhsG8sNwxY17bD16pIjD5ibic348ZI8kH9PwpMibJTw/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgYdwc9ibG6HEQlLSVCUriasBp5kkT3FBSGCeiaicoib5wtrVnVYxlQNrRDfQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgYdwc9ibG6HEQlLSVCUriasBp5kkT3FBSGCeiaicoib5wtrVnVYxlQNrRDfQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgbRTBfsXTaqmbh6Bib7cjR9gfqBCAUHQqgNOvfJv6qThXjFUK3nYfzoQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgbRTBfsXTaqmbh6Bib7cjR9gfqBCAUHQqgNOvfJv6qThXjFUK3nYfzoQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3Fvgkg2jibfhw7NPF82QMpibXL2KNtoic9JfoGcXQuiapX0iaYsBYOcAKue6YeLQQ/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3Fvgkg2jibfhw7NPF82QMpibXL2KNtoic9JfoGcXQuiapX0iaYsBYOcAKue6YeLQQ/640?wx_fmt=png"><img data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgpBP5bsA89TLNAO9X1yNvs83E39xDMJuJyox8kbjpBfcd2GgcdCXb9Q/640?wx_fmt=png" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgpBP5bsA89TLNAO9X1yNvs83E39xDMJuJyox8kbjpBfcd2GgcdCXb9Q/640?wx_fmt=png"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>文档内容展示</span><span></span></h3><p data-tool="mdnice编辑器"><img data-ratio="0.475" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgZZiaMHB2cclm66JtNicQ4Ea0UT4icqiaLbKrI9NglaAZFgaz1vjEuBnoIA/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgZZiaMHB2cclm66JtNicQ4Ea0UT4icqiaLbKrI9NglaAZFgaz1vjEuBnoIA/640?wx_fmt=png"><img data-ratio="0.44722222222222224" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgLRZv3y7acBYAAylV2sIBUNsjxYXsRx52PEah1nEicvwY7xGo2bf3WwA/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAaHWib9xEndYEiabEQN3FvgkgLRZv3y7acBYAAylV2sIBUNsjxYXsRx52PEah1nEicvwY7xGo2bf3WwA/640?wx_fmt=png"></p></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/6GJF8bfuU5mpiuM3HrxyWw",target="_blank" rel="noopener noreferrer">原文链接</a>
