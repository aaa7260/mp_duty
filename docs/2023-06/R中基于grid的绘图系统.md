---
title: "R中基于grid的绘图系统"
date: 2023-06-23T02:44:34Z
draft: ["false"]
tags: [
  "fetched",
  "生信媛"
]
categories: ["Acdemic"]
---
R中基于grid的绘图系统 by 生信媛
------
<div><p><br></p><table cellspacing="0"><tbody><tr><td width="48" valign="top"><p><span>问题</span><span><p></p></span></p></td><td width="872" valign="top"><p><span><span>我们知道</span><span>R中有两个绘图系统，第一个是传统的绘图就是直接用plot函数绘图，它跟随R自带，工具很多，但缺点是不灵活。第二个绘图系统是Grid graphics，它比较底层，但是很灵活。那么lattice与grid是什么关系？</span></span><span><p></p></span></p></td></tr><tr><td width="47" valign="top"><p><span>回答</span><span><p></p></span></p></td><td width="873" valign="top"><p><strong><span>Grid package in R Programming Language</span></strong><span> <span>has been removed from CRAN repository as it is now available as the base package.</span></span><span><p></p></span></p><p><span> </span><span><p></p></span></p><p><em><span>来自</span></em><em><span> &lt;</span></em><span>https://www.geeksforgeeks.org/grid-and-lattice-packages-in-r-programming/</span><em><span>&gt;</span></em><span><p></p></span></p><p><span> </span><span><p></p></span></p><p><span>用一张图来表示的话是这样的。</span><span><p></p></span></p><p><span></span><span> </span></p><p><img data-galleryid="" data-ratio="0.7577777777777778" data-s="300,640" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/I101ibe9h7rPUkvh6w4Xq3k8iabx0A9A6TibbIvkatPuYJIcs9awibibyLiaZ8mH93AdRh3uCJujSDlJ60JAcdSQatPQ/640?wx_fmt=png" data-type="png" data-w="450" src="https://mmbiz.qpic.cn/sz_mmbiz_png/I101ibe9h7rPUkvh6w4Xq3k8iabx0A9A6TibbIvkatPuYJIcs9awibibyLiaZ8mH93AdRh3uCJujSDlJ60JAcdSQatPQ/640?wx_fmt=png"></p><p><span></span></p><p><span> </span><span><p></p></span></p></td></tr><tr><td width="48" valign="top"><p><span>问题</span><span><p></p></span></p></td><td width="877" valign="top"><p><span><span>从上图中可以看到，其实大名鼎鼎的</span><span>ggplot2也是基于grid绘图系统开发出来的，那么我直接用grid绘图不就好了吗？我为什么还要去学ggplot2呢？因为lattice和ggplot是基于gird开发出来的高级应用，高级就是说它是直接拿来就能用的，我不需要再重复去造轮子了。举个例子，最常用的图就是xy散点图，如果你用比较底层的方式来画，你需要知道每个点的x和y坐标是什么，为了做这件事，你需要知道绘制细节？但是高级应用的话，直接一句话让它绘制即可。</span></span><span><p></p></span></p></td></tr><tr><td width="48" valign="top"><p><span>问题</span><span><p></p></span></p></td><td width="872" valign="top"><p><span>为什么会关注这个绘图系统</span><span><p></p></span></p></td></tr><tr><td width="48" valign="top"><p><span>回答</span><span><p></p></span></p></td><td width="872" valign="top"><p><span><span>因为作者一开始用了</span><span>JAVA的Swing绘图框架，它是和这个绘图系统更加接近。而且这个系统更加符合人们认知的过程，就像拿着一个画笔进行绘制，不用有额外的认知负担。尽管绘制图片的效率低了，但是它更加灵活。</span></span><span><p></p></span></p></td></tr><tr><td width="48" valign="top"><p><span>问题</span><span><p></p></span></p></td><td width="872" valign="top"><p><span><span>我发现</span><span>grid包和gridExtra包往往在一起出现，他们的关系是什么？</span></span><span><p></p></span></p></td></tr><tr><td width="48" valign="top"><p><span>回答</span><span><p></p></span></p></td><td width="877" valign="top"><p><span>gridExtra是grid包的友好版本，在grid包中，grob是一个可编辑的绘图对象，grob是graphical object两个单词的前两个字符的组合。常用于表示ggplot对象，lattice等高级图形系统创建图形对象。</span><span><p></p></span></p><p><span><span>通过</span><span>help(package = 'gridExtra') 命令查看，我们可以看到这个包主要是用来调整一些布局的，例如把多个绘图对象放到不同的地方。除此之外还有一些快捷方便生成绘图对象的函数，例如 ellipseGrob</span></span><span><p></p></span></p></td></tr><tr><td width="48" valign="top"><p><span>问题</span><span><p></p></span></p></td><td width="872" valign="top"><p><span><span>那么我们趁此端午佳节，我们用这个底层的</span><span>grid绘图系统来绘制一个“粽子”，如何？</span></span><span><p></p></span></p></td></tr><tr><td width="47" valign="top"><p><span>回答</span><span><p></p></span></p></td><td width="873" valign="top"><p><span>当然，我们来绘制一个吧。我们先看看用画笔你是怎么画的。</span><span><p></p></span></p><p><span></span><span> </span></p><p><img data-galleryid="" data-ratio="0.6308203991130821" data-s="300,640" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/I101ibe9h7rPUkvh6w4Xq3k8iabx0A9A6T0MicIT7oqiaNJx6ibjJSibHHYgiaJ0LBSjqAV8HsTFGaadRUcwcic7vVkGDg/640?wx_fmt=png" data-type="png" data-w="902" src="https://mmbiz.qpic.cn/sz_mmbiz_png/I101ibe9h7rPUkvh6w4Xq3k8iabx0A9A6T0MicIT7oqiaNJx6ibjJSibHHYgiaJ0LBSjqAV8HsTFGaadRUcwcic7vVkGDg/640?wx_fmt=png"></p><p><span></span></p><p><span><span>上面的视频教程来自这里：</span><span>https://jingyan.baidu.com/article/64d05a028a4f3b9f54f73b36.html</span></span><span><p></p></span></p><p><span><span>好，重点来了。我们不用</span><span>ggplot2，我们不用lattice等高级的绘图包，不用接收ggplot2一大堆概念的洗脑，上面映射啊，美学啊，乱七八糟的东西。</span></span><span><p></p></span></p><p><span><span>我们拿起画笔，根据</span><span>API，直接画啊，为什么要搞得那么复杂呢？</span></span><span><p></p></span></p></td></tr><tr><td width="48" valign="top"><p><span>问题</span><span><p></p></span></p></td><td width="872" valign="top"><p><span>那么代码是什么呢？</span><span><p></p></span></p></td></tr><tr><td width="48" valign="top"><p><span>回答</span><span><p></p></span></p></td><td width="872" valign="top"><p><span>这个粽子，我们再把它简化一点。我们用下面的代码绘制一下：</span><span><p></p></span></p><table cellspacing="0"><tbody><tr><td width="466" valign="top"><p><span>## draw zongzi</span><span><p></p></span></p><p><span>library(grid)</span><span><p></p></span></p><p><span>#产生一块画布</span><span><p></p></span></p><p><span>grid.newpage()</span><span><p></p></span></p><p><span>#先来绘制四个角，用来定位坐标系</span><span><p></p></span></p><p><span>#产生四个填充了颜色的圆对象</span><span><p></p></span></p><p><span>cirs &lt;- circleGrob( x = c(0, 0, 1, 1),</span><span><p></p></span></p><p><span>             <span>y = c(0, 1, 1, 0),</span></span><span><p></p></span></p><p><span>             <span>r = 0.1,</span></span><span><p></p></span></p><p><span>             <span>gp = gpar(fill = c("red","black","blue","green")))</span></span><span><p></p></span></p><p><span>#绘制四个圆形</span><span><p></p></span></p><p><span>grid.draw(cirs)</span><span><p></p></span></p><p><span>#可以看到这个坐标系就是笛卡尔直角坐标系的第一象限</span><span><p></p></span></p><p><span>#默认的坐标是0-1的百分比</span><span><p></p></span></p><p><span> </span><span><p></p></span></p><p><span>#绘制粽子的整体轮廓</span><span><p></p></span></p><p><span>grid.polygon(x = c(0.3,0.7,0.5), y = c(0.4,0.4,0.8),)</span><span><p></p></span></p><p><span>#标记上轮廓的四个顶点</span><span><p></p></span></p><p><span>grid.text(</span><span><p></p></span></p><p><span>  <span>label = c("(0.3,0.4)", "(0.7,0.4)", "(0.5,0.8)"),</span></span><span><p></p></span></p><p><span>  <span>x = c(0.3, 0.7, 0.5),</span></span><span><p></p></span></p><p><span>  <span>y = c(0.4, 0.4, 0.8),</span></span><span><p></p></span></p><p><span>  <span>hjust = c(1,0,0),</span></span><span><p></p></span></p><p><span>  <span>vjust = c(0,0,0)</span></span><span><p></p></span></p><p><span>)</span><span><p></p></span></p><p><span># 最后，绘制身体</span><span><p></p></span></p><p><span>grid.lines(x = c(0.6,0.4) , y = c(0.4,0.6))</span><span><p></p></span></p><p><span>grid.lines(x = c(0.5,0.6) , y = c(0.5,0.6))</span><span><p></p></span></p><p><span>grid.lines(x = c(0.6,0.65) , y = c(0.4,0.45))</span><span><p></p></span></p><p><span>#其实就是画了几条线而已</span><span><p></p></span></p></td></tr></tbody></table><p><span> </span></p></td></tr><tr><td width="50" valign="top"><p><span>产生的结果</span><span><p></p></span></p></td><td width="870" valign="top"><p><span>图过于简单，不好意思了，只为了简单地展示效果。</span><span><p></p></span></p><p><span></span><span> </span></p><p><img data-galleryid="" data-ratio="0.7793904208998549" data-s="300,640" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/I101ibe9h7rPUkvh6w4Xq3k8iabx0A9A6Td00nXUatdxvQKdzQRIMSFibiaKAr96oTZD4LFxKylEbJLLCN7hcWLvmg/640?wx_fmt=png" data-type="png" data-w="689" src="https://mmbiz.qpic.cn/sz_mmbiz_png/I101ibe9h7rPUkvh6w4Xq3k8iabx0A9A6Td00nXUatdxvQKdzQRIMSFibiaKAr96oTZD4LFxKylEbJLLCN7hcWLvmg/640?wx_fmt=png"></p><p><span></span></p></td></tr><tr><td width="50" valign="top"><p><span>最后点评</span><span><p></p></span></p></td><td width="870" valign="top"><p><span><span>大家可以看看，这个</span><span>grid底层绘图系统和基于这个系统构建出来的高级绘图系统ggplot2和lattice，看看你喜欢哪个？</span></span><span><p></p></span></p><p><span><span>我个人是比较喜欢</span><span>grid这个绘图方式的，因为他更加底层一点，能够很好的掌握其本质。而不至于迷失了一些原理。</span></span><span><p></p></span></p><p><span>下面再总结一下：</span><span><p></p></span></p><table cellspacing="0"><tbody><tr><td width="102" valign="top"><p><span>绘图系统</span><span><p></p></span></p></td><td width="330" valign="top"><p><span>优点</span><span><p></p></span></p></td><td width="291" valign="top"><p><span>缺点</span><span><p></p></span></p></td></tr><tr><td width="102" valign="top"><p><span>Grid</span><span><p></p></span></p></td><td width="330" valign="top"><p><span>理解本质，比较灵活</span><span><p></p></span></p></td><td width="291" valign="top"><p><span>需要知道底层原理</span><span><p></p></span></p></td></tr><tr><td width="103" valign="top"><p><span>Ggplot2/lattice</span><span><p></p></span></p></td><td width="330" valign="top"><p><span>拿来就用，掉包侠必备</span><span><p></p></span></p></td><td width="301" valign="top"><p><span><span>需要接受</span><span>ggplot一大堆概念，不容易知道绘图的本质。</span></span><span><p></p></span></p></td></tr><tr><td width="102" valign="top"><p><span>JAVA Swing</span><span><p></p></span></p></td><td width="332" valign="top"><p><span>Swing还是有很多著名软件的，比如IGV和Cytoscape</span><span><p></p></span></p><p><span><span>个人感觉这个是</span><span>JAVA最稳定的GUI框架了，第三方库多一点</span></span><span><p></p></span></p></td><td width="290" valign="top"><p><span><span>没有</span><span>CRAN/Bioc这些第三方库。</span></span><span><p></p></span></p></td></tr></tbody></table><p><span> </span><span><p></p></span></p><p><span><span>最后，请允许我吐槽一下，当初我一开始入门生信的时候，就被</span><span>ggplot2吸引了。</span></span><span><p></p></span></p><p><span><span>其实最后才明白，我们推崇</span><span>ggplot2的原因，不是那一大串乱七八糟的理论，而是它画的图真的很漂亮。</span></span><span><p></p></span></p><p><span><span>现在我们不需要被它洗脑了，我们只要</span><span>gird，那么后面理解ggplot2就更好了。</span></span><span><p></p></span></p><p><span><span>所以我不建议对于想掌握绘图技能的人，直接学习</span><span>ggplot2，而是先学习grid。</span></span><span><p></p></span></p><p><span><span>这个资料很好，可以看看</span><span>https://bookdown.org/rdpeng/RProgDA/the-grid-package.html</span></span><span><p></p></span></p><p><span> </span><span><p></p></span></p></td></tr></tbody></table><p><br></p><p>PS：我建议真正想去<strong>掌握</strong>画图的技能的朋友（注意，我说的是掌握，而不是就想画个XX图），还是买本【R绘图系统】看看吧，</p><p><img data-galleryid="" data-ratio="0.7332873880082702" data-s="300,640" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/I101ibe9h7rPUkvh6w4Xq3k8iabx0A9A6TzE0HLBNyARsmu3NXg0tricUwyEVRFIHHSDt1md0xYD6gCqNibgSh8FVQ/640?wx_fmt=png" data-type="png" data-w="1451" src="https://mmbiz.qpic.cn/sz_mmbiz_png/I101ibe9h7rPUkvh6w4Xq3k8iabx0A9A6TzE0HLBNyARsmu3NXg0tricUwyEVRFIHHSDt1md0xYD6gCqNibgSh8FVQ/640?wx_fmt=png"></p><p>这也是我5年前看到y叔力荐，购入的。</p><p><img data-galleryid="" data-ratio="0.38288288288288286" data-s="300,640" data-src="https://mmbiz.qpic.cn/sz_mmbiz_png/I101ibe9h7rPUkvh6w4Xq3k8iabx0A9A6TkD9VydYr7VQcS7CibIu2ibOVMYRzYWKEm5BURrvb2OEfXK9ia2la7M64A/640?wx_fmt=png" data-type="png" data-w="1110" src="https://mmbiz.qpic.cn/sz_mmbiz_png/I101ibe9h7rPUkvh6w4Xq3k8iabx0A9A6TkD9VydYr7VQcS7CibIu2ibOVMYRzYWKEm5BURrvb2OEfXK9ia2la7M64A/640?wx_fmt=png"></p><p>目前出了第三版，不过我觉得销量肯定是不如ggplot2系列，毕竟大家都喜欢直接出图。不了解底层有啥关系，大不了AI后期再改改呗</p><p><mpcps data-templateid="card" data-traceid="d60910ad-0c79-402f-8172-b439bc886d37" data-goodssouce="1" data-pid="101_12764465" data-appuin="3252592334" data-buffer='{"category_id":10,"pid":"101_12764465","biz_uin":"3252592334","trace_id":"d60910ad-0c79-402f-8172-b439bc886d37","sku_id":"101_12764465","source_id":2,"source_name":"京东","audit_state":1,"main_img":"https://pcm-img.zhls.qq.com/productcenter-773d946d--1018824-6620708921308624912/43042580916082022/b132db07eb626269d427b417bba22587.jpg","product_name":"R绘图系统（第3版）(异步图书出品）","current_price":7740,"first_category_id":"10","product_label_name_list":["京东配送"],"select_tag_name_list":[],"templateId":"card","appuin":"3252592334","isNewCpsKOL":1}'></mpcps></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/sTcnw-mH7hjWEWn-WdLfnA",target="_blank" rel="noopener noreferrer">原文链接</a>
