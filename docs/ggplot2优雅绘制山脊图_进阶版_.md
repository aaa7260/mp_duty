---
title: "ggplot2优雅绘制山脊图(进阶版)"
date: 2023-02-09T00:35:11Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
ggplot2优雅绘制山脊图(进阶版) by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来介绍一个ggplot2绘制山脊图的小栗子，在以往的细节上做了微调使得图形更加富有美感，感兴趣的朋友也可尝试进行更进一步的优化；希望对各位有帮助。<strong>「数据已经上传2023VIP群，加群的观众老爷请自行下载」</strong></p><span>❞</span></blockquote><blockquote data-tool="mdnice编辑器"><span>❝</span><p><code>有需要学习数据可视化案例的朋友欢迎购买小编2023的VIP文档</code>，<strong>「初始价格依然是99元」</strong>随着人数增多后期会调整价格；有需要的朋友欢迎到小编的淘宝店铺<strong>「R语言数据分析指南」</strong>下单。<br>付费后小编会邀请分享文档链接，小编每次更新后会同步内容。<strong>「期待大家都能真正掌握R语言数据分析及可视化的能力」</strong></p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝店铺个性化绘图服务</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>有需要找小编做个性化绘图的朋友欢关注<strong>「淘宝店铺(R语言数据分析指南)」</strong> 有需求者可咨询下单。</p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>加载R包</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br><span>library</span>(ggsci)<br><span>library</span>(ggridges)<br><span>library</span>(ggtext)<br><span>library</span>(ggh4x)<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>数据清洗</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>read_tsv(<span>"data.xls"</span>) %&gt;% <br>  filter(continent %<span>in</span>% c(<span>"Asia"</span>,<span>"Europe"</span>))<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>绘制主图</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p &lt;- ggplot(aes(y = country, x = lifeExp, fill = continent))+<br>  geom_density_ridges(size = <span>.15</span>, color = <span>"white"</span>)+ <span># 绘制密度图</span><br>  scale_x_continuous(  <span># 转换x轴刻度</span><br>    trans = <span>"log10"</span>, expand = c(<span>0</span>, <span>0</span>),<br>    labels = scales::comma_format(suffix = <span>"k"</span>, scale = <span>1e-4</span>)) +<br>  scale_y_discrete(expand =c(<span>0</span>,<span>0</span>)) +<br>  scale_fill_futurama(alpha = <span>.95</span>) +<br>  facet_wrap(vars(continent), scales = <span>"free_y"</span>) + <span># 分面</span><br>  coord_cartesian(clip = <span>"off"</span>) +<br>  theme_minimal()<br></code></pre><h3 data-tool="mdnice编辑器"><span></span><span><span></span>调整主题</span><span></span></h3><pre data-tool="mdnice编辑器"><span></span><code>p + theme(legend.position = <span>"bottom"</span>,<br>    legend.justification=<span>"right"</span>,<br>    axis.title.x = element_text(margin = margin(t = <span>10</span>), color = <span>"white"</span>),<br>    axis.title.y = element_blank(),<br>    axis.text.x = element_text(size = <span>8</span>, color = <span>"white"</span>),<br>    axis.text.y = element_text(face = <span>"bold"</span>, color = <span>"white"</span>),<br>    panel.grid.minor = element_blank(),<br>    panel.grid.major.x = element_line(linewidth = <span>.3</span>, linetype = <span>"dashed"</span>, color = <span>"grey75"</span>),<br>    panel.grid.major.y = element_blank(),<br>    axis.ticks.x = element_line(linewidth = <span>.3</span>, color = <span>"white"</span>),<br>    panel.spacing = unit(<span>1</span>,<span>"lines"</span>),<br>    strip.text = element_text(face = <span>"bold"</span>, margin = margin(b = <span>10</span>),  color = <span>"white"</span>, size = <span>12</span>),<br>    plot.background = element_rect(fill = <span>"#3F4041FF"</span>, color = <span>NA</span>),<br>    plot.margin = margin(<span>20</span>, <span>20</span>, <span>20</span>, <span>20</span>),<br>    legend.title = element_blank())+<br>  guides(fill = guide_legend(override.aes = list(color = <span>NA</span>),<br>                             label.theme = element_text(color = <span>"white"</span>,size = <span>8</span>)))<br></code></pre><figure data-tool="mdnice编辑器"><img data-ratio="0.9871685201026519" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZhwVpX7DYXjb5ibnJKVciaPVAjuX5Qd5LLynkmgrgVw38EWaXDXkQOgs2rhibtSf7lkGl4RpdosWafg/640?wx_fmt=png" data-type="png" data-w="2338" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZhwVpX7DYXjb5ibnJKVciaPVAjuX5Qd5LLynkmgrgVw38EWaXDXkQOgs2rhibtSf7lkGl4RpdosWafg/640?wx_fmt=png"></figure><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节介绍到此介绍，非常简单的一个案例<code>喜欢的观众老爷欢迎分享转发</code>，<strong>「当然更推荐大家加入我的VIP交流群」</strong>扫描下方二维码加小编微信<strong>「付费99元」</strong>后邀请进群，<strong>「一定让你感受到物超所值」</strong>，<strong>「添加小编微信请备注来意，以便高效处理」</strong></p><span>❞</span></blockquote><h3 data-tool="mdnice编辑器"><span></span><span><span></span>小编微信</span><span></span></h3><p><img data-galleryid="" data-ratio="1" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg" data-type="jpeg" data-w="430" src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAaNu6sU2UCYkxFq9ibq75wuaO0lqFoYz1icUo4jh3N2icAWECmibgPvqyReur0FCp7JNKO0icnRAsbO9ug/640?wx_fmt=jpeg"></p><p><span></span></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3></section><section><mp-common-profile data-pluginname="mpprofile" data-weui-theme="light" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><p><br></p><section><section><section><section><p data-mid="">往期推荐</p></section></section><section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247501179&amp;idx=1&amp;sn=20951b9ff45d822349928cce2a12a5e5&amp;chksm=cee29de5f99514f39cff1e3c3e2d1087b6f06edbf78fd1b2979f68b1d374724cdfebbfef0e7f&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>[会员专享] imeta图表复现之相关性组合热图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247501156&amp;idx=1&amp;sn=1141ed0a960d7643c98f367950fb538c&amp;chksm=cee29dfaf99514ec8047226a956f10c851571a6ba96e20a8ea91a489ecc4dcc19c47f71f5fc2&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>R自制调色盘之浪浪山的夏天</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247501136&amp;idx=1&amp;sn=ef4328e049de0682084ce60815dfd27a&amp;chksm=cee29dcef99514d8e2309c309f3d59195c5cd7c014e6cf8b6e39c1a40466eee415da417b07fb&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggtree绘制带有图像轮廓的系统发育树</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247501118&amp;idx=1&amp;sn=b08f8cadb41cbc3fca8092eaed05498e&amp;chksm=cee29da0f99514b6ac1c01ad9964204600f13918a5187a53bd098f6034079e4f696ed712b35b&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggtools轻松转换RGB颜色值</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247501102&amp;idx=1&amp;sn=0000c1b90a69dfa3d23d1a46b1471621&amp;chksm=cee29db0f99514a60f26c568a5ea7b185828b2866ccbab407549a099bec48f20b1725d07e32e&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>metanetwork带你优雅的绘制特色网络图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247501079&amp;idx=1&amp;sn=b38c940efc8a7632b4ded5ecefe4b8af&amp;chksm=cee29d89f995149fa11ff66e2f4d0123876667df3fad3e5110b15e735295201025f0dc7192bf&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggtools一款简化数据分析的多用途R包</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247500987&amp;idx=1&amp;sn=56765f7fe1013eca9bdd8d963141a3bf&amp;chksm=cee29c25f9951533f47a033d7d1e79d044d8164fe4b2cef5b7c40b39d9156bd9c641d209087c&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggdag优雅的绘制有向无环图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247500967&amp;idx=1&amp;sn=d9a155bfd49d317c05586defc2177ff4&amp;chksm=cee29c39f995152fd73518702e89d951e247330a1ab6e9faaf8ad271f8d49eb5e6500dd78439&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggreverse逆向操作你的绘图代码</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247500898&amp;idx=1&amp;sn=0ae69d8cba84515e53b254433588fd8e&amp;chksm=cee29cfcf99515eaa0bdea0c167a5b60e6c2f818109a8af594de3c05056b45e8ecd536aa87a1&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>funkyheatmap优雅的可视化数据框热图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247500867&amp;idx=1&amp;sn=8209cf587e3f593cbc5c8e5250c454ed&amp;chksm=cee29cddf99515cb8599de9d6b071f3a54bfbcea687f80ce0b5383537e40583f6f9cd72e53e3&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>ggplot2带你组合绘制桑基图+富集分析图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247500843&amp;idx=1&amp;sn=675fde94ff0ac2ccf4890647c62d6f68&amp;chksm=cee29cb5f99515a337e5ce5a908db79e0a7eff68d4a47955ea1692e12a4e2f126bd74d921d6c&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>[会员专享] NC图表复现之华夫热图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247500946&amp;idx=1&amp;sn=e49e07f1bb9cc1db61fb14a9ca329ac8&amp;chksm=cee29c0cf995151a97482cda424769c81f0df123b42837425c6b4e751940f6c9a2c2390151f5&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>[会员专享] NC图表复现之cirzlize绘制基因组图</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247500787&amp;idx=1&amp;sn=1870a6965333bfc6a57ba688d39c9f96&amp;chksm=cee29b6df995127bb517d9485bd793f3c02954b3063b17cffbd5fce5d87c23ecd1fd55ced844&amp;scene=21#wechat_redirect" data-linktype="2"><section><p>R语言统计分析|批量单变量Cox回归分析</p></section></a></section><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247500768&amp;idx=1&amp;sn=62b7c2159f7fb4c83679be5f4629c985&amp;chksm=cee29b7ef995126829d96196fc7e60f93332e90e1c4bc9122f3d7153e19189c302e1c61bd97b&amp;scene=21#wechat_redirect" data-linktype="2"></a><section><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247500768&amp;idx=1&amp;sn=62b7c2159f7fb4c83679be5f4629c985&amp;chksm=cee29b7ef995126829d96196fc7e60f93332e90e1c4bc9122f3d7153e19189c302e1c61bd97b&amp;scene=21#wechat_redirect" data-linktype="2"></a><p><a href="http://mp.weixin.qq.com/s?__biz=Mzg3MzQzNTYzMw==&amp;mid=2247500768&amp;idx=1&amp;sn=62b7c2159f7fb4c83679be5f4629c985&amp;chksm=cee29b7ef995126829d96196fc7e60f93332e90e1c4bc9122f3d7153e19189c302e1c61bd97b&amp;scene=21#wechat_redirect" data-linktype="2">[会员专享] 再谈ggplot2绘制森林图</a></p></section></section></section></section></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/OEqnzX6fYTyuXdCEa6PUYA",target="_blank" rel="noopener noreferrer">原文链接</a>
