---
title: "R语言学习：prcomp函数和princomp函数的区别"
date: 2023-02-28T23:29:13Z
draft: ["false"]
tags: [
  "fetched",
  "R语言"
]
categories: ["Acdemic"]
---
R语言学习：prcomp函数和princomp函数的区别 by R语言
------
<div><p><strong>2023年第3篇文章。</strong><br></p><p>这篇文章，回答以下问题：<br></p><p>1 prcomp函数和princomp函数的区别？</p><p>2 如何用prcomp函数做PCA分析以及对PCA的结果做可视化分析。</p><p><strong>prcomp函数和princomp函数</strong>是R语言内置的用于做<strong>PCA</strong>的两个函数，区别在于做PCA采用的方法的差异性</p><p>1）prcomp函数采用<strong>SVD技术</strong>（奇异值分解）</p><p>2）princomp函数采用<strong>谱分解</strong>技术<br></p><p>这两种技术在线性代数里面都有详细介绍。</p><p>SVD技术可以获得更精准的数值解，因此，<strong>建议采用prcomp</strong>函数做PCA分析。<br></p><p>举例说明</p><p>第一步：数据准备</p><section><ul><li><li><li><li></ul><pre data-lang="css"><code><span><span>library</span>("<span>factoextra</span>")</span></code><code><span><span>data</span>(<span>decathlon2</span>)</span></code><code><span><span>decathlon2_active</span> &lt;<span>-</span> <span>decathlon2</span><span>[1:23, 1:10]</span></span></code><code><span><span>head</span>(<span>decathlon2</span><span>.active</span><span>[, 1:6]</span>)</span></code></pre></section><p>第二步：PCA</p><section><ul><li></ul><pre data-lang="xml"><code><span>res_pca <span>&lt;<span>-</span> <span>prcomp</span>(<span>decathlon2_active</span>, <span>scale</span> = <span>TRUE)</span></span></span></code></pre></section><p>第三步：PCA结果可视化分析<br></p><p>1）<strong>特征值可视化图</strong><strong>（Scree plot）</strong></p><p>显示每个主成分解释的方差百分比。<br></p><section><ul><li></ul><pre><code><span>fviz_eig(res_pca)</span></code></pre></section><p><img data-galleryid="" data-ratio="0.6700879765395894" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacslx11AgHhDDBOeC9npIiayiaeeNIVswRjkUSvcZFVLRxPPm7I2SgSW5PfLMs5F6w9XIR0gicfUp0C8g/640?wx_fmt=png" data-type="png" data-w="682" src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacslx11AgHhDDBOeC9npIiayiaeeNIVswRjkUSvcZFVLRxPPm7I2SgSW5PfLMs5F6w9XIR0gicfUp0C8g/640?wx_fmt=png"></p><p>2）<strong>个体图</strong></p><p>一种无监督学习，把具有相似特征的个体聚合在一块。</p><section><ul><li><li><li><li><li></ul><pre data-lang="php"><code><span>fviz_pca_ind(res_pca,</span></code><code><span>             col.ind = <span>"cos2"</span>, <span># Color by the quality of representation</span></span></code><code><span>             gradient.cols = c(<span>"#00AFBB"</span>, <span>"#E7B800"</span>, <span>"#FC4E07"</span>),</span></code><code><span>             repel = <span>TRUE</span>     <span># Avoid text overlapping</span></span></code><code><span>)</span></code></pre></section><p><img data-galleryid="" data-ratio="0.7540029112081513" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacslx11AgHhDDBOeC9npIiayiaK3icJrmlXFdibibdfPnTFKpyebwAGxian4v1xEU6DThlJJ3AVbn5FBUWOg/640?wx_fmt=png" data-type="png" data-w="687" src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacslx11AgHhDDBOeC9npIiayiaK3icJrmlXFdibibdfPnTFKpyebwAGxian4v1xEU6DThlJJ3AVbn5FBUWOg/640?wx_fmt=png"></p><p>3）<strong>变量图</strong></p><p>描述变量对主成分的正向或者负向相关的贡献情况，正向的指向一端，负向的指向另一端。</p><section><ul><li><li><li><li><li></ul><pre data-lang="php"><code><span>fviz_pca_var(res_pca,</span></code><code><span>             col.<span>var</span> = <span>"contrib"</span>, <span># Color by contributions to the PC</span></span></code><code><span>             gradient.cols = c(<span>"#00AFBB"</span>, <span>"#E7B800"</span>, <span>"#FC4E07"</span>),</span></code><code><span>             repel = <span>TRUE</span>     <span># Avoid text overlapping</span></span></code><code><span>)</span></code></pre></section><p><img data-galleryid="" data-ratio="0.8288" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacslx11AgHhDDBOeC9npIiayiaaDDjicuVibSK4m9vHHF1RibJ9E4JAV6RTa8eEVqNDTiaibm0T1Cf8b1Pwng/640?wx_fmt=png" data-type="png" data-w="625" src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacslx11AgHhDDBOeC9npIiayiaaDDjicuVibSK4m9vHHF1RibJ9E4JAV6RTa8eEVqNDTiaibm0T1Cf8b1Pwng/640?wx_fmt=png"></p><p>4）<strong>个体图+变量图</strong></p><section><ul><li><li><li><li><li></ul><pre data-lang="php"><code><span>fviz_pca_biplot(res_pca, </span></code><code><span>                repel = <span>TRUE</span>,</span></code><code><span>                col.<span>var</span> = <span>"#2E9FDF"</span>, <span># Variables color</span></span></code><code><span>                col.ind = <span>"#696969"</span>  <span># Individuals color</span></span></code><code><span>)</span></code></pre></section><p><img data-galleryid="" data-ratio="0.7598828696925329" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacslx11AgHhDDBOeC9npIiayialibrIBtHSV01CtnOf3ia0LoePhicnxY7Ntw4e2HxeHyibtiaxeYBttGgCtg/640?wx_fmt=png" data-type="png" data-w="683" src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacslx11AgHhDDBOeC9npIiayialibrIBtHSV01CtnOf3ia0LoePhicnxY7Ntw4e2HxeHyibtiaxeYBttGgCtg/640?wx_fmt=png"></p><p><strong>附录：完整代码</strong><br></p><section><ul><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li><li></ul><pre data-lang="php"><code><span><span># prcomp函数和princomp函数是R语言内置的两个可用于做PCA的函数。</span></span></code><code><span><span># princomp使用谱分解结束</span></span></code><code><span><span># prcomp使用SVD技术</span></span></code><code><span><br></span></code><code><span><span># 数据准备 --</span></span></code><code><span>library(<span>"factoextra"</span>)</span></code><code><span>data(decathlon2)</span></code><code><span>decathlon2_active &lt;- decathlon2[<span>1</span>:<span>23</span>, <span>1</span>:<span>10</span>]</span></code><code><span>head(decathlon2.active[, <span>1</span>:<span>6</span>])</span></code><code><span><br></span></code><code><span><span># PCA处理 --</span></span></code><code><span>res_pca &lt;- prcomp(decathlon2_active, scale = <span>TRUE</span>)</span></code><code><span><br></span></code><code><span><span># PCA结果可视化分析 --</span></span></code><code><span><span># 1）scree plot</span></span></code><code><span><span># 可视化特征值(屏幕图)。显示由每个主成分解释的方差百分比。</span></span></code><code><span>fviz_eig(res_pca)</span></code><code><span><br></span></code><code><span><span># 2) 个体图</span></span></code><code><span><span># 具有相似特征的个体被分组在一起。</span></span></code><code><span>fviz_pca_ind(res_pca,</span></code><code><span>             col.ind = <span>"cos2"</span>, <span># Color by the quality of representation</span></span></code><code><span>             gradient.cols = c(<span>"#00AFBB"</span>, <span>"#E7B800"</span>, <span>"#FC4E07"</span>),</span></code><code><span>             repel = <span>TRUE</span>     <span># Avoid text overlapping</span></span></code><code><span>)</span></code><code><span><br></span></code><code><span><span># 3) 变量图</span></span></code><code><span><span># 描述变量对主成分的正向或者负向相关的贡献情况</span></span></code><code><span><span># 正向指向一端，负向指向另一端</span></span></code><code><span>fviz_pca_var(res_pca,</span></code><code><span>             col.<span>var</span> = <span>"contrib"</span>, <span># Color by contributions to the PC</span></span></code><code><span>             gradient.cols = c(<span>"#00AFBB"</span>, <span>"#E7B800"</span>, <span>"#FC4E07"</span>),</span></code><code><span>             repel = <span>TRUE</span>     <span># Avoid text overlapping</span></span></code><code><span>)</span></code><code><span><br></span></code><code><span><span># 4) 个体图和变量图结合</span></span></code><code><span>fviz_pca_biplot(res_pca, </span></code><code><span>                repel = <span>TRUE</span>,</span></code><code><span>                col.<span>var</span> = <span>"#2E9FDF"</span>, <span># Variables color</span></span></code><code><span>                col.ind = <span>"#696969"</span>  <span># Individuals color</span></span></code><code><span>)</span></code></pre></section><p><br></p><hr><p><strong>我是谁？</strong></p><p>我叫王路情，是一名数据科学家，同时，也是一名讲师。<br></p><p>我通过公众号、知乎等网络媒体，向大众传播和分享<strong>R语言和数据科学</strong>的知识。到目前为止，受众已经超过5万人。<br></p><p><span>虽说数据科学家的主要工作帮助客户利用好数据，但我不太喜欢墨守成规。</span></p><p><span>我认为“数据创造价值”应该是数据科学家的首要任务。我通过各种途径向世人传播数据科学知识，就是希望帮助更多客户用好数据。</span></p><p><span>请多多关照。</span></p><hr><p><strong><span>我的R语言社群？</span></strong><br></p><p><span>我创建了多个R语言社群，聚焦于R语言和数据科学的讨论、交流和分享。<br></span></p><p><span>这些R语言社群受众2500+人，来自各行各业，大家都在使用R语言解决问题。</span></p><p><span>欢迎大家加入我的R语言社群，我的微信</span><strong>luqin360，</strong>加我时，请备注：<strong>姓名-入群</strong><span>。</span></p><p><img data-galleryid="" data-ratio="1.0117096018735363" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacvbB8IDOtGuRAWrlvv7O30vwqDtkQD7lSvqPWbVYXzobmd0G0EqO8v3LfP5YSwsB3AvaAtSLZsVvw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" data-type="png" data-w="427" src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacvbB8IDOtGuRAWrlvv7O30vwqDtkQD7lSvqPWbVYXzobmd0G0EqO8v3LfP5YSwsB3AvaAtSLZsVvw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"></p><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/S65TFMPu4xcCI0nOiGh7sA",target="_blank" rel="noopener noreferrer">原文链接</a>
