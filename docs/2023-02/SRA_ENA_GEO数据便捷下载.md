---
title: "SRA，ENA，GEO数据便捷下载"
date: 2023-02-21T04:21:09Z
draft: ["false"]
tags: [
  "fetched",
  "生信小知识"
]
categories: ["Acdemic"]
---
SRA，ENA，GEO数据便捷下载 by 生信小知识
------
<div><section><span></span><h2><span>SRA，ENA，GEO数据便捷下载</span></h2><blockquote><p>微信公众号：<strong>生信小知识</strong><br>关注可了解更多的生物信息学教程及知识。问题或建议，请公众号留言;</p></blockquote><h3><span>目录</span></h3><p><span><span>前言</span></span><span><span>1. 工具安装</span></span><span><span>2. 工具使用</span></span><span><span>3. 信息查询</span></span><span><span><span>3.1 使用说明</span></span></span><span><span><span>3.2 实例说明</span></span></span><span><span>后记</span></span></p><h3><span>前言</span></h3><p>说到GEO数据的下载，很早很早之前我就写过不同的下载方式，其中包括：</p><ul><li><p><span>使用工具下载SRA数据后转为fastq格式：非常麻烦</span></p></li><li><p><span>使用在线工具（https://sra-explorer.info/）直接下载fastq文件：相对简单快速，但是无法批量根据ID号查询数据下载（同时可能还需要科学上网）</span></p></li></ul><p>目前我手上有一堆数据ID，需要下载，此时我们可以使用其他工具来处理这个问题。</p><p>python工具：https://github.com/saketkc/pysradb</p><h3><span>1. 工具安装</span></h3><p>可以直接使用conda安装即可：</p><pre><code>conda install -c bioconda pysradb python=3.7<br></code></pre><p>或者也可以直接pip安装：</p><pre><code>pip install pysradb<br></code></pre><h3><span>2. 工具使用</span></h3><pre><code>$ pysradb -h<br>usage: pysradb [-h] [--version] [--citation]<br>               {metadata,download,search,gse-to-gsm,gse-to-srp,gsm-to-gse,gsm-to-srp,gsm-to-srr,gsm-to-srs,gsm-to-srx,srp-to-gse,srp-to-srr,srp-to-srs,srp-to-srx,srr-to-gsm,srr-to-srp,srr-to-srs,srr-to-srx,srs-to-gsm,srs-to-srx,srx-to-srp,srx-to-srr,srx-to-srs}<br></code></pre><p>我们可以看到，这个工具其实主要有3个大类工具：</p><ul><li><p><code>metadata</code></p></li><li><p><code>download</code></p></li><li><p><code>search</code></p></li></ul><p>而后面的则是一些相互转换的小工具：</p><pre><code>subcommands:<br>    metadata:   Fetch metadata <span>for</span> SRA project (SRPnnnn)<br>    download:   Download SRA project (SRPnnnn)<br>    search: Search SRA <span>for</span> matching text<br>    gse-to-gsm: Get GSM <span>for</span> a GSE<br>    gse-to-srp: Get SRP <span>for</span> a GSE<br>    gsm-to-gse: Get GSE <span>for</span> a GSM<br>    gsm-to-srp: Get SRP <span>for</span> a GSM<br>    gsm-to-srr: Get SRR <span>for</span> a GSM<br>    gsm-to-srs: Get SRS <span>for</span> a GSM<br>    gsm-to-srx: Get SRX <span>for</span> a GSM<br>    srp-to-gse: Get GSE <span>for</span> a SRP<br>    srp-to-srr: Get SRR <span>for</span> a SRP<br>    srp-to-srs: Get SRS <span>for</span> a SRP<br>    srp-to-srx: Get SRX <span>for</span> a SRP<br>    srr-to-gsm: Get GSM <span>for</span> a SRR<br>    srr-to-srp: Get SRP <span>for</span> a SRR<br>    srr-to-srs: Get SRS <span>for</span> a SRR<br>    srr-to-srx: Get SRX <span>for</span> a SRR<br>    srs-to-gsm: Get GSM <span>for</span> a SRS<br>    srs-to-srx: Get SRX <span>for</span> a SRS<br>    srx-to-srp: Get SRP <span>for</span> a SRX<br>    srx-to-srr: Get SRR <span>for</span> a SRX<br>    srx-to-srs: Get SRS <span>for</span> a SRX<br></code></pre><p>这里我主要介绍 <code>metadata</code> 的使用，其他的目前对我而言用途不大。</p><h3><span>3. 信息查询</span></h3><h4><span>3.1 使用说明</span></h4><pre><code>usage: pysradb metadata [-h] [--saveto SAVETO] [--assay] [--desc] [--detailed]<br>                        [--expand]<br>                        srp_id [srp_id ...]<br><br>positional arguments:<br>  srp_id<br><br>optional arguments:<br>  -h, --<span>help</span>       show this <span>help</span> message and <span>exit</span><br>  --saveto SAVETO  Save metadata dataframe to file<br>  --assay          Include assay <span>type</span> <span>in</span> output<br>  --desc           Should sample_attribute be included<br>  --detailed       Display detailed metadata table<br>  --expand         Should sample_attribute be expanded<br></code></pre><p>这里我认为最重要的参数是 <code>--detailed</code></p><p>下面结合实例进行说明。</p><h4><span>3.2 实例说明</span></h4><p>假设我们今天有个ID号是GSM2177569：</p><pre><code>$ pysradb metadata GSM2177569<br>study_accession study_title     experiment_accession    experiment_title        experiment_desc organism_taxid  organism_name   library_name    library_strategy        library_source  library_selection       library_layout  sample_accessionsample_title    instrument      instrument_model        instrument_model_desc   total_spots     total_size      run_accession   run_total_spots run_total_bases<br>SRP075720 Smart-seq2 analysis of P17 FACS sorted retinal cells from the Kcng4-cre;stop-YFP X Thy1-stop-YFP Line<span>#1 mice SRX1800476       GSM2177569: Kcng4_2la_H9; Mus musculus; RNA-Seq GSM2177569: Kcng4_2la_H9; Mus musculus; RNA-Seq 10090 Mus musculus      RNA-Seq TRANSCRIPTOMIC cDNA SINGLE SRS1467643   Illumina HiSeq 2500 Illumina HiSeq 2500 ILLUMINA 254714897658407 SRR3587912 2547148 127357400</span><br></code></pre><p>可以看到，使用该工具，我们可以直接拿到关于该数据的具体信息。</p><p>但是在这些信息里似乎有些不够，因为没有下载链接的话，我们还是无法获取数据。</p><p>这时我们只需要加上 <code>--detailed</code> 参数即可：</p><pre><code>$ pysradb metadata --detailed GSM2177569<br>run_accession   study_accession study_title     experiment_accession    experiment_title        experiment_desc organism_taxid  organism_name   library_name    library_strategy        library_source   library_selection       library_layout  sample_accession        sample_title    instrument      instrument_model        instrument_model_desc   total_spots     total_size      run_total_spots  run_total_bases run_alias       sra_url_alt     sra_url AWS_url AWS_free_egress AWS_access_type experiment_alias        source_name     tissue  developmental stage     retina id       ena_fastq_http   ena_fastq_http_1        ena_fastq_http_2        ena_fastq_ftp   ena_fastq_ftp_1 ena_fastq_ftp_2<br>SRR3587912 SRP075720 Smart-seq2 analysis of P17 FACS sorted retinal cells from the Kcng4-cre;stop-YFP X Thy1-stop-YFP Line<span>#1 mice SRX1800476 GSM2177569: Kcng4_2la_H9; Mus musculus; RNA-Seq GSM2177569: Kcng4_2la_H9; Mus musculus; RNA-Seq 10090 Mus musculus &lt;NA&gt; RNA-Seq TRANSCRIPTOMIC cDNA SINGLE SRS1467643 &lt;NA&gt; Illumina HiSeq 2500 Illumina HiSeq 2500 ILLUMINA 2547148 97658407 2547148 127357400 GSM2177569_r1 s3://sra-pub-src-6/SRR3587912/Kcng4_2la_H9_R1.fastq.gz https://sra-pub-run-odp.s3.amazonaws.com/sra/SRR3587912/SRR3587912 https://sra-pub-run-odp.s3.amazonaws.com/sra/SRR3587912/SRR3587912 worldwide anonymous GSM2177569 Mus musculus retina, P17 retina P17 2la http://ftp.sra.ebi.ac.uk/vol1/fastq/SRR358/002/SRR3587912/SRR3587912.fastq.gz &lt;NA&gt; &lt;NA&gt; era-fasp@fasp.sra.ebi.ac.uk:vol1/fastq/SRR358/002/SRR3587912/SRR3587912.fastq.gz &lt;NA&gt; &lt;NA&gt;</span><br></code></pre><p>可以看到，这里我们所需要的所有信息都有了，后面则只需要根据自己的需求从其中提取即可！</p><h3><span>后记</span><span></span></h3><span></span></section><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/4x43bTR0cLRNWiuk_EmN5w",target="_blank" rel="noopener noreferrer">原文链接</a>
