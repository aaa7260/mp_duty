---
title: "ggplot2优雅绘制对角线热图"
date: 2024-04-26T13:24:52Z
draft: ["false"]
tags: [
  "fetched",
  "R语言数据分析指南"
]
categories: ["Acdemic"]
---
ggplot2优雅绘制对角线热图 by R语言数据分析指南
------
<div><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span></span><span><span></span>欢迎关注R语言数据分析指南</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>本节来回答交流群内的一个问题，如何绘制对角线热图，数据为随意构建无实际意义，整个过程仅参考。希望对各位观众老爷能有所帮助。<strong>「数据代码已经整合上传到学习交流群」</strong>，购买过小编R数据可视化文档的朋友可在所加的交流群内获取下载，有需要的朋友可关注文末介绍加入交流群。</p><span>❞</span></blockquote><figure data-tool="mdnice编辑器"><img data-imgfileid="100027550" data-ratio="0.7346072186836518" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgH3CCuLyIvQaoJI5nFdVHXFzWmMaV3LZPJSicCKFriajzCDI8OQMyXbr8w/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="942" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgH3CCuLyIvQaoJI5nFdVHXFzWmMaV3LZPJSicCKFriajzCDI8OQMyXbr8w/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>结果图</span><span></span></h3><blockquote data-tool="mdnice编辑器"><span>❝</span><p>通过对角线分割，一半展示r值，一半展示p值</p><span>❞</span></blockquote><figure data-tool="mdnice编辑器"><img data-imgfileid="100027551" data-ratio="0.5851851851851851" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHht2VsukGtDEqqO0kTIdwz4okYWrn19kZKlD15JdzhIicxvkQociaHKfA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHht2VsukGtDEqqO0kTIdwz4okYWrn19kZKlD15JdzhIicxvkQociaHKfA/640?wx_fmt=png&amp;from=appmsg"></figure><h3 data-tool="mdnice编辑器"><span></span><span><span></span>关注下方公众号下回更新不迷路</span><span></span></h3><section><mp-common-profile data-pluginname="mpprofile" data-id="Mzg3MzQzNTYzMw==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZF0rpeZII9Ltl26VbVagriczTria1fib3XgjwwHEHFjPzkmGpqWDVVHBSzhENictUM2iavAKiaM5lc9USw/0?wx_fmt=png" data-nickname="R语言数据分析指南" data-alias="YanJANtwo" data-signature="R语言重症爱好者，喜欢绘制各种精美的图表，喜欢的小伙伴可以关注我，跟我一起学习" data-from="0" data-is_biz_ban="0"></mp-common-profile></section><pre data-tool="mdnice编辑器"><span></span><code><span>library</span>(tidyverse)<br><span>library</span>(magrittr)<br><span>library</span>(reshape)<br><span>library</span>(psych)<br><span>library</span>(MetBrewer)<br><br>table1 &lt;- read_tsv(<span>"varechem.tsv"</span>)<br>table2 &lt;- read_tsv(<span>"varespec.tsv"</span>) %&gt;% select(<span>1</span>:<span>20</span>)<br><br>pp &lt;- corr.test(table1,table2,method=<span>"pearson"</span>,adjust = <span>"fdr"</span>)<br><br>df &lt;- melt(pp$r) %&gt;% mutate(pvalue=melt(pp$p)[,<span>3</span>],<br>                            p_signif=symnum(pvalue, corr = <span>FALSE</span>, na = <span>FALSE</span>,  <br>                                            cutpoints = c(<span>0</span>, <span>0.001</span>, <span>0.01</span>, <span>0.05</span>, <span>0.1</span>, <span>1</span>), <br>                                            symbols = c(<span>"***"</span>, <span>"**"</span>, <span>"*"</span>, <span>""</span>, <span>" "</span>))) %&gt;% <br>  set_colnames(c(<span>"env"</span>,<span>"genus"</span>,<span>"r"</span>,<span>"p"</span>,<span>"p_signif"</span>)) %&gt;% <br>  mutate(p=round(p,digits = <span>2</span>))<br></code></pre><blockquote data-tool="mdnice编辑器"><span>❝</span><p>给予长期支持我们的读者们一个特别待遇：购买小编R数据可视化案例文档的读者，<strong>「将自动获得2024年及以后更新的绘图文档代码，无需额外付费」</strong>。目前会员文档(2023+2024)<strong>「已经更新上传了150+案例文档」</strong>，每个案例都附有相应的数据和代码，并配有对应的注释文档，方便大家学习和参考。有需要的朋友欢迎到小编的<strong>「淘宝店铺-R语言数据分析指南」</strong>下单购买。</p><span>❞</span></blockquote><p data-tool="mdnice编辑器"><strong>「2024更新的绘图内容同时包含数据+代码+markdown注释文档+文档清单」</strong></p><p data-tool="mdnice编辑器">注：2022版与2023版文档为单独售卖，买任意一年的都可获取2024的文档，小编只分享案例文档不额外回答问题。</p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>淘宝店铺</span><span></span></h3><p><img data-galleryid="" data-imgfileid="100019415" data-ratio="1.0210420841683367" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAbvhPDLGT8NaialEsht92PTYNJWpmVLfoYGic1uha5FyBrDCibibZCLjiazgvpT1XcdwibfVywD2el0VAgg/640?wx_fmt=jpeg" data-type="jpeg" data-w="998" src="https://mmbiz.qpic.cn/mmbiz_jpg/EibnicgwScTAbvhPDLGT8NaialEsht92PTYNJWpmVLfoYGic1uha5FyBrDCibibZCLjiazgvpT1XcdwibfVywD2el0VAgg/640?wx_fmt=jpeg"></p><h3 data-tool="mdnice编辑器"><span></span><span><span></span>2024年已更新案例</span><span></span></h3><p data-tool="mdnice编辑器"><img data-imgfileid="100027547" data-ratio="0.48148148148148145" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgH6aR3daeQq7OWnwg6bxsbq5JLwZXzI4nfbXMSb2o6Z9a4tBBDhDRUicg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgH6aR3daeQq7OWnwg6bxsbq5JLwZXzI4nfbXMSb2o6Z9a4tBBDhDRUicg/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100027549" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHcEcKtqqH4NLDoWrDQoo1RTJiaTsXqsaVBHOr2SZ2uicS4mOxtSUQg1Zw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHcEcKtqqH4NLDoWrDQoo1RTJiaTsXqsaVBHOr2SZ2uicS4mOxtSUQg1Zw/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100027548" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHiaMnuiaibtWoYzSwPKnlF6sxC62ocxFCktTRPqEWe8uRII2ibvUfiaXvcCw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHiaMnuiaibtWoYzSwPKnlF6sxC62ocxFCktTRPqEWe8uRII2ibvUfiaXvcCw/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100027553" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgH0MKhtsoxcxckqjvCnAJttW2419aTs3edVWhB5do75AoQC73JCZenYg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgH0MKhtsoxcxckqjvCnAJttW2419aTs3edVWhB5do75AoQC73JCZenYg/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100027554" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHNQo7Vxa1kFAInwbkLgp4VZKib1mdBm7JbwmvBB0GRmicqBZz0J2behiaA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHNQo7Vxa1kFAInwbkLgp4VZKib1mdBm7JbwmvBB0GRmicqBZz0J2behiaA/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100027556" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHPH0pYrNIOSc0AjpHoKd2kEic6XYwuhaesoE7mgt9o3a5wQdYQjvj4iaw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHPH0pYrNIOSc0AjpHoKd2kEic6XYwuhaesoE7mgt9o3a5wQdYQjvj4iaw/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100027552" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHy8enIiaU473euunELSzxtKBAtIWBXl7ropibrv8l9k7DmsLwtKOiby6AA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHy8enIiaU473euunELSzxtKBAtIWBXl7ropibrv8l9k7DmsLwtKOiby6AA/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100027555" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHgNM3pe6qx8RGmJ2NgjNy7lgDYnwdQibTupcibK4WSk4OSzbAz63NYkhQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHgNM3pe6qx8RGmJ2NgjNy7lgDYnwdQibTupcibK4WSk4OSzbAz63NYkhQ/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100027561" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgH7zsaPGHhniciauheoeXgdG8UEferjwOxh8JTbl13YbDZHXV0D1SfjZ6w/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgH7zsaPGHhniciauheoeXgdG8UEferjwOxh8JTbl13YbDZHXV0D1SfjZ6w/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100027558" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHc0uOiaTnQ5aTHiblX7MtBzSTaVOibU9Tng9WWOzr3jgSkIeatAicSXvVsw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHc0uOiaTnQ5aTHiblX7MtBzSTaVOibU9Tng9WWOzr3jgSkIeatAicSXvVsw/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100027562" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHIZmUGiaZaogibbwe5iccvKCqSrOGicJfaeiaDE4DETXMjHhpSMfyZBOtpwQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHIZmUGiaZaogibbwe5iccvKCqSrOGicJfaeiaDE4DETXMjHhpSMfyZBOtpwQ/640?wx_fmt=png&amp;from=appmsg"><img data-imgfileid="100027560" data-ratio="0.4255555555555556" data-src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHYWL0W46Wyy3Nnic9n259a7aD8KzkpmjFIDG2icABqAiaR24HcBBnIfTOw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="900" src="https://mmbiz.qpic.cn/mmbiz_png/EibnicgwScTAZv01Lmiaj4TkQ5CUrxFLTgHYWL0W46Wyy3Nnic9n259a7aD8KzkpmjFIDG2icABqAiaR24HcBBnIfTOw/640?wx_fmt=png&amp;from=appmsg"></p></section><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/shixbSODBzTL9ZI-tV6yEg",target="_blank" rel="noopener noreferrer">原文链接</a>
