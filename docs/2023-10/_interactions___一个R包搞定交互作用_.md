---
title: "{interactions}: 一个R包搞定交互作用！"
date: 2023-10-13T10:18:22Z
draft: ["false"]
tags: [
  "fetched",
  "R语言和统计"
]
categories: ["Acdemic"]
---
{interactions}: 一个R包搞定交互作用！ by R语言和统计
------
<div><p data-mpa-powered-by="yiban.io"><span>今天介绍一个R包，名为<span>{interactions}</span> [1]，可以帮助画出交互作用的图片。</span><br></p><p><span><br></span></p><p><span>它可以处理多种交互作用的情况，比如一个分类变量交互一个连续变量，或者两个连续变量进行交互， 等等。下面举几个例子，给予说明。</span></p><p><span><br></span></p><p><span>首先安装R包，并且载入： <br></span></p><p><br></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" mpa-preserve="t" mpa-from-tpl="t"><pre><code><span>install.packages(<span>"interactions"</span>)<br mpa-from-tpl="t"><span>library</span>(interactions)</span></code></pre></section><p><span>R包get！<br></span></p><p><span><br></span></p><p><span>将会使用R自带的数据集iris，查看一下概况： </span></p><p><br></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" mpa-preserve="t" mpa-from-tpl="t"><pre><code><span>summary(iris)</span></code></pre></section><p><img data-galleryid="" data-ratio="0.2074074074074074" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTnYPsNgjpQP9ibY5PF7Pw8X8tUeOLnEnsLhHhV5Tu4WfhYs7XSfsAFv7A/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTnYPsNgjpQP9ibY5PF7Pw8X8tUeOLnEnsLhHhV5Tu4WfhYs7XSfsAFv7A/640?wx_fmt=png"></p><p><span>下一步，建立一个包含交互项的线性模型，其中一个为连续变量，一个为分类变量，代码如下： </span></p><p><br></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" mpa-preserve="t" mpa-from-tpl="t"><pre><code><span>model1 &lt;- lm(Sepal.Length ~ Petal.Length*Species, data = iris)<br mpa-from-tpl="t">summary(model1)</span></code></pre></section><p><img data-galleryid="" data-ratio="0.6907407407407408" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTnBjlIbGrGiadlbib2RMKScufNAh3I9qPK69PaWRRd7CvvyZHiacsAficlrA/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTnBjlIbGrGiadlbib2RMKScufNAh3I9qPK69PaWRRd7CvvyZHiacsAficlrA/640?wx_fmt=png"><span></span></p><p><span>根据上述模型，可以制作交互作用图，代码如下： <br></span></p><p><br></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" mpa-preserve="t" mpa-from-tpl="t"><pre><code><span>interact_plot(model1, <br mpa-from-tpl="t">              pred = Petal.Length,  </span><span># 自变量</span><span><br mpa-from-tpl="t">              modx = Species)    </span><span># 调节变量</span></code></pre></section><p><img data-galleryid="" data-ratio="0.7382297551789078" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTnkgicUU5K84LE2ZuEXrVhTDMJlxFAEaGPq5EooE3zamaIrqouS4DhBfQ/640?wx_fmt=png" data-type="png" data-w="1062" src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTnkgicUU5K84LE2ZuEXrVhTDMJlxFAEaGPq5EooE3zamaIrqouS4DhBfQ/640?wx_fmt=png"></p><p><span>也可以指定仅显示两个组别： </span></p><p><span><br mpa-from-tpl="t"></span></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" mpa-preserve="t" mpa-from-tpl="t"><pre><code><span>interact_plot(model1, pred = Petal.Length, modx = Species,<br mpa-from-tpl="t">              modx.values = c(<span>"versicolor"</span>, <span>"virginica"</span>))</span></code></pre></section><p><img data-galleryid="" data-ratio="0.7467166979362101" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTn3fqoSgexNAicYtmk1yofUWM0EIXvQdIOGXyu6L4MGR6dhdwv7eoRictA/640?wx_fmt=png" data-type="png" data-w="1066" src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTn3fqoSgexNAicYtmk1yofUWM0EIXvQdIOGXyu6L4MGR6dhdwv7eoRictA/640?wx_fmt=png"></p><p><span>如果希望添加原始样本的点，以及添加回归直线的置信区间，可以这么做： </span></p><p><br></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" mpa-preserve="t" mpa-from-tpl="t"><pre><code><span>interact_plot(model1, pred = Petal.Length, modx = Species,<br mpa-from-tpl="t">              modx.values = c(<span>"versicolor"</span>, <span>"virginica"</span>),<br mpa-from-tpl="t">              interval = TRUE,   </span><span># 添加置信区间</span><span><br mpa-from-tpl="t">              plot.points = TRUE)   </span><span># 添加样本</span></code></pre></section><p><img data-galleryid="" data-ratio="0.7609108159392789" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTnGdHELBWUtJlIgic9WyMhZibhdQfPgraNLS5GxfkSHD3tvdY0no9a9H4Q/640?wx_fmt=png" data-type="png" data-w="1054" src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTnGdHELBWUtJlIgic9WyMhZibhdQfPgraNLS5GxfkSHD3tvdY0no9a9H4Q/640?wx_fmt=png"></p><p><span>再举一个例子，两个自变量都为连续变量，同样，建立一个模型： </span></p><p><span><br mpa-from-tpl="t"></span></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" mpa-preserve="t" mpa-from-tpl="t"><pre><code><span>model2 &lt;- lm(Sepal.Length ~ Petal.Length*Sepal.Width, data = iris)<br mpa-from-tpl="t">summary(model2)</span></code></pre></section><p><img data-galleryid="" data-ratio="0.6675925925925926" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTn0HkorW1KDTancN6ialYvSr6kKTSJlCcNdLiapmXr9wmFbPyw9ic1Mu9VA/640?wx_fmt=png" data-type="png" data-w="1080" src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTn0HkorW1KDTancN6ialYvSr6kKTSJlCcNdLiapmXr9wmFbPyw9ic1Mu9VA/640?wx_fmt=png"></p><p><span>制作交互作用图： </span></p><p><br></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" mpa-preserve="t" mpa-from-tpl="t"><pre><code><span>interact_plot(model2, pred = Petal.Length, modx = Sepal.Width,<br mpa-from-tpl="t">              interval = TRUE)</span></code></pre></section><p><img data-galleryid="" data-ratio="0.7379182156133829" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTn3ickjoXcOHpT64KysEMXsiaLov0SPYJCjicV4xvayzyJ36GHM3gQKLwaA/640?wx_fmt=png" data-type="png" data-w="1076" src="https://mmbiz.qpic.cn/mmbiz_png/pCu8RzQCByQNk36AXzrhgfsjBqFlZXTn3ickjoXcOHpT64KysEMXsiaLov0SPYJCjicV4xvayzyJ36GHM3gQKLwaA/640?wx_fmt=png"></p><p><span>从上图可知，在默认情况下，它会将调节变量(Sepal.Width为连续变量)分成三条直线：均数以及±1 SD。<br></span></p><p><br></p><p><span>好啦，今天的内容就到这里。</span><span>如果有帮助，记得分享给需要的人</span><img data-ratio="1" data-src="https://res.wx.qq.com/t/wx_fed/we-emoji/res/v1.3.10/assets/Expression/Expression_67@2x.png" data-w="128" src="https://res.wx.qq.com/t/wx_fed/we-emoji/res/v1.3.10/assets/Expression/Expression_67@2x.png"><span>！</span></p><p><br></p><p><br></p><p><span><em><span>参考文献</span></em></span></p><p><span><em><span><br mpa-from-tpl="t"></span></em></span></p><section data-mpa-preserve-tpl-color="t" data-mpa-template="t" mpa-preserve="t" mpa-from-tpl="t"><pre><code><span>[1] https://cran.r-project.org/web/packages/interactions/index.html</span></code></pre></section><p><br></p><p><span><strong><span>公众号的线上课程</span></strong></span></p><p><span>1. <a target="_blank" href="http://mp.weixin.qq.com/s?__biz=Mzk0MzE5OTAxMg==&amp;mid=2247506555&amp;idx=2&amp;sn=386b4d66c19578e0d318c6bc1ac5e21f&amp;chksm=c3351c30f4429526ca948ba1d78311b1f16f017a5bc17623de1276dc38e89df5bc9bc029f0de&amp;scene=21#wechat_redirect" textvalue="《R语言和统计新手课程》" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2">《R语言和统计新手课程》</a></span></p><p><span>2. <a target="_blank" href="http://mp.weixin.qq.com/s?__biz=Mzk0MzE5OTAxMg==&amp;mid=2247506977&amp;idx=1&amp;sn=b7f96f32505ac8b88fb68357c8d43d69&amp;chksm=c3351a6af442937cc8777dd9241f23c3ab8e049677738b222d8dabe7aeb1e3074c80ce749dcd&amp;scene=21#wechat_redirect" textvalue="《回归：从入门到进阶》" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2">《回归：从入门到进阶》</a></span></p><p><span><br></span></p><p><span><strong><span>公众号核心成员的成果发表</span></strong></span></p><p><span><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=Mzk0MzE5OTAxMg==&amp;mid=2247506555&amp;idx=1&amp;sn=0ca95fddcc184506e02c5b7ea70c0567&amp;chksm=c3351c30f4429526acad9c6c20dc0c3b76dc849d57a1755155f234f6eb31a24a904962f7aa5d&amp;scene=21#wechat_redirect" textvalue="《SCI医学1区论文》" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2">《SCI医学1区影响因子8.8分论文》</a></span></p><section><br></section><section data-mpa-template="t" mpa-from-tpl="t"><section><span>▌本文由</span><span><strong mpa-from-tpl="t"><span>R语言和统计</span></strong></span><span>首发</span></section><section><span>▌课程相关咨询可添加R师妹微信: kefu_rstats</span></section><section><span>▌编辑：June</span></section><section><span>▌邮箱：contact@rstats.cn</span></section><section><span>▌网站：www.rstats.cn</span></section><section><span>▌<strong>我们致力于</strong><strong>让R语言和统计变得简单！</strong><br></span></section><section><br></section><section mpa-from-tpl="t"><section label="Powered by 135editor.com" data-role="outer" mpa-from-tpl="t"><section data-role="paragraph" mpa-from-tpl="t"><section data-mpa-template="t" mpa-from-tpl="t"><section mpa-from-tpl="t"><section label="Powered by 135editor.com" data-role="outer" mpa-from-tpl="t"><section data-role="paragraph" mpa-from-tpl="t"><section mpa-from-tpl="t"><section mpa-from-tpl="t"><section label="Powered by 135editor.com" data-role="outer" mpa-from-tpl="t"><section data-role="paragraph" mpa-from-tpl="t"><hr><section><br></section></section></section></section></section></section></section></section></section></section></section></section></section><p><br></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/lFLHIj_1o1iC9MQuQNX7PQ",target="_blank" rel="noopener noreferrer">原文链接</a>
