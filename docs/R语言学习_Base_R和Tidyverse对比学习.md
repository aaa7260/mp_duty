---
title: "R语言学习：Base-R和Tidyverse对比学习"
date: 2022-09-11T10:38:06Z
draft: ["false"]
tags: [
  "fetched",
  "R语言"
]
categories: ["Acdemic"]
---
R语言学习：Base-R和Tidyverse对比学习 by R语言
------
<div><p>俗话说，“条条大道通罗马”。</p><p>R语言的世界里，同一个问题，可以用不同的解决方案，达成同一目的。<br></p><p>对于R语言初学者，是从Base-R入手，还是从Tidyverse开始，我们可以对一系列相同问题，采用Base-R和Tidyverse的解决方案，来做个对比学习。<br></p><p>本文采用R语言自带的mtcars数据集。<br></p><p>1 数据集查看<br></p><section><p>Base-R方案</p><pre><code>head(mtcars)<br>tail(mtcars)<br>sample(mtcars, 10)<br></code></pre><p>Tidyverse方案</p><pre><code><span>library</span>(tidyverse)<br>mtcars %&gt;%<br>  slice_head(n=<span>6</span>)<br>mtcars %&gt;%<br>  slice_tail(n=<span>6</span>)<br>mtcars %&gt;%<br>  slice_sample(n=<span>10</span>)<br></code></pre></section><p>2 获取数据框特定单元的值<br></p><section><p>Base-R方案</p><pre><code>mtcars<span>$mpg</span>[3]<br></code></pre><p>Tidyverse方案</p><pre><code><span>mtcars</span> %&gt;% <br>  <span>select</span>(mpg) %&gt;% <br>  slice(<span>3</span>)<br></code></pre></section><p><img data-galleryid="" data-ratio="0.35668789808917195" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacuuk1kFfscCiaeibcFCkyH9rkEdAOrU7MXic1CDCUs7Z42MYg8IJMmN2FlicPMQibTicjvSGGMPT8qVy2wQ/640?wx_fmt=png" data-type="png" data-w="785" src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacuuk1kFfscCiaeibcFCkyH9rkEdAOrU7MXic1CDCUs7Z42MYg8IJMmN2FlicPMQibTicjvSGGMPT8qVy2wQ/640?wx_fmt=png"></p><p><br></p><p>3 添加一列到数据框</p><section><p>Base-R方案</p><pre><code>mtcars<span>$hwratio</span> &lt;- mtcars<span>$hp</span> / mtcars<span>$wt</span><br></code></pre><p>Tidyverse方案</p><pre><code>mtcars <span>&lt;<span>-</span> <span>mtcars</span> %&gt;</span>% <br>  mutate(hwratio = hp/wt)<br></code></pre></section><p>4 提取行<br></p><section><p>Base-R方案</p><pre><code>mtc8 <span>&lt;<span>-</span> <span>subset</span>(<span>mtcars</span>, <span>cyl</span> == <span>8)</span><br><span>head</span>(<span>mtc8</span>)<br></span></code></pre><p>Tidyverse方案</p><pre><code><span>mtcars</span> %&gt;% <br>  filter(cyl == <span>8</span>) %&gt;% <br>  slice_head(n = <span>6</span>)<br></code></pre></section><p>5 分组求均值<br></p><section><p>Base-R方案</p><pre><code>tapply(mtcars<span>$mpg</span>, mtcars<span>$cyl</span>, mean)<br></code></pre><p>Tidyverse方案</p><pre><code><span>mtcars</span> %&gt;% <br>  group_by(cyl) %&gt;% <br>  summarise(mean_mpg = mean(mpg))<br></code></pre></section><p><img data-galleryid="" data-ratio="0.5929878048780488" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacuuk1kFfscCiaeibcFCkyH9rkA9ZaA2v6CmWBG8r2fWFliaH30YGjRAoPoKib5VlzGy9ktNberVJqbzTg/640?wx_fmt=png" data-type="png" data-w="656" src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacuuk1kFfscCiaeibcFCkyH9rkA9ZaA2v6CmWBG8r2fWFliaH30YGjRAoPoKib5VlzGy9ktNberVJqbzTg/640?wx_fmt=png"></p><p><br></p><p>6 按着行计算均值<br></p><section><p>Base-R方案</p><pre><code>rowMeans(mtcars)<br></code></pre><p>Tidyverse方案</p><pre><code><span>mtcars</span> %&gt;% <br>  rowwise() %&gt;% <br>  mutate(m = rowMeans(across(everything()))) %&gt;% <br>  <span>select</span>(m)<br></code></pre></section><p>7 多列分组计算均值</p><section><p>Base-R方案</p><pre><code>tapply(<br>  mtcars$mpg,<br>  <span>list</span>(<br>    mtcars$cyl,<br>    mtcars$am<br>  ),<br>  mean<br>)<br></code></pre><p>Tidyverse方案</p><pre><code><span>mtcars</span> %&gt;% <br>  group_by(cyl, am) %&gt;% <br>  summarise(m = mean(mpg))<br></code></pre></section><p><img data-galleryid="" data-ratio="0.7926315789473685" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacuuk1kFfscCiaeibcFCkyH9rkg9nPEEGBYFU1vG4Xq7ESflGyqDZN0Z0VuvydXhMicP8MtibboPtibSA7A/640?wx_fmt=png" data-type="png" data-w="950" src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacuuk1kFfscCiaeibcFCkyH9rkg9nPEEGBYFU1vG4Xq7ESflGyqDZN0Z0VuvydXhMicP8MtibboPtibSA7A/640?wx_fmt=png"></p><p><br></p><p>8 二元编码<br></p><section><p>Base-R方案</p><pre><code><span>mpg_high_low</span> &lt;- <br>  ifelse(<br>    mtcars<span>$mpg</span> &gt;= <span>20</span>.<span>09</span>,<br>    <span>"High"</span>,<br>    <span>"Low"</span><br>  )<br>mpg_high_low<br></code></pre><p>Tidyverse方案</p><pre><code>mtcars %&gt;% <br>  mutate(<br>    mpg_high_low = case_when(<br>      mpg &gt;= <span>20.09</span> ~ <span>"High"</span>,<br>      <span>TRUE</span> ~ <span>"Low"</span><br>    )<br>  ) %&gt;% <br>  <span>select</span>(mpg_high_low) %&gt;% <br>  <span>as</span>.vector()</code></pre></section><p>好了，我写完了。</p><p><strong>附录：</strong>一份完整Code</p><section><pre><code><span># BaseR和Tidyverse对比学习</span><br><span># R语言自带的mtcars数据集</span><br><br><span># 1 数据集查看</span><br><span># Base-R</span><br>head(mtcars)<br>tail(mtcars)<br>sample(mtcars, <span>10</span>)<br><span># Tidyverse</span><br>library(tidyverse)<br>mtcars %&gt;%<br>  slice_head(n=<span>6</span>)<br>mtcars %&gt;%<br>  slice_tail(n=<span>6</span>)<br>mtcars %&gt;%<br>  slice_sample(n=<span>10</span>)<br><br><span># 2 获取数据框特定单元的值</span><br><span># Base-R</span><br>mtcars$mpg[<span>3</span>]<br><br><span># Tidyverse</span><br>mtcars %&gt;% <br>  <span>select</span>(mpg) %&gt;% <br>  slice(<span>3</span>)<br><br><span># 3 添加一列到数据框</span><br><span># Base-R</span><br>mtcars$hwratio &lt;- mtcars$hp / mtcars$wt<br><span># Tidyverse</span><br>mtcars &lt;- mtcars %&gt;% <br>  mutate(hwratio = hp/wt)<br><br><span># 4 提取行</span><br><span># Base-R</span><br>mtc8 &lt;- subset(mtcars, cyl == <span>8</span>)<br>head(mtc8)<br><span># Tidyverse</span><br>mtcars %&gt;% <br>  filter(cyl == <span>8</span>) %&gt;% <br>  slice_head(n = <span>6</span>)<br><br><span># 5 分组求均值</span><br><span># Base-R</span><br>tapply(mtcars$mpg, mtcars$cyl, mean)<br><span># Tidyverse</span><br>mtcars %&gt;% <br>  group_by(cyl) %&gt;% <br>  summarise(mean_mpg = mean(mpg))<br><br><span># 6 按着行计算均值</span><br><span># Base-R</span><br>rowMeans(mtcars)<br><span># Tidyverse</span><br>mtcars %&gt;% <br>  rowwise() %&gt;% <br>  mutate(<span>m</span> = rowMeans(across(everything()))) %&gt;% <br>  <span>select</span>(<span>m</span>)<br><br><span># 7 多列分组计算求均值</span><br><span># Base-R</span><br>tapply(<br>  mtcars$mpg,<br>  list(<br>    mtcars$cyl,<br>    mtcars$am<br>  ),<br>  mean<br>)<br><span># Tidyverse</span><br>mtcars %&gt;% <br>  group_by(cyl, am) %&gt;% <br>  summarise(<span>m</span> = mean(mpg))<br><br><span># 8 二元编码</span><br><span># Base-R</span><br>mpg_high_low &lt;- <br>  ifelse(<br>    mtcars$mpg &gt;= <span>20.09</span>,<br>    <span>"High"</span>,<br>    <span>"Low"</span><br>  )<br>mpg_high_low<br><br><span># Tidyverse</span><br>mtcars %&gt;% <br>  mutate(<br>    mpg_high_low = case_when(<br>      mpg &gt;= <span>20.09</span> ~ <span>"High"</span>,<br>      TRUE ~ <span>"Low"</span><br>    )<br>  ) %&gt;% <br>  <span>select</span>(mpg_high_low) %&gt;% <br>  as.vector()<span></span></code></pre></section><p>我创建了<strong>R语言群</strong>，欢迎大家加入群。我的<span>微信：</span><strong>luqin360</strong><strong></strong></p><p><img data-galleryid="" data-ratio="1.0117096018735363" data-s="300,640" data-type="png" data-w="427" data-src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacvbB8IDOtGuRAWrlvv7O30vwqDtkQD7lSvqPWbVYXzobmd0G0EqO8v3LfP5YSwsB3AvaAtSLZsVvw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" src="https://mmbiz.qpic.cn/mmbiz_png/pMPbyicMFiacvbB8IDOtGuRAWrlvv7O30vwqDtkQD7lSvqPWbVYXzobmd0G0EqO8v3LfP5YSwsB3AvaAtSLZsVvw/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"></p><p><br></p><p><span>我提供付费的R语言咨询和服务。</span></p><p><span>你我连接，相互交流，创造更多价值。</span></p><section><br></section><section><span><strong>—END—</strong></span></section><p><br></p><p><span><strong>  你或许还想看</strong></span></p><p><br></p><p><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA4NDgyMzkyMA==&amp;mid=2650632942&amp;idx=1&amp;sn=2f7de9e93a6cdb9311e6c49ecdfb60b6&amp;chksm=87e888f1b09f01e7a15eca6855eb6f42e45e2f647fe50a40b6fb387a1bb06842291841211c25&amp;scene=21#wechat_redirect" textvalue="R语言学习：" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" wah-hotarea="click" hasload="1"><span><strong>R语言学习：dplyr包数据操作</strong></span></a></p><p><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA4NDgyMzkyMA==&amp;mid=2650632901&amp;idx=1&amp;sn=7de778af433fdf0bae9d82acd44594c0&amp;chksm=87e888dab09f01cc8deb5c41405ffb264287e23245882aa71cbbe1083465a3ee8d958c9834ca&amp;scene=21#wechat_redirect" textvalue="R语言学习：g" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" wah-hotarea="click" hasload="1"><span><strong>R语言学习：ggplot2包画图</strong></span></a></p><p><br></p><p><span>喜欢本文点个在看</span></p><p><span>或关注下方公众号</span></p><p><br></p><section powered-by="xiumi.us"><section><p><span>你将感受到一个R语言学习人的灵魂</span></p><section><mp-common-profile data-index="0" data-id="MzA4NDgyMzkyMA==" data-headimg="http://mmbiz.qpic.cn/mmbiz/pMPbyicMFiacvUQqibc9APO9dT4alyEec7BfVSysNQWKR2j7XatqgsLmXqR6Jl0jCVIHVb1UvV1yCfXSs26EvAo4g/0" data-nickname="R语言" data-alias="Ryuyan360" data-signature="R语言学习与实践" data-origin_num="344" data-is_biz_ban="0" data-isban="0" data-from="2"></mp-common-profile></section><p><span><strong>我的一个小号</strong></span></p><p><span><strong>数据科学与人工智能</strong></span></p><section><mp-common-profile data-index="1" data-id="MzA4OTg5NzY3NA==" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/BIZeGU4QG9ibHbddhOUdrj868uCeqOrWykEMbibszkFNnNCqmfvWvEhExyG5qA3nc2gbIbYZeltRGWictGs4DpG1g/0?wx_fmt=png" data-nickname="数据科学与人工智能" data-alias="DS_AI_shujuren" data-signature="学习和实践数据科学与人工智能" data-origin_num="261" data-is_biz_ban="0" data-isban="0" data-from="2"></mp-common-profile></section></section></section><hr><p><br></p><p><span>公众号：R语言</span></p><p><span>作者：王路情<br></span></p><p><br></p><p><span><strong>R语言学习者。</strong></span></p><p><span><strong>R语言深度使用者。</strong></span></p><p><span><strong>我用R语言做数据科学和医学科研。</strong></span></p><p><span><strong>我提供R语言咨询和服务。</strong></span></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/bImZg4AuwqtcWDvUc7lHEQ",target="_blank" rel="noopener noreferrer">原文链接</a>
