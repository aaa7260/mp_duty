---
title: "R数据框一个有趣的小问题"
date: 2024-06-21T22:13:54Z
draft: ["false"]
tags: [
  "fetched",
  "生信星球"
]
categories: ["Acdemic"]
---
R数据框一个有趣的小问题 by 生信星球
------
<div><section><img data-ratio="1" data-src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrDic8XGmJ0b7oibVJajb0emLBHSvuibGG49ooBgtaAibE3TNJ00iaHviaMtdIKQJfCwtUfuHicDImtSfIxg/640?wx_fmt=png" data-type="png" data-w="64" width="20px" data-imgfileid="100011258" src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrDic8XGmJ0b7oibVJajb0emLBHSvuibGG49ooBgtaAibE3TNJ00iaHviaMtdIKQJfCwtUfuHicDImtSfIxg/640?wx_fmt=png"><img data-ratio="1" data-src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrDic8XGmJ0b7oibVJajb0emLPukRHCbicy4pNKeEv9qd7aWSfsx7roib2od3xPrRPicw3a0kbn0uQ6JmQ/640?wx_fmt=png" data-type="png" data-w="64" width="20px" data-imgfileid="100011257" src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrDic8XGmJ0b7oibVJajb0emLPukRHCbicy4pNKeEv9qd7aWSfsx7roib2od3xPrRPicw3a0kbn0uQ6JmQ/640?wx_fmt=png"><span> 今天是生信星球陪你的<span><strong>第963天</strong></span></span><img data-imgfileid="100011259" data-ratio="1" data-src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrDic8XGmJ0b7oibVJajb0emLBHSvuibGG49ooBgtaAibE3TNJ00iaHviaMtdIKQJfCwtUfuHicDImtSfIxg/640?wx_fmt=png" data-type="png" data-w="64" width="20px" src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrDic8XGmJ0b7oibVJajb0emLBHSvuibGG49ooBgtaAibE3TNJ00iaHviaMtdIKQJfCwtUfuHicDImtSfIxg/640?wx_fmt=png"></section><hr><section><span><span>   </span><span>大神一句话，菜鸟跑半年。我不是大神，但我可以缩短你走弯路的半年~</span></span></section><section><span>   就像歌儿唱的那样，如果你不知道该往哪儿走，就留在这学点生信好不好~</span></section><p><span>   这里有豆豆和花花的学习历程，从新手到进阶，生信路上有你有我！</span></p><section><section><blockquote><p>豆豆写于2024.6.21</p></blockquote></section><h3><span><span> </span>前言</span></h3><p>首先假设我们有一个小的数据框，2行1列：</p><pre><code>test = data.frame(col1 = c(<span>'remove_cell'</span>, <span>100</span>))<br>rownames(test) = c(<span>'row1'</span>,<span>'row2'</span>)<br></code><monica-code-tools></monica-code-tools></pre><figure><br></figure><figure><img data-imgfileid="100011250" data-ratio="0.5636363636363636" data-src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrjKl8lqHiaic5ick5JX9RSIxNjVYYMemuZaazJpR0xiadWaxNlltP5ictSguG2FPZssJZWG3rfKQHtPeg/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="330" title="" src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrjKl8lqHiaic5ick5JX9RSIxNjVYYMemuZaazJpR0xiadWaxNlltP5ictSguG2FPZssJZWG3rfKQHtPeg/640?wx_fmt=png&amp;from=appmsg"><figcaption></figcaption></figure><p>然后如果想把第一行去掉，只保留第二行数据，我们一般的操作可以有两种</p><ul><li><p>直接中括号减去第一行：<code>test[-1,]</code></p></li><li><p><code>dplyr</code>的<code>slice</code>函数：<code>slice(test,-1)</code></p></li></ul><figure><img data-imgfileid="100011251" data-ratio="0.6742857142857143" data-src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrjKl8lqHiaic5ick5JX9RSIxNvlF5q7jW2ibIvqqS13KICsB9zWobUWMslJZINdV4cgbicfKMm05tAmvA/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="350" title="" src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrjKl8lqHiaic5ick5JX9RSIxNvlF5q7jW2ibIvqqS13KICsB9zWobUWMslJZINdV4cgbicfKMm05tAmvA/640?wx_fmt=png&amp;from=appmsg"><figcaption></figcaption></figure><p>此时就发现了，第一种方法会只得到了一个向量，而不是像第二种依然得到一个数据框</p><h3><span><span> </span>那么问题出在哪里呢？</span></h3><ul><li><p>首先是因为我们的数据框就只有2行1列，一共就2个单元格，去掉第一行，其实也就是只剩下一个单元格的元素了；</p></li><li><p>其次<code>[]</code> 这个符号，它其实也是一个函数，存在于base包中，它有一个默认参数<code>drop = TRUE</code>，意思是：</p></li></ul><blockquote><p>If <code>TRUE</code> the result is coerced to the lowest possible dimension<br>（默认情况下，会返回最最原始的状态。如果剩下的内容是字符串，那么就直接返回字符串；如果剩下的还是一个数据框，那么就返回数据框）</p></blockquote><p>这个函数其实也可以看帮助文档，只要在这种特殊符号的函数两边加上引号即可：<code>?"["</code>  <br>  【至于我是怎么知道的，因为我有个花花，她说她看了好几本R语言的书里面有提到】</p><ul><li><p>最后的那个<code>dplyr::slice</code> ，当然就是将参数默认调整成了：<code>drop = TRUE</code> ，所以会返回数据框，而没有对数据进行降级</p></li></ul><p>因此，如果我们想通过修改参数的方法，将第一种的结果也输出为数据框，可以这样：</p><figure><img data-imgfileid="100011252" data-ratio="0.3333333333333333" data-src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrjKl8lqHiaic5ick5JX9RSIxNDZEUGT9w083MWHFkhuciaYicRY4Ut1frQTpoe4eLJ8VsrICuK5pwuypw/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="444" title="" src="https://mmbiz.qpic.cn/mmbiz_png/8oKPbJgbBHrjKl8lqHiaic5ick5JX9RSIxNDZEUGT9w083MWHFkhuciaYicRY4Ut1frQTpoe4eLJ8VsrICuK5pwuypw/640?wx_fmt=png&amp;from=appmsg"><figcaption></figcaption></figure></section><section><hr></section><p><span><strong><span>初学生信，很荣幸带你迈出第一步</span></strong></span></p><p><span><strong>🤓 </strong></span><strong><span>生信星球 </span></strong><span><strong>🌎 </strong></span><span><span><strong>~ </strong></span><strong><span>一个不拽术语、通俗易懂的生信知识平台</span></strong></span></p><p><mp-style-type data-value="3"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/24mCj1oFxSSIT5t_MGHWDw",target="_blank" rel="noopener noreferrer">原文链接</a>
