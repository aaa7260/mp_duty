---
title: "生信技能树-day13 Linux进阶-vim编辑器、文本处理三驾马车grep、sed、awk"
date: 2024-06-21T00:55:55Z
draft: ["false"]
tags: [
  "fetched",
  "生信菜鸟团"
]
categories: ["Acdemic"]
---
生信技能树-day13 Linux进阶-vim编辑器、文本处理三驾马车grep、sed、awk by 生信菜鸟团
------
<div><blockquote data-tool="mdnice编辑器"><p><span>从我们</span><span>生信技能树</span><span>历年的几千个马拉松授课学员里面募集了一些优秀的创作者，某种意义来说是传承了我们生信技能树的知识整理和分享的思想！</span></p></blockquote><hr data-tool="mdnice编辑器"><p data-tool="mdnice编辑器">今天的是三周合计15天的数据挖掘授课学员一点一滴整理的授课知识点笔记哦，还有互动练习题哈，欢迎大家点击文末的阅读原文去关注我们学员的公众号哦！</p><p><img data-galleryid="" data-imgfileid="100039955" data-ratio="0.9869791666666666" data-s="300,640" data-src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2LosicZWFXx8AD2QqR5r26iaEib7iaTAeenkZojmCFn9w4mCdFoicJMx4AQ3q11rUoUaJn8lUjibicBWzLIhSAQ/640?wx_fmt=png&amp;from=appmsg" data-type="png" data-w="1536" src="https://mmbiz.qpic.cn/mmbiz_png/iaRJcrq2LosicZWFXx8AD2QqR5r26iaEib7iaTAeenkZojmCFn9w4mCdFoicJMx4AQ3q11rUoUaJn8lUjibicBWzLIhSAQ/640?wx_fmt=png&amp;from=appmsg"></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h2 data-tool="mdnice编辑器"><span>vim编辑器</span></h2><ul data-tool="mdnice编辑器"><li><section>大多数linux都会自带的文本编辑器</section></li><li><section>具有代码补全、编译、错误跳转等功能</section></li><li><section>三种模式：命令模式、编辑模式、末行模式</section></li></ul><ol data-tool="mdnice编辑器"><li><section><p>命令模式</p></section></li></ol><ul><li><section><p>打开文件：vim [FILENAME]</p></section></li><li><section><p>可以移动光标、复制黏贴字符或整行</p></section></li><li><section><p>命令：</p><p>^和$：快速移动到所在行的开头和末尾（0也可到开头）</p><p>30↓：向下移动30行</p><p>ctrl+f或b：上下翻页</p><p>[[：快速回到文档开头</p><p>]]：快速到文件底部</p><p>u：撤销前一个动作</p><p>ctrl+u：重做上一个动作</p><p>x：剪切单个字符，200x剪切200个连续字符，不足200个则只删除整行</p><p>dd：删除整行</p><p>yy：复制所在行</p><p>p/P：在所在行的下面/上面进行黏贴</p></section></li></ul><li><section><p>编辑模式</p></section></li><ul><li><section><p>命令模式下按i（insert）进入</p></section></li><li><section><p>编辑模式下键盘即为输入正常的字母</p></section></li><li><section><p>esc退出，回到命令模式</p></section></li></ul><li><section><p>末行模式</p></section></li><ul><li><section><p>命令模式下按:进入</p></section></li><li><section><p>命令：</p><p>:wq：保存并退出</p><p>:q：直接退出</p><p>:q!：不保存修改，直接退出</p><p>/[KEYWORD]：查询，n向下查找，N向上查找</p><p>:s%/[替换什么]/[替换成什么]/g：全局替换</p><p>:s/[替换什么]/[替换成什么]/g：替换光标所在行</p><p>:s/[替换什么]/[替换成什么]/：替换光标所在行的第一次</p><p>:s%/[替换什么]/[替换成什么]/：全局替换第一次</p><p>:set number：或nu，显示行号</p><p>:set nonu：取消行号</p><p>:set list：显示不可见字符（分辨制表符和空格）</p></section></li><li><section><p>关于不同平台下的格式问题及转换（比如回车键）：</p><p>windows系统：\r\n</p><p>mac系统：\r</p><p>linux系统：\n</p></section></li><li><section><p>不同平台的格式转换：</p><p>:set ff=unix</p><p>或：dos2unix（dos是windows格式，unix是linux格式，mac是mac格式，类推）</p></section></li><li><section><p>esc退出，回到命令模式</p></section></li><li><section><p>末行模式下按wq（write &amp; quit）关闭文件</p></section></li></ul><li><section><p>vim的异常情况</p></section></li><ul><li><section>vim每次打开编辑的时候会生成一个swp缓存文件，当多处编辑或者异常断开的时候会有未处理的swp文件，打开的时候就就会报错提示</section></li><li><section>按提示操作或者当不重要的时候直接删除swp文件即可</section></li></ul><li><section><p>vim的教程</p></section></li><ul><li><section>vimtutor zh_CN可以查看帮助文档（中文）</section></li></ul><h2 data-tool="mdnice编辑器"><span>文本处理三驾马车</span></h2><h3 data-tool="mdnice编辑器"><span>grep</span></h3><p data-tool="mdnice编辑器"><span>一种强大的文本搜索工具，它能使用</span><span>正则表达式</span><span>匹配模式搜索文本，并把匹配的行打印出来</span></p><p data-tool="mdnice编辑器">格式：grep  [options]  pattern  file</p><p data-tool="mdnice编辑器">常见参数：</p><p data-tool="mdnice编辑器">-w：word 精确查找某个关键词 pattern</p><p data-tool="mdnice编辑器">-c：统计匹配成功的行的数量</p><p data-tool="mdnice编辑器">-v：反向选择，即输出没有没有匹配的行</p><p data-tool="mdnice编辑器">-n：显示匹配成功的行所在的行号</p><p data-tool="mdnice编辑器">-r：从目录中查找pattern，可以返回是在哪个文件中找到的，不能查找压缩文件</p><p data-tool="mdnice编辑器">-e：指定多个匹配模式</p><p data-tool="mdnice编辑器">-f：从指定文件中读取要匹配的 pattern</p><p data-tool="mdnice编辑器">-i：忽略大小写</p><pre data-tool="mdnice编辑器"><span></span><code>grep Biotrainee -r ./<br>less Data/example.gtf<br>less -S Data/example.gtf | grep <span>'gene'</span><br>less -S Data/example.gtf | grep -w <span>'gene'</span><br>less -S Data/example.gtf | grep -w -c <span>'gene'</span><br>less -S Data/example.gtf | grep -v -w <span>'gene'</span><br><br>cat &gt;file<br>gene<br>UTR<br>start_codon<br>stop_codon<br>^C(Ctrl C)<br>less -S Data/example.gtf | grep -w -f <span>'gene'</span> | less -S<br><br></code></pre><h3 data-tool="mdnice编辑器"><span>正则表达式</span></h3><p data-tool="mdnice编辑器">是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。</p><pre data-tool="mdnice编辑器"><span></span><code>grep -E 开启正则表达式模式，之后的正则表达式搜索就不用加\转换了<br>^ 行首<br><span>$</span><span> 行尾</span><br>. 换行符之外的任意单个字符<br>? 匹配之前项0次或者一次，要加\转换，告诉它不是普通的字符<br>+ 匹配1次或者多次，要加\<br>* 匹配0次或者多次，不用加\<br>{n} 匹配n次<br>{n,} 匹配至少n次<br>{m,n} 至少m,最多n<br>[] 匹配任意一个<br>[^] 排除字符<br>| 或者<br></code></pre><pre data-tool="mdnice编辑器"><span></span><code>cat readme.txt  | grep <span>'^T'</span><br>cat readme.txt  | grep <span>')$'</span><br>cat readme.txt  | grep <span>'f.ee'</span><br>cat readme.txt  | grep <span>'f\?ee'</span><br>cat readme.txt  | grep <span>'re\+'</span><br>cat readme.txt  | grep [bB]<br><br></code></pre><h3 data-tool="mdnice编辑器"><span>sed</span></h3><p data-tool="mdnice编辑器">流编辑器，一般用来对文本进行增删改查</p><p data-tool="mdnice编辑器">用法：sed  [-options]  'script'  file(s)</p><p data-tool="mdnice编辑器">常见参数options：</p><p data-tool="mdnice编辑器">-n ：禁止显示所有输入内容，只显示经过sed处理的行(常用)</p><p data-tool="mdnice编辑器">-e ：直接在命令模式上进行 sed 的动作编辑，接要执行的一个或者多个命令</p><p data-tool="mdnice编辑器">-f ：执行含有 sed 动作的文件</p><p data-tool="mdnice编辑器">-r ：sed 的动作支持的扩展正则(默认基础正则)</p><p data-tool="mdnice编辑器">-i ：直接修改读取的文件内容，不输出。</p><p data-tool="mdnice编辑器">script：[address] [!] command</p><ul data-tool="mdnice编辑器"><li><section><p>address：表示要修改的位置</p><p>2：第二行</p><p>2,4：从第二行<strong>到</strong>第四行</p><p>2,$：从第二行到最后一行</p><p>2~3：从第二行开始，每隔3行取一行：2，5，8</p><p>2,+4：从第二行到2+4行</p><p>/pattern/：匹配上pattern的行</p><p>[2!]：取反，除了第二行</p></section></li><li><section><p>command：增删改查</p><p>a：append，在指定行<strong>后</strong>增加一行，内容为a后接的字符串</p><p>i：insert，在指定行<strong>前</strong>增加一行，内容为i后接的字符串</p><p>d：delete，删除某一行或某几行，也可以指定删除匹配上的行</p><p>c：change，改变指定行的内容</p><p><span><span>s：更改或替换字符串，格式：'s/pattern/new/[</span><span>flags</span><span>]'，把pattern替换为new，默认只替换一个，可以指定flags：处理</span></span><strong>第几行</strong>，如果处理每一行则为g</p><p>y：转换，字符一对一转换，格式：'y/abc/ABC'</p><p>p：把修改过的行打印出来，通常-p -n顺便把行号也显示出来</p><p>$()：括号内的命令先运行，相当于加减乘除的括号</p></section></li></ul><pre data-tool="mdnice编辑器"><span></span><code>cat readme.txt | sed <span>'1i Welcome to Biotrainee() '</span><br>cat readme.txt | sed <span>'1a Welcome to Biotrainee() '</span><br>cat readme.txt | sed <span>'1c Welcome to Biotrainee() <br>cat readme.txt | sed '</span>/^$/d<span>'<br>cat readme.txt | sed '</span>s/is/IS/g<span>'<br>cat readme.txt | sed '</span>1 s/ee/EE/g<span>'<br>cat readme.txt | sed '</span>1~3 s/ee/EE/<span>'<br>cat readme.txt | sed '</span>/www/ s/ee/EE/<span>'<br>cat readme.txt | sed  '</span>y/abc/ABC/<span>'<br>cat readme.txt | sed -n '</span>/ee/p<span>'<br>cat readme.txt | sed -n '</span>s/ee/EE/p<span>'<br></span></code></pre><h3 data-tool="mdnice编辑器"><span>awk</span></h3><p data-tool="mdnice编辑器">也称gawk，编程语言，可对文本和数据进行处理</p><p data-tool="mdnice编辑器">常见参数：-F，fields，设置字段分隔符；</p><p data-tool="mdnice编辑器">-v，var=value 定义awk程序中的一个变量及其默认值</p><p data-tool="mdnice编辑器">用法：awk  [options]  '{script}'  file</p><p data-tool="mdnice编辑器">基础结构：' {script} '</p><p data-tool="mdnice编辑器">匹配结构：' /pattern/{script} '</p><p data-tool="mdnice编辑器">扩展结构：'BEGIN{script} {script} END{script}'</p><ul data-tool="mdnice编辑器"><li><section>awk读取一行文本的时候会用预定义的字段分隔符划分每个数据字段，并分配给一个变量</section></li><ul><li><section>$0代表整个文本行</section></li><li><section>$1代表文本行中的第一个数据字段，相当于第几列</section></li><li><section>$nf代表文本行中最后一个数据字段</section></li></ul><li><section>awk默认的字段分隔符是<strong>任意空白字符</strong>如空格或制表符，也可以用-F自定义分隔符</section></li></ul><pre data-tool="mdnice编辑器"><span></span><code><span># 基本用法</span><br>less -S  Data/example.gtf <br>less -S  Data/example.gtf | cut -f 9 | less -S<br>less -S  Data/example.gtf | awk <span>'{print $9}'</span> | less -S<br>less -S  Data/example.gtf | awk <span>'{print $9,$10}'</span> | less -S<br>less -S  Data/example.gtf | awk -F <span>'\t'</span> <span>'{print $9}'</span> | less -S<br><span># 扩展结构</span><br>less -S Data/example.gtf | awk <span>'/UTR/{print $0}'</span> | less -S<br>less -S Data/example.gtf | awk <span>'BEGIN{print "find UTR feature"} /UTR/{print $0} END{print "end"}'</span><br>less -S Data/example.gtf | awk <span>'BEGIN{FS="\t"} {print $9}'</span> | less -S<br>less -S Data/example.gtf | awk <span>'BEGIN{FS="\t"} {print NR,$9}'</span> | less -S<br><span># 条件和循环，条件比较常用，比如把第三行是gene的第一行拿出来，注意外面是单引号，里面双引号</span><br>less -S  Data/example.gtf | awk <span>'{if($3=="gene") {print $0} }'</span> | less -S<br>less -S  Data/example.gtf | awk <span>'{if($3=="gene") {print $1,$2,$3} }'</span> | less -S<br>less -S  Data/example.gtf | awk <span>'{for(i=1;i&lt;4;i++){print $i} }'</span> | less -S<br>less -S  Data/example.gtf | awk <span>'{for(i=1;i&lt;4;i++){print $i} }'</span> | paste - - - | less -S<br><span># 运算和字符处理</span><br>less -S  Data/example.gtf | awk <span>'/exon/{print $5-$4}'</span> | less -S<br>less -S  Data/example.gtf | awk <span>'{print $5/$4}'</span> | less -S<br>less -S  Data/example.gtf | awk <span>'{print int($5/$4) }'</span> | less -S<br>less -S  Data/example.gtf | awk <span>'{print int($5/$4 + 0.5) }'</span> | less -S<br>less -S Data/example.gtf | awk <span>'BEGIN{FS="\t";OFS="\t"} {gsub("gene","Gene",$3);print $0}'</span> | less -S<br><br></code></pre><p data-tool="mdnice编辑器">awk内置变量：</p><ul data-tool="mdnice编辑器"><li><section>FS：定义输入字段分隔符，怎么定义一列</section></li><li><section>RS：定义输入记录分隔符，怎么定义一行</section></li><li><section>OFS：定义输出字段分隔符</section></li><li><section><span>ORS</span><span>：定义输出记录分隔符</span></section></li><li><section>NF：数据文件中的字段总数，列数</section></li><li><section>NR：已处理的输入记录数，行数</section></li></ul><blockquote data-tool="mdnice编辑器"><p><span>from </span><span>生信技能树</span></p></blockquote><span></span></section><p><br></p><section data-tool="mdnice编辑器" data-website="https://www.mdnice.com"><h3 data-tool="mdnice编辑器"><span>文末友情宣传</span></h3><p data-tool="mdnice编辑器"><strong>强烈建议你推荐给身边的博士后以及年轻生物学PI，多一点数据认知，让他们的科研上一个台阶：</strong></p><ul data-tool="mdnice编辑器"><li><section><a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247530001&amp;idx=1&amp;sn=676dcf224f9be23b288189775292aeeb&amp;chksm=9b4b36aaac3cbfbc3e3bb0865bd789d5093e3a643f3f345332995f707b7f209ae924e9e9529e&amp;scene=21#wechat_redirect" textvalue="生物信息学马拉松授课（买‍一得五）" linktype="text" imgurl="" imgdata="null" data-itemshowtype="0" tab="innerlink" data-linktype="2" hasload="1">生物信息学马拉松授课（买一得五）</a> ，你的生物信息学入门课</section></li><li><section><a href="https://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247524148&amp;idx=1&amp;sn=7806da6feb41a36493c519c1cfc1d3ac&amp;scene=21#wechat_redirect" data-linktype="2">时隔5年，我们的生信技能树VIP学徒继续招生啦</a></section></li><li><section><a href="https://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247528363&amp;idx=1&amp;sn=5e02f3e9b2e148191e23ebc2c0d780e7&amp;scene=21#wechat_redirect" data-linktype="2">2024的共享服务器交个朋友福利价仍然是800</a></section></li><li><section><a href="https://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247519765&amp;idx=1&amp;sn=ce5a8c8182f854c88043059f8c2cb9ff&amp;scene=21#wechat_redirect" data-linktype="2">千呼万唤始出来的独享生物信息学云服务器</a></section></li><li><section><a href="https://mp.weixin.qq.com/s?__biz=MzAxMDkxODM1Ng==&amp;mid=2247528144&amp;idx=1&amp;sn=be4d7e542d1077921024c86a4c130f16&amp;scene=21#wechat_redirect" data-linktype="2">永久免费的生信进阶培训（线下）</a></section></li></ul></section><p><br></p><p><br></p><p><mp-style-type data-value="10000"></mp-style-type></p></div>  
<hr>
<a href="https://mp.weixin.qq.com/s/OImOaSvPnpDwDFEfVp_JTg",target="_blank" rel="noopener noreferrer">原文链接</a>
